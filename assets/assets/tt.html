<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="description" content="Transformation of a picture into string art." />
    <title>Threading</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" type="image/png" href="favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96">
    <!-- <link rel="stylesheet" type="text/css" href="css/page.css?v=2023-01-08T18%3A32%3A29.723Z"> -->

    <style>
        body {
            text-align: center
        }

        #error-messages {
            margin: 32px 8px;
            color: red;
            font-weight: bold
        }

        .demo {
            display: flex;
            flex-flow: row wrap;
            align-items: flex-start;
            justify-content: center;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none
        }

        .logo {
            display: block;
            position: relative;
            width: 64px;
            height: 64px;
            margin: 8px auto 16px;
            border-radius: 50%;
            user-select: none;
            box-sizing: border-box
        }

        .logo,
        .logo:hover,
        .logo:focus,
        .logo:active {
            border-width: 1px;
            border-style: solid;
            border-color: #009688;
            border-color: var(--var-color-control-accent, #009688)
        }

        .logo::before,
        .logo svg.logo-icon,
        .logo::after {
            position: absolute;
            top: -1px;
            left: -1px;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            pointer-events: none
        }

        .logo svg.logo-icon {
            stroke: #009688;
            stroke: var(--var-color-control-accent, #009688);
            fill: #009688;
            fill: var(--var-color-control-accent, #009688)
        }

        .logo::before {
            content: "";
            transform: scale(0);
            -webkit-transform: scale(0);
            -ms-transform: scale(0);
            transition: .1s ease;
            -webkit-transition: .1s ease
        }

        .logo.logo-animate-fill .logo::before {
            content: "";
            transform: scale(0);
            -webkit-transform: scale(0);
            -ms-transform: scale(0);
            transition: .1s ease;
            -webkit-transition: .1s ease
        }

        .logo:hover::before {
            transform: scale(1);
            -webkit-transform: scale(1);
            -ms-transform: scale(1)
        }

        .logo.logo-animate-fill {
            background: #eeeeee;
            background: var(--var-color-block-background, #eeeeee)
        }

        .logo.logo-animate-fill::before {
            background: #009688;
            background: var(--var-color-control-accent, #009688)
        }

        .logo.logo-animate-fill:hover svg.logo-icon {
            fill: #fff;
            stroke: #fff
        }

        .logo.logo-animate-empty {
            background: #009688;
            background: var(--var-color-control-accent, #009688)
        }

        .logo.logo-animate-empty::before {
            top: 0;
            left: 0;
            width: 62px;
            height: 62px;
            background: #eeeeee;
            background: var(--var-color-block-background, #eeeeee)
        }

        .intro {
            margin: auto;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid #c9c9c9;
            border: var(--var-color-block-border, 1px solid #c9c9c9);
            background: #eeeeee;
            background: var(--var-color-block-background, #eeeeee)
        }

        .intro h1 {
            margin-top: 0;
            text-align: center
        }

        @media only screen and (min-width: 560px) {
            .intro {
                max-width: 512px;
                border-width: 1px
            }
        }

        .description {
            justify-content: center;
            line-height: 125%;
            text-align: justify;
            text-indent: 1em
        }

        a {
            color: #009688;
            color: var(--var-color-control-accent, #009688);
            font-weight: bold;
            text-decoration: none;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box
        }

        a:focus,
        a:hover {
            border-width: 0 0 2px;
            border-style: solid;
            border-color: #009688;
            border-color: var(--var-color-control-accent, #009688)
        }

        .canvas-button {
            width: 32px;
            height: 32px;
            cursor: pointer
        }

        #canvas-container {
            position: relative;
            margin-bottom: 16px;
            background: #000;
            overflow: hidden
        }

        @media only screen and (min-width: 540px) {
            #canvas-container {
                margin: 16px
            }
        }

        #canvas-container>canvas {
            width: 100%;
            height: 100%;
            z-index: 10
        }

        #canvas-container>.loader {
            display: none
        }

        #indicators {
            display: flex;
            position: absolute;
            top: 1px;
            left: 1px;
            flex-direction: column;
            align-items: flex-start;
            color: #fff;
            font-family: "Lucida Console", Monaco, monospace;
            text-align: left;
            z-index: 20
        }

        #indicators>div {
            flex: 0 0 1em;
            margin: 1px;
            padding: 1px 4px;
            background: #000
        }

        #canvas-buttons-column {
            position: absolute;
            top: 0;
            right: 0;
            width: 32px;
            z-index: 30
        }

        #fullscreen-toggle-id {
            display: block;
            background-image: url("../images/resize.svg");
            background-position: 0 0;
            background-size: 200%
        }

        #fullscreen-toggle-id:hover {
            background-position-x: 100%
        }

        #side-pane-toggle-id {
            display: none;
            background-image: url("../images/gear.svg");
            transition: transform .1s ease-in-out;
            -webkit-transition: transform .1s ease-in-out
        }

        #side-pane-toggle-id:hover {
            transform: rotate(-30deg);
            -webkit-transform: rotate(-30deg);
            -ms-transform: rotate(-30deg)
        }

        #side-pane-checkbox-id:checked+#canvas-container #side-pane-toggle-id:hover {
            transform: rotate(30deg);
            -webkit-transform: rotate(30deg);
            -ms-transform: rotate(30deg)
        }

        .hidden {
            display: none
        }

        #fullscreen-checkbox-id:checked+.demo {
            position: fixed;
            overflow: hidden
        }

        #fullscreen-checkbox-id:checked+.demo #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            z-index: 5
        }

        #fullscreen-checkbox-id:checked+.demo #canvas-container #canvas-buttons-column {
            transition: transform .2s ease-in-out;
            -webkit-transition: transform .2s ease-in-out
        }

        #fullscreen-checkbox-id:checked+.demo #canvas-container #fullscreen-toggle-id {
            background-position-y: 100%
        }

        @media only screen and (min-width: 500px) {
            #fullscreen-checkbox-id:checked+.demo #canvas-container #side-pane-toggle-id {
                display: block
            }
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id:checked+#canvas-container #canvas-buttons-column {
            transform: translateX(-400px)
        }

        .loader {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            width: 120px;
            height: 120px;
            margin: auto
        }

        .loader>span {
            color: #fff;
            font-size: 32px;
            line-height: 120px;
            text-shadow: 1px 1px #000, -1px 1px #000, 1px -1px #000, -1px -1px #000, 1px 0 #000, -1px 0 #000, 0 1px #000, 0 -1px #000
        }

        .loader-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 120px;
            height: 120px;
            animation: spin 1.1s linear infinite
        }

        .loader-animation:before {
            position: absolute;
            top: -1px;
            left: -1px;
            width: 122px;
            height: 122px;
            border: 6px solid transparent;
            border-top: 6px solid #000;
            border-radius: 50%;
            content: "";
            z-index: 50;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box
        }

        .loader-animation:after {
            position: absolute;
            top: 0;
            left: 0;
            width: 120px;
            height: 120px;
            border: 4px solid transparent;
            border-top: 4px solid #fff;
            border-radius: 50%;
            content: "";
            z-index: 51;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg)
            }

            100% {
                transform: rotate(360deg)
            }
        }

        .canvas-button {
            width: 32px;
            height: 32px;
            cursor: pointer
        }

        .controls-block {
            flex: 1 0 0;
            max-width: 36em;
            margin: 16px 0;
            padding: 12px 0;
            border-radius: 8px;
            border: 1px solid #c9c9c9;
            border: var(--var-color-block-border, 1px solid #c9c9c9);
            background: #eeeeee;
            background: var(--var-color-block-background, #eeeeee);
            z-index: 0
        }

        @media only screen and (min-width: 540px) {
            .controls-block {
                margin: 16px
            }
        }

        .controls-block>hr {
            margin: 12px 0;
            clear: both;
            border: none;
            border-top: 1px solid #c9c9c9;
            border-top: var(--var-color-block-border, 1px solid #c9c9c9)
        }

        .controls-section {
            display: flex;
            flex-flow: row wrap;
            align-items: baseline;
            margin: 0 16px
        }

        .controls-section>h2 {
            width: 7em;
            margin: 0;
            font-size: medium;
            font-weight: bold;
            line-height: 2em;
            text-align: left
        }

        .controls-section>.controls-list {
            display: flex;
            flex-direction: column;
            flex-grow: 1
        }

        .controls-list>.control {
            display: flex;
            flex-flow: row wrap;
            align-items: center;
            min-width: 300px;
            padding: 3px 0
        }

        .control>label {
            min-width: 8em;
            font-size: 95%;
            line-height: 95%;
            text-align: left
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id~.controls-block {
            position: fixed;
            top: 0;
            left: 100%;
            width: 400px;
            max-height: calc(100% - 48px);
            margin: 0;
            border-width: 0 0 1px 1px;
            border-radius: 0 0 0 8px;
            z-index: 50;
            overflow-x: hidden;
            overflow-y: auto;
            transition: transform .2s ease-in-out;
            -webkit-transition: transform .2s ease-in-out
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id~.controls-block::-webkit-scrollbar {
            width: 16px
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id~.controls-block::-webkit-scrollbar-track {
            border-radius: 8px;
            background-color: #eeeeee;
            background-color: var(--var-color-block-background, #eeeeee)
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id~.controls-block::-webkit-scrollbar-thumb {
            border-width: 3px 5px;
            border-style: solid;
            border-radius: 8px;
            border-color: #eeeeee;
            border-color: var(--var-color-block-background, #eeeeee);
            background-color: #a5a5a5;
            background-color: var(--var-color-scrollbar, #a5a5a5)
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id~.controls-block::-webkit-scrollbar-thumb:focus,
        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id~.controls-block::-webkit-scrollbar-thumb:hover {
            background-color: #b2b2b2;
            background-color: var(--var-color-scrollbar-hover, #b2b2b2)
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id~.controls-block::-webkit-scrollbar-thumb:active {
            background-color: #959595;
            background-color: var(--var-color-scrollbar-active, #959595)
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id~.controls-block:hover::-webkit-scrollbar-thumb {
            border-width: 3px
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id:checked~.controls-block {
            transform: translateX(-100%);
            -webkit-transform: translateX(-100%);
            -ms-transform: translateX(-100%)
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id:checked~.controls-block .tooltip {
            transform: translateX(-100vw) translateX(400px);
            -webkit-transform: translateX(-100vw) translateX(400px);
            -ms-transform: translateX(-100vw) translateX(400px)
        }

        #fullscreen-checkbox-id:checked+.demo #side-pane-checkbox-id:checked~.controls-block>#side-pane-close-toggle-id {
            display: block
        }

        #side-pane-close-toggle-id {
            display: none;
            position: absolute;
            top: 0;
            right: 0
        }

        #side-pane-close-toggle-id svg {
            stroke: #5e5e5e;
            stroke: var(--var-color-block-actionitem, #5e5e5e)
        }

        #side-pane-close-toggle-id svg:focus,
        #side-pane-close-toggle-id svg:hover {
            stroke: #7e7e7e;
            stroke: var(--var-color-block-actionitem-hover, #7e7e7e)
        }

        #side-pane-close-toggle-id svg:active {
            stroke: #535353;
            stroke: var(--var-color-block-actionitem-active, #535353)
        }

        .file-control {
            position: relative
        }

        .file-control>input.file-input {
            position: absolute;
            top: 0;
            left: 0;
            width: 1px;
            height: 1px;
            opacity: 0
        }

        .file-control>.file-control-button {
            display: inline-block;
            position: relative;
            padding: 6px 12px 6px 2em;
            border-width: 2px;
            border-style: solid;
            border-radius: 4px;
            font-size: 87.5%;
            font-weight: bold;
            cursor: pointer;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box
        }

        .file-control>.file-control-button>svg {
            position: absolute;
            top: 0;
            left: .2em;
            width: 1.5em;
            height: 100%
        }

        .file-control.compact>.file-control-button {
            padding: 4px 12px 4px 2em;
            font-size: 75%
        }

        .file-control>input.file-input+.file-control-button {
            border-color: #009688;
            border-color: var(--var-color-control-accent, #009688);
            color: #009688;
            color: var(--var-color-control-accent, #009688)
        }

        .file-control>input.file-input+.file-control-button>svg {
            fill: #009688;
            fill: var(--var-color-control-accent, #009688)
        }

        .file-control>input.file-input:focus+.file-control-button,
        .file-control>input.file-input:hover:not(:disabled)+.file-control-button {
            border-color: #26a69a;
            border-color: var(--var-color-control-accent-hover, #26a69a);
            color: #26a69a;
            color: var(--var-color-control-accent-hover, #26a69a)
        }

        .file-control>input.file-input:focus+.file-control-button>svg,
        .file-control>input.file-input:hover:not(:disabled)+.file-control-button>svg {
            fill: #26a69a;
            fill: var(--var-color-control-accent-hover, #26a69a)
        }

        .file-control>input.file-input:active:not(:disabled)+.file-control-button {
            border-color: #00897b;
            border-color: var(--var-color-control-accent-active, #00897b);
            color: #00897b;
            color: var(--var-color-control-accent-active, #00897b);
            background: rgba(0, 150, 136, .1)
        }

        .file-control>input.file-input:active:not(:disabled)+.file-control-button>svg {
            fill: #00897b;
            fill: var(--var-color-control-accent-active, #00897b)
        }

        .file-control>input.file-input:disabled+.file-control-button {
            border-color: #a5a5a5;
            color: #a5a5a5
        }

        .file-control>input.file-input:disabled+.file-control-button>svg {
            fill: #a5a5a5
        }

        .tabs {
            display: flex;
            position: relative;
            flex-flow: row wrap;
            flex-grow: 1;
            width: auto;
            border-radius: 4px;
            background: none;
            overflow: hidden
        }

        .tabs::after {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-width: 2px;
            border-style: solid;
            border-color: #c9c9c9;
            border-color: var(--var-color-control-neutral, #c9c9c9);
            border-radius: 4px;
            content: "";
            z-index: 1;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box
        }

        .tabs.compact>input+label {
            padding: 6px 14px;
            font-size: 75%
        }

        .tabs>input {
            position: absolute;
            top: 0;
            left: 0;
            width: 1px;
            height: 1px;
            opacity: 0
        }

        .tabs>input+label {
            flex: 1;
            padding: 8px 14px;
            font-size: 87.5%;
            font-weight: bold;
            text-align: center;
            white-space: nowrap;
            cursor: pointer;
            z-index: 2
        }

        .tabs>input:disabled+label,
        .tabs>input[type=radio]:checked+label {
            cursor: default
        }

        .tabs>input+label {
            background: none;
            color: #009688;
            color: var(--var-color-control-accent, #009688)
        }

        .tabs>input:checked+label {
            background: #009688;
            background: var(--var-color-control-accent, #009688);
            color: #fff
        }

        .tabs>input:disabled+label {
            background: none;
            color: #a5a5a5
        }

        .tabs>input:disabled:checked+label {
            background: #a5a5a5;
            color: #fff
        }

        .tabs>input[type=checkbox]:not(:disabled):hover+label,
        .tabs>input[type=checkbox]:not(:disabled):focus+label {
            background: rgba(0, 150, 136, .05)
        }

        .tabs>input[type=checkbox]:not(:disabled):hover:checked+label,
        .tabs>input[type=checkbox]:not(:disabled):focus:checked+label {
            background: #26a69a;
            background: var(--var-color-control-accent-hover, #26a69a)
        }

        .tabs>input[type=checkbox]:not(:disabled):active+label {
            background: rgba(0, 150, 136, .1)
        }

        .tabs>input[type=checkbox]:not(:disabled):active:checked+label {
            background: #00897b;
            background: var(--var-color-control-accent-active, #00897b)
        }

        .tabs>input[type=radio]:not(:disabled):not(:checked):hover+label,
        .tabs>input[type=radio]:not(:disabled):not(:checked):focus+label {
            background: rgba(0, 150, 136, .05)
        }

        .tabs>input[type=radio]:not(:disabled):not(:checked):active+label {
            background: rgba(0, 150, 136, .1)
        }

        .range-container {
            display: inline-block;
            position: relative;
            flex: 1 1 0%;
            width: 100%;
            min-width: 15px;
            height: 26px
        }

        .range-container input[type=range] {
            width: 100%;
            min-width: 128px;
            height: 100%;
            margin: 0;
            padding: 0;
            opacity: 0
        }

        .range-container input[type=range]:not(:disabled) {
            cursor: pointer
        }

        .range-container .range-skin-container {
            display: flex;
            position: absolute;
            top: 0;
            left: 0;
            flex-flow: nowrap;
            width: 100%;
            height: 100%;
            pointer-events: none;
            user-select: none
        }

        .range-container .range-stub {
            position: relative;
            flex-grow: 0;
            flex-shrink: 0;
            width: 7px
        }

        .range-container .range-progress {
            display: flex;
            flex: 1;
            flex-flow: row nowrap
        }

        .range-container .range-progress-left {
            position: relative;
            flex-grow: 0;
            flex-shrink: 0;
            width: 85%
        }

        .range-container .range-progress-right {
            position: relative;
            flex-grow: 1
        }

        .range-container .range-bar {
            position: absolute;
            left: 0;
            width: 100%;
            z-index: 0
        }

        .range-container .range-bar.range-bar-left {
            top: 12px;
            height: 3px
        }

        .range-container .range-bar.range-bar-right {
            top: 12px;
            height: 3px;
            background: #c9c9c9;
            background: var(--var-color-control-neutral, #c9c9c9)
        }

        .range-container .range-bar.range-stub-left {
            border-radius: 3px 0 0 3px
        }

        .range-container .range-bar.range-stub-right {
            border-radius: 0 3px 3px 0
        }

        .range-container .range-handle {
            position: absolute;
            top: 5.5px;
            right: -7.5px;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            z-index: 1
        }

        .range-container .range-bar-left,
        .range-container .range-handle {
            background: #009688;
            background: var(--var-color-control-accent, #009688)
        }

        .range-container input[type=range]:not(:disabled):hover+.range-skin-container .range-handle,
        .range-container input[type=range]:not(:disabled):focus+.range-skin-container .range-handle {
            background: #26a69a;
            background: var(--var-color-control-accent-hover, #26a69a)
        }

        .range-container input[type=range]:not(:disabled):active+.range-skin-container .range-handle {
            background: #00897b;
            background: var(--var-color-control-accent-active, #00897b)
        }

        .range-container input[type=range]:disabled+.range-skin-container .range-bar-left,
        .range-container input[type=range]:disabled+.range-skin-container .range-handle {
            background: #a5a5a5
        }

        .range-container .range-tooltip {
            position: absolute;
            top: -28px;
            right: 0;
            min-width: 24px;
            padding: 4px;
            transform: translateX(50%);
            transition: opacity .1s ease-in-out;
            border-radius: 4px;
            background: #535353;
            color: #eee;
            font-size: 87.5%;
            text-align: center;
            opacity: 0;
            z-index: 2
        }

        .range-container input[type=range]:hover+.range-skin-container .range-tooltip,
        .range-container input[type=range]:active+.range-skin-container .range-tooltip,
        .range-container input[type=range]:focus+.range-skin-container .range-tooltip {
            opacity: 1
        }

        .range-container .range-tooltip::after {
            position: absolute;
            top: 100%;
            left: 50%;
            width: 0px;
            height: 12px;
            margin-left: -6px;
            border-width: 6px;
            border-style: solid;
            border-color: #535353 transparent transparent;
            content: ""
        }

        .checkbox {
            display: block;
            position: relative;
            text-align: left;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none
        }

        .checkbox>input[type=checkbox] {
            width: 1px;
            height: 1px;
            opacity: 0
        }

        .checkbox>input[type=checkbox]+label.checkmark,
        .checkbox>input[type=checkbox]+label.checkmark-line {
            margin-left: 24px;
            line-height: 26px;
            cursor: pointer
        }

        .checkbox>input[type=checkbox]:disabled+label.checkmark,
        .checkbox>input[type=checkbox]:disabled+label.checkmark-line {
            cursor: default
        }

        .checkbox>input[type=checkbox]+label.checkmark::before {
            position: absolute;
            top: calc(.5*(100% - 20px));
            left: 0;
            width: 20px;
            height: 20px;
            border-width: 2px;
            border-style: solid;
            border-radius: 2px;
            background: none;
            content: "";
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box
        }

        .checkbox>input[type=checkbox]+label.checkmark::after {
            position: absolute;
            top: calc(.5*(100% - 20px) + .5*(20px - 14px));
            right: 0;
            bottom: 0;
            left: 6.5px;
            width: 7px;
            height: 14px;
            border: solid #fff;
            border-width: 0 3px 3px 0;
            background: none;
            content: "";
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            transform: translate(0, -1px) scale(0) rotate(45deg);
            -webkit-transform: translate(0, -1px) scale(0) rotate(45deg);
            -ms-transform: translate(0, -1px) scale(0) rotate(45deg)
        }

        .checkbox>input[type=checkbox]:checked+label.checkmark::after {
            transform: translate(0, -1px) scale(1) rotate(45deg);
            -webkit-transform: translate(0, -1px) scale(1) rotate(45deg);
            -ms-transform: translate(0, -1px) scale(1) rotate(45deg)
        }

        .checkbox>input[type=checkbox]+label.checkmark::before {
            border-color: #009688;
            border-color: var(--var-color-control-accent, #009688)
        }

        .checkbox>input[type=checkbox]:checked+label.checkmark::before {
            background: #009688;
            background: var(--var-color-control-accent, #009688)
        }

        .checkbox>input[type=checkbox]:hover+label.checkmark::before,
        .checkbox>input[type=checkbox]:focus+label.checkmark::before {
            border-color: #26a69a;
            border-color: var(--var-color-control-accent-hover, #26a69a)
        }

        .checkbox>input[type=checkbox]:hover:checked+label.checkmark::before,
        .checkbox>input[type=checkbox]:focus:checked+label.checkmark::before {
            background: #26a69a;
            background: var(--var-color-control-accent-hover, #26a69a)
        }

        .checkbox>input[type=checkbox]:active+label.checkmark::before {
            border-color: #00897b;
            border-color: var(--var-color-control-accent-active, #00897b)
        }

        .checkbox>input[type=checkbox]:active:checked+label.checkmark::before {
            background: #00897b;
            background: var(--var-color-control-accent-active, #00897b)
        }

        .checkbox>input[type=checkbox]:disabled+label.checkmark::before {
            border-color: #a5a5a5
        }

        .checkbox>input[type=checkbox]:disabled:checked+label.checkmark::before {
            background: #a5a5a5
        }

        :root {
            --var-color-theme: white;
            --var-color-page-background: #ededed;
            --var-page-background-image: url("../images/noise-light.png");
            --var-color-block-background: #eeeeee;
            --var-color-block-border: 1px solid #c9c9c9;
            --var-color-title: #535353;
            --var-color-text: #676767;
            --var-color-block-actionitem: #5e5e5e;
            --var-color-block-actionitem-hover: #7e7e7e;
            --var-color-block-actionitem-active: #535353;
            --var-color-scrollbar: #a5a5a5;
            --var-color-scrollbar-hover: #b2b2b2;
            --var-color-scrollbar-active: #959595;
            --var-color-control-neutral: #c9c9c9;
            --var-color-control-accent: #009688;
            --var-color-control-accent-hover: #26a69a;
            --var-color-control-accent-active: #00897b
        }

        @media(prefers-color-scheme: dark) {
            :root {
                --var-color-theme: black;
                --var-color-page-background: #232323;
                --var-page-background-image: url("../images/noise-dark.png");
                --var-color-block-background: #202020;
                --var-color-block-border: 1px solid #535353;
                --var-color-title: #eeeeee;
                --var-color-text: #dbdbdb;
                --var-color-block-actionitem: #dbdbdb;
                --var-color-block-actionitem-hover: #eeeeee;
                --var-color-block-actionitem-active: #c9c9c9;
                --var-color-scrollbar: #7e7e7e;
                --var-color-scrollbar-hover: #959595;
                --var-color-scrollbar-active: #676767;
                --var-color-control-neutral: #5e5e5e;
                --var-color-control-accent: #26a69a;
                --var-color-control-accent-hover: #4db6ac;
                --var-color-control-accent-active: #009688
            }
        }

        :root {
            color-scheme: light dark
        }

        html {
            display: flex;
            min-height: 100%;
            font-family: Arial, Helvetica, sans-serif
        }

        body {
            display: flex;
            flex: 1;
            flex-direction: column;
            min-height: 100vh;
            margin: 0px;
            background-attachment: fixed;
            background: #ededed;
            background: var(--var-color-page-background, #ededed);
            background-image: url("../images/noise-light.png");
            background-image: var(--var-page-background-image, url("../images/noise-light.png"));
            color: #676767;
            color: var(--var-color-text, #676767)
        }

        main {
            display: block;
            flex-grow: 1;
            padding-bottom: 32px
        }

        h1,
        h2,
        h3 {
            color: #535353;
            color: var(--var-color-title, #535353)
        }

        .badge {
            width: 32px;
            height: 32px;
            margin: 8px 12px;
            border: none
        }

        .badge>svg {
            width: 32px;
            height: 32px
        }

        .badge,
        .badge:hover,
        .badge:focus,
        .badge:active {
            border: none
        }

        .badge svg {
            fill: #5e5e5e;
            fill: var(--var-color-block-actionitem, #5e5e5e)
        }

        .badge svg:focus,
        .badge svg:hover {
            fill: #7e7e7e;
            fill: var(--var-color-block-actionitem-hover, #7e7e7e)
        }

        .badge svg:active {
            fill: #535353;
            fill: var(--var-color-block-actionitem-active, #535353)
        }

        .badge-shelf {
            display: flex;
            flex-flow: row;
            justify-content: center
        }

        footer {
            align-items: center;
            padding: 8px;
            text-align: center;
            border-top: 1px solid #c9c9c9;
            border-top: var(--var-color-block-border, 1px solid #c9c9c9);
            background: #eeeeee;
            background: var(--var-color-block-background, #eeeeee)
        }
    </style>
</head>

<body>
    <header>
        <a class="logo logo-animate-fill" href="https://piellardj.github.io" id="back-to-home-button" title="Home"
            aria-label="Home">
            <svg class="logo-icon" xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64">
                <g stroke-width="2">
                    <path fill="none" stroke-linejoin="round"
                        d="M17.5,32h4.5v11h7v-7l1,-1h4l1,1v7h7v-11h4.5L32,16.5z" />
            </svg>
        </a>
    </header>
    <main>
        <div class="intro">
            <h1>Threading</h1>

            <div class="description">
                <p>This tool generates string art from any picture of your choice. Pegs are first placed on the frame,
                    and then a single-color thread is repeatedly ran from peg to peg in a straight line. The stacked
                    segments progressively recreate the original image. This process was popularized by Petros Vrellis.
                </p>
                <p>The monochrome mode uses a single thread, while the color mode uses 3 distinct threads. The result
                    can be exported in the SVG format.</p>

                <br>

                <a href="https://github.com/piellardj/image-stylization-threading">More on GitHub</a>
            </div>
        </div>
        <div id="error-messages">
            <noscript>
                You need to enable Javascript to run this experiment.
            </noscript>
        </div>

        <input type="checkbox" id="fullscreen-checkbox-id" class="hidden">
        <div class="demo">
            <input type="checkbox" id="side-pane-checkbox-id" class="hidden">
            <div id="canvas-container">
                <canvas id="canvas"></canvas>
                <div class="loader">
                    <span></span>
                    <div class="loader-animation"></div>
                </div>
                <div id="indicators">
                    <div id="pegs-count-indicator-id">
                        Pegs count: <span></span>
                    </div>
                    <div id="segments-count-indicator-id">
                        Segments count: <span></span>
                    </div>
                    <div id="error-average-indicator-id">
                        Error (average): <span></span>
                    </div>
                    <div id="error-mean-square-indicator-id">
                        Error (mean square): <span></span>
                    </div>
                    <div id="error-variance-indicator-id">
                        Error (variance): <span></span>
                    </div>
                </div>
                <div id="canvas-buttons-column">
                    <label class="canvas-button" id="fullscreen-toggle-id" for="fullscreen-checkbox-id"></label>
                    <label class="canvas-button" id="side-pane-toggle-id" for="side-pane-checkbox-id"></label>
                </div>
            </div>
            <div class="controls-block">
                <label class="canvas-button" id="side-pane-close-toggle-id" for="side-pane-checkbox-id">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                        <line x1="22" y1="22" x2="10" y2="10" stroke-linecap="round" stroke-width="2" />
                        <line x1="22" y1="10" x2="10" y2="22" stroke-linecap="round" stroke-width="2" />
                    </svg>
                </label>
                <section class="controls-section">
                    <h2>Input</h2>

                    <div class="controls-list">
                        <div class="control" id="control-input-image-upload-button">
                            <div class="file-control upload ">
                                <input type="file" name="file" id="input-image-upload-button" class="file-input"
                                    accept=".png,.jpg,.bmp,.webp" />
                                <label class="file-control-button" for="input-image-upload-button">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                                        <path d="M12 22L12 13 7 13 16 2 25 13 20 13 20 22ZM6 25L26 25 26 29 6 29Z" />
                                    </svg>
                                    <span data-placeholder="Upload an image">Upload an image</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>
                <hr />
                <section class="controls-section">
                    <h2>Pegs</h2>

                    <div class="controls-list">
                        <div class="control" id="control-shape-tabs-id">
                            <label>Shape:</label>
                            <div class="tabs compact" id="shape-tabs-id-id">
                                <input type="radio" name="shape-tabs-id" value="0" id="shape-tabs-id-0-id" checked />
                                <label for="shape-tabs-id-0-id">Rectangle</label>
                                <input type="radio" name="shape-tabs-id" value="1" id="shape-tabs-id-1-id" />
                                <label for="shape-tabs-id-1-id">Ellipsis</label>
                            </div>
                        </div>
                        <div class="control" id="control-pegs-range-id">
                            <label>Pegs count:</label>
                            <div class="range-container">
                                <input type="range" min="200" max="1200" value="350" step="10" class="slider"
                                    id="pegs-range-id">
                                <div class="range-skin-container">
                                    <div class="range-stub">
                                        <span class="range-bar range-bar-left range-stub-left"></span>
                                    </div>
                                    <div class="range-progress">
                                        <div class="range-progress-left">
                                            <span class="range-bar range-bar-left"></span>
                                            <span class="range-handle"></span>
                                            <output for="pegs-range-id" class="range-tooltip"></output>
                                        </div>
                                        <div class="range-progress-right">
                                            <span class="range-bar range-bar-right"></span>
                                        </div>
                                    </div>
                                    <div class="range-stub">
                                        <span class="range-bar range-bar-right range-stub-right"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <hr />
                <section class="controls-section">
                    <h2>Parameters</h2>

                    <div class="controls-list">
                        <div class="control" id="control-quality-tabs-id">
                            <label>Quality:</label>
                            <div class="tabs compact" id="quality-tabs-id-id">
                                <input type="radio" name="quality-tabs-id" value="1" id="quality-tabs-id-1-id"
                                    checked />
                                <label for="quality-tabs-id-1-id">Low</label>
                                <input type="radio" name="quality-tabs-id" value="2" id="quality-tabs-id-2-id" />
                                <label for="quality-tabs-id-2-id">Medium</label>
                                <input type="radio" name="quality-tabs-id" value="3" id="quality-tabs-id-3-id" />
                                <label for="quality-tabs-id-3-id">High</label>
                            </div>
                        </div>
                        <div class="control" id="control-thread-mode-tabs-id">
                            <label>Mode:</label>
                            <div class="tabs compact" id="thread-mode-tabs-id-id">
                                <input type="radio" name="thread-mode-tabs-id" value="0" id="thread-mode-tabs-id-0-id"
                                    checked />
                                <label for="thread-mode-tabs-id-0-id">Monochrome</label>
                                <input type="radio" name="thread-mode-tabs-id" value="1"
                                    id="thread-mode-tabs-id-1-id" />
                                <label for="thread-mode-tabs-id-1-id">Three colors</label>
                            </div>
                        </div>
                        <div class="control" id="control-invert-colors-checkbox-id">
                            <label>Dark mode:</label>
                            <div class="checkbox">
                                <input type="checkbox" id="invert-colors-checkbox-id">
                                <label for="invert-colors-checkbox-id" class="checkmark"></label>
                            </div>
                        </div>
                        <div class="control" id="control-lines-range-id">
                            <label>Segments count:</label>
                            <div class="range-container">
                                <input type="range" min="500" max="15000" value="2500" step="500" class="slider"
                                    id="lines-range-id">
                                <div class="range-skin-container">
                                    <div class="range-stub">
                                        <span class="range-bar range-bar-left range-stub-left"></span>
                                    </div>
                                    <div class="range-progress">
                                        <div class="range-progress-left">
                                            <span class="range-bar range-bar-left"></span>
                                            <span class="range-handle"></span>
                                            <output for="lines-range-id" class="range-tooltip"></output>
                                        </div>
                                        <div class="range-progress-right">
                                            <span class="range-bar range-bar-right"></span>
                                        </div>
                                    </div>
                                    <div class="range-stub">
                                        <span class="range-bar range-bar-right range-stub-right"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="control" id="control-opacity-range-id">
                            <label>Opacity:</label>
                            <div class="range-container">
                                <input type="range" min="1" max="5" value="2" step="1" class="slider"
                                    id="opacity-range-id">
                                <div class="range-skin-container">
                                    <div class="range-stub">
                                        <span class="range-bar range-bar-left range-stub-left"></span>
                                    </div>
                                    <div class="range-progress">
                                        <div class="range-progress-left">
                                            <span class="range-bar range-bar-left"></span>
                                            <span class="range-handle"></span>
                                            <output for="opacity-range-id" class="range-tooltip"></output>
                                        </div>
                                        <div class="range-progress-right">
                                            <span class="range-bar range-bar-right"></span>
                                        </div>
                                    </div>
                                    <div class="range-stub">
                                        <span class="range-bar range-bar-right range-stub-right"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="control" id="control-thickness-range-id">
                            <label>Thickness:</label>
                            <div class="range-container">
                                <input type="range" min="0.25" max="1" value="0.5" step="0.25" class="slider"
                                    id="thickness-range-id">
                                <div class="range-skin-container">
                                    <div class="range-stub">
                                        <span class="range-bar range-bar-left range-stub-left"></span>
                                    </div>
                                    <div class="range-progress">
                                        <div class="range-progress-left">
                                            <span class="range-bar range-bar-left"></span>
                                            <span class="range-handle"></span>
                                            <output for="thickness-range-id" class="range-tooltip"></output>
                                        </div>
                                        <div class="range-progress-right">
                                            <span class="range-bar range-bar-right"></span>
                                        </div>
                                    </div>
                                    <div class="range-stub">
                                        <span class="range-bar range-bar-right range-stub-right"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <hr />
                <section class="controls-section">
                    <h2>Display</h2>

                    <div class="controls-list">
                        <div class="control" id="control-display-pegs-checkbox-id">
                            <label>Pegs:</label>
                            <div class="checkbox">
                                <input type="checkbox" id="display-pegs-checkbox-id" checked>
                                <label for="display-pegs-checkbox-id" class="checkmark"></label>
                            </div>
                        </div>
                        <div class="control" id="control-show-indicators-checkbox-id">
                            <label>Show indicators:</label>
                            <div class="checkbox">
                                <input type="checkbox" id="show-indicators-checkbox-id" checked>
                                <label for="show-indicators-checkbox-id" class="checkmark"></label>
                            </div>
                        </div>
                        <div class="control" id="control-blur-range-id">
                            <label>Blur:</label>
                            <div class="range-container">
                                <input type="range" min="0" max="20" value="0" step="1" class="slider"
                                    id="blur-range-id">
                                <div class="range-skin-container">
                                    <div class="range-stub">
                                        <span class="range-bar range-bar-left range-stub-left"></span>
                                    </div>
                                    <div class="range-progress">
                                        <div class="range-progress-left">
                                            <span class="range-bar range-bar-left"></span>
                                            <span class="range-handle"></span>
                                            <output for="blur-range-id" class="range-tooltip"></output>
                                        </div>
                                        <div class="range-progress-right">
                                            <span class="range-bar range-bar-right"></span>
                                        </div>
                                    </div>
                                    <div class="range-stub">
                                        <span class="range-bar range-bar-right range-stub-right"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <hr />
                <section class="controls-section">
                    <h2>Output</h2>

                    <div class="controls-list">
                        <div class="control" id="control-result-download-id">
                            <div class="file-control download ">
                                <input type="button" id="result-download-id" class="file-input" />
                                <label class="file-control-button" for="result-download-id">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                                        <path d="M12 4L12 13 7 13 16 24 25 13 20 13 20 4ZM6 25L26 25 26 29 6 29Z" />
                                    </svg>
                                    <span>Download as SVG</span>
                                </label>
                            </div>
                        </div>
                        <div class="control" id="control-instructions-download-id">
                            <div class="file-control download ">
                                <input type="button" id="instructions-download-id" class="file-input" />
                                <label class="file-control-button" for="instructions-download-id">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                                        <path d="M12 4L12 13 7 13 16 24 25 13 20 13 20 4ZM6 25L26 25 26 29 6 29Z" />
                                    </svg>
                                    <span>Download instructions (beta)</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer>
        <div class="badge-shelf">
            <a class="badge" href="mailto:jeremie.piellard@gmail.com" title="Email">
                <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 512 512">
                    <path d="M512 85V448H0V85l256 224L512 85zM488 64H24L256 267 488 64z" />
                </svg>
            </a>

            <a class="badge" href="https://github.com/piellardj" title="GitHub">
                <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 1024 1024">
                    <path
                        d="M512 0C229 0 0 229 0 512c0 226 147 418 350 486 26 5 35-11 35-25 0-12 0-53-1-95C242 909 212 818 212 818c-23-59-57-75-57-75-47-32 4-31 4-31 51 4 78 53 78 53 46 78 120 56 149 43 5-33 18-56 33-68C305 725 185 682 185 485c0-56 20-102 53-137-5-13-23-65 5-136 0 0 43-14 141 53 41-11 85-17 128-17 44 0 87 6 128 17 98-66 141-52 141-52 28 71 10 123 5 136 33 36 53 81 53 137 0 197-120 240-234 253 18 16 35 47 35 95 0 68-1 124-1 141 0 14 9 30 35 25C877 930 1024 738 1024 512 1024 229 795 0 512 0z" />
                </svg>
            </a>

            <a class="badge" href="https://www.linkedin.com/in/jeremie-piellard/" title="LinkedIn">
                <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 512 512">
                    <path d="M30 177l93-1v304l-93 1v-304z" />
                    <path
                        d="M200 177l89-1v39l0 11c26-26 53-45 97-45 51 0 100 21 100 91v208l-90 1v-159c0-35-9-58-51-58-37 0-52 7-52 55v160l-92 1v-304z" />
                    <path d="M128 81c0 28-23 51-51 51s-51-23-51-51c0-28 23-51 51-51 28 0 51 23 51 51z" />
                </svg>
            </a>
        </div>
    </footer>
    <script type="text/javascript">
        var Page = Page || {};
        Object.defineProperty(Page, "version", {
            value: "2023-01-08T18%3A32%3A29.723Z",
            writable: false,
        });
    </script>
    <!-- <script src="script/page.min.js?v=2023-01-08T18%3A32%3A29.723Z"></script> -->
    <script>
        var Page; !function (e) { var r, o; function a(e) { return o.querySelector("span[id=error-message-" + e + "]") } r = e.Demopage || (e.Demopage = {}), e = "error-messages", (o = document.getElementById(e)) || console.error("Cannot find element '" + e + "'."), r.setErrorMessage = function (e, r) { var n; o && ((n = a(e)) ? n.innerHTML = r : ((n = document.createElement("span")).id = "error-message-" + e, n.innerText = r, o.appendChild(n), o.appendChild(document.createElement("br")))) }, r.removeErrorMessage = function (e) { var r; !o || (r = a(e)) && ((e = r.nextElementSibling) && o.removeChild(e), o.removeChild(r)) } }(Page = Page || {});
        var Page; !function (e) { var r, n, i; function l(e) { this.queryParameters = {}; var r = e.indexOf(l.queryDelimiter); if (r < 0) this.baseUrl = e; else { this.baseUrl = e.substring(0, r); for (var t = 0, a = e.substring(r + l.queryDelimiter.length).split(l.parameterDelimiter); t < a.length; t++) { var n, i = a[t], o = i.split(l.keyValueDelimiter); 2 === o.length ? (n = decodeURIComponent(o[0]), o = decodeURIComponent(o[1]), this.queryParameters[n] = o) : console.log("Unable to parse query string parameter '" + i + "'.") } } } function o() { for (var e = [], r = 0; r < arguments.length; r++)e[r] = arguments[r]; return e.join(":") + ":" } function s(e) { window.history.replaceState("", "", e) } r = e.Helpers || (e.Helpers = {}), e = r.URL || (r.URL = {}), n = "page", l.prototype.setQueryParameter = function (e, r) { null === r ? delete this.queryParameters[e] : this.queryParameters[e] = r }, l.prototype.loopOnParameters = function (e, r) { for (var t = 0, a = Object.keys(this.queryParameters); t < a.length; t++) { var n, i = a[t]; 0 === i.indexOf(e) && i.length > e.length && (n = this.queryParameters[i], r(i.substring(e.length), n)) } }, l.prototype.buildUrl = function () { for (var e = [], r = 0, t = Object.keys(this.queryParameters); r < t.length; r++) { var a = t[r], n = this.queryParameters[a], a = encodeURIComponent(a), n = encodeURIComponent(n); e.push(a + l.keyValueDelimiter + n) } var i = e.join(l.parameterDelimiter); return i ? this.baseUrl + l.queryDelimiter + i : this.baseUrl }, l.queryDelimiter = "?", l.parameterDelimiter = "&", l.keyValueDelimiter = "=", i = l, e.loopOnParameters = function (e, r) { var t = new i(window.location.href), e = o(n, e); t.loopOnParameters(e, r) }, e.setQueryParameter = function (e, r, t) { var a = new i(window.location.href), e = o(n, e); a.setQueryParameter(e + r, t), s(a.buildUrl()) }, e.removeQueryParameter = function (e, r) { var t = new i(window.location.href), e = o(n, e); t.setQueryParameter(e + r, null), s(t.buildUrl()) }, (r.Events || (r.Events = {})).callAfterDOMLoaded = function (e) { "loading" === document.readyState ? document.addEventListener("DOMContentLoaded", e) : e() } }(Page = Page || {});
        var Page; !function (e) { (e.Controls || (e.Controls = {})).setVisibility = function (e, n) { var o; (e = (o = "div#control-" + e, (e = document.querySelector(o)) || console.error("Cannot find control '" + o + "'."), e)) && (e.style.display = n ? "" : "none") } }(Page = Page || {}), function (e) { (e.Sections || (e.Sections = {})).setVisibility = function (e, n) { var o; o = "section#section-" + e, (e = document.querySelector(o)) || console.error("Cannot find section '" + o + "'."), e && (e.style.display = n ? "" : "none", function (e) { function n(e) { return "hr" === e.tagName.toLowerCase() } function o(e) { return "none" !== e.style.display } for (var t = e.querySelectorAll("section, hr"), i = !1, r = 0; r < t.length; r++)n(t[r]) ? (t[r].style.display = i ? "none" : "", i = !0) : o(t[r]) && (i = !1); for (r = 0; r < t.length; r++)if (n(t[r])) t[r].style.display = "none"; else if (o(t[r])) break; for (r = t.length - 1; 0 <= r; r--)if (n(t[r])) t[r].style.display = "none"; else if (o(t[r])) break }(e.parentElement)) } }(Page = Page || {});
        var Page; !function (e) { var n, r, t, l, o, i, a; function u(e) { var r = this; this.observers = [], this.inputElement = e.querySelector("input"), this.labelSpanElement = e.querySelector("label > span"), this.inputElement.addEventListener("change", function (e) { e.stopPropagation(); var n = r.inputElement.files; if (1 === n.length) { r.labelSpanElement.innerText = u.truncate(n[0].name); for (var t = 0, l = r.observers; t < l.length; t++)(0, l[t])(n) } }, !1) } n = e.FileControl || (e.FileControl = {}), u.prototype.clear = function () { this.inputElement.value = "", this.labelSpanElement.innerText = this.labelSpanElement.dataset.placeholder }, u.truncate = function (e) { return e.length > u.filenameMaxSize ? e.substring(0, u.filenameMaxSize - 1) + "..." + e.substring(e.length - (u.filenameMaxSize - 1)) : e }, u.filenameMaxSize = 16, r = u, a = function (e) { var l = this; this.observers = [], this.buttonElement = e.querySelector("input"), this.buttonElement.addEventListener("click", function (e) { e.stopPropagation(); for (var n = 0, t = l.observers; n < t.length; n++)(0, t[n])() }, !1) }, (l = t = t || {}).getFileUploadById = function (e) { return l.load(), o[e] || null }, l.getFileDownloadById = function (e) { return l.load(), i[e] || null }, l.load = function () { void 0 === o && (o = function () { for (var e = {}, n = document.querySelectorAll(".file-control.upload > input[id]"), t = 0; t < n.length; t++) { var l = n[t].parentElement; e[n[t].id] = new r(l) } return e }()), void 0 === i && (i = function () { for (var e = {}, n = document.querySelectorAll(".file-control.download > input[id]"), t = 0; t < n.length; t++) { var l = n[t].parentElement; e[n[t].id] = new a(l) } return e }()) }, e.Helpers.Events.callAfterDOMLoaded(function () { t.load() }), n.addDownloadObserver = function (e, n) { return !!(e = t.getFileDownloadById(e)) && (e.observers.push(n), !0) }, n.addUploadObserver = function (e, n) { return !!(e = t.getFileUploadById(e)) && (e.observers.push(n), !0) }, n.clearFileUpload = function (e) { t.getFileUploadById(e).clear() } }(Page = Page || {});
        var Page; !function (n) { var e, s, t, r, o, a, l, i; function u(e) { var t = this; this.observers = [], this.id = u.computeShortId(e.id), this.inputElements = []; for (var r = e.querySelectorAll("input"), a = 0; a < r.length; a++)this.inputElements.push(r[a]), r[a].addEventListener("change", function (e) { e.stopPropagation(), t.reloadValues(), o.storeState(t), t.callObservers() }, !1); this.reloadValues() } e = n.Tabs || (n.Tabs = {}), u.computeShortId = function (e) { if (e.lastIndexOf(u.ID_SUFFIX) != e.length - u.ID_SUFFIX.length) throw new Error("Invalid tabs container id: '" + e + "'."); return e.substring(0, e.length - u.ID_SUFFIX.length) }, Object.defineProperty(u.prototype, "values", { get: function () { return this._values }, set: function (e) { for (var t = 0, r = this.inputElements; t < r.length; t++) { for (var a = r[t], n = !1, s = 0, o = e; s < o.length; s++) { var l = o[s]; if (a.value === l) { n = !0; break } } a.checked = n } this.reloadValues() }, enumerable: !1, configurable: !0 }), u.prototype.callObservers = function () { for (var e = 0, t = this.observers; e < t.length; e++)(0, t[e])(this._values) }, u.prototype.reloadValues = function () { for (var e = [], t = 0, r = this.inputElements; t < r.length; t++) { var a = r[t]; a.checked && e.push(a.value) } this._values = e }, u.ID_SUFFIX = "-id", i = u, (t = s = s || {}).getTabsById = function (e) { return t.load(), r[e] || null }, t.load = function () { void 0 === r && (r = function () { for (var e = {}, t = document.querySelectorAll("div.tabs[id]"), r = 0; r < t.length; r++) { var a = new i(t[r]); e[a.id] = a } return e }()) }, a = o = o || {}, l = "tabs", a.storeState = function (e) { var t = e.values.join(";"); n.Helpers.URL.setQueryParameter(l, e.id, t) }, a.clearStoredState = function (e) { n.Helpers.URL.removeQueryParameter(l, e.id) }, a.applyStoredState = function () { n.Helpers.URL.loopOnParameters(l, function (e, t) { var r = t.split(";"), a = s.getTabsById(e); a ? (a.values = r, a.callObservers()) : (console.log("Removing invalid query parameter '" + e + "=" + t + "'."), n.Helpers.URL.removeQueryParameter(l, e)) }) }, n.Helpers.Events.callAfterDOMLoaded(function () { s.load(), o.applyStoredState() }), e.addObserver = function (e, t) { return !!(e = s.getTabsById(e)) && (e.observers.push(t), !0) }, e.getValues = function (e) { return s.getTabsById(e).values }, e.setValues = function (e, t, r) { void 0 === r && (r = !1), (e = s.getTabsById(e)).values = t, r && o.storeState(e) }, e.storeState = function (e) { e = s.getTabsById(e), o.storeState(e) }, e.clearStoredState = function (e) { e = s.getTabsById(e), o.clearStoredState(e) } }(Page = Page || {});
        var Page; !function (p) { !function (e) { var r, t, n, a, i, o, s = (Object.defineProperty(l.prototype, "value", { get: function () { return this._value }, set: function (e) { this.inputElement.value = "" + e, this.reloadValue() }, enumerable: !1, configurable: !0 }), l.prototype.callObservers = function () { this.callSpecificObservers(this.onInputObservers), this.callSpecificObservers(this.onChangeObservers) }, l.prototype.callSpecificObservers = function (e) { for (var t = 0, n = e; t < n.length; t++)(0, n[t])(this.value) }, l.prototype.updateAppearance = function () { var e = (+this.inputElement.value - +this.inputElement.min) / (+this.inputElement.max - +this.inputElement.min), e = Math.max(0, Math.min(1, e)); this.progressLeftElement.style.width = 100 * e + "%", e = this.nbDecimalsToDisplay < 0 ? this.inputElement.value : (+this.inputElement.value).toFixed(this.nbDecimalsToDisplay), this.tooltipElement.textContent = e }, l.prototype.reloadValue = function () { this._value = +this.inputElement.value, this.updateAppearance() }, l.getMaxNbDecimals = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; for (var n = -1, r = 0, a = e; r < a.length; r++) { var i = a[r], o = l.nbDecimals(i); if (i < 0) return -1; n < o && (n = o) } return n }, l.nbDecimals = function (e) { e = e.toString(); return /^[0-9]+$/.test(e) ? 0 : /^[0-9]+\.[0-9]+$/.test(e) ? e.length - (e.indexOf(".") + 1) : -1 }, l); function l(e) { var t = this; this.onInputObservers = [], this.onChangeObservers = [], this.inputElement = e.querySelector("input[type='range']"), this.progressLeftElement = e.querySelector(".range-progress-left"), this.tooltipElement = e.querySelector("output.range-tooltip"), this.id = this.inputElement.id; var n = +this.inputElement.min, r = +this.inputElement.max, e = +this.inputElement.step; this.nbDecimalsToDisplay = l.getMaxNbDecimals(n, r, e), this.inputElement.addEventListener("input", function (e) { e.stopPropagation(), t.reloadValue(), t.callSpecificObservers(t.onInputObservers) }), this.inputElement.addEventListener("change", function (e) { e.stopPropagation(), t.reloadValue(), a.storeState(t), t.callSpecificObservers(t.onChangeObservers) }), this.reloadValue() } (t = r = r || {}).getRangeById = function (e) { return t.load(), n[e] || null }, t.load = function () { void 0 === n && (n = function () { for (var e = {}, t = document.querySelectorAll(".range-container > input[type='range']"), n = 0; n < t.length; n++) { var r = t[n].parentElement; e[t[n].id] = new s(r) } return e }()) }, i = a = a || {}, o = "range", i.storeState = function (e) { var t = "" + e.value; p.Helpers.URL.setQueryParameter(o, e.id, t) }, i.clearStoredState = function (e) { p.Helpers.URL.removeQueryParameter(o, e.id) }, i.applyStoredState = function () { p.Helpers.URL.loopOnParameters(o, function (e, t) { var n = r.getRangeById(e); n ? (n.value = +t, n.callObservers()) : (console.log("Removing invalid query parameter '" + e + "=" + t + "'."), p.Helpers.URL.removeQueryParameter(o, e)) }) }, p.Helpers.Events.callAfterDOMLoaded(function () { r.load(), a.applyStoredState() }); var u = !!window.MSInputMethodContext && !!document.documentMode; e.addObserver = function (e, t) { return !!(e = r.getRangeById(e)) && ((u ? e.onChangeObservers : e.onInputObservers).push(t), !0) }, e.addLazyObserver = function (e, t) { return !!(e = r.getRangeById(e)) && (e.onChangeObservers.push(t), !0) }, e.getValue = function (e) { return (e = r.getRangeById(e)) ? e.value : null }, e.setValue = function (e, t) { (e = r.getRangeById(e)) && (e.value = t) }, e.storeState = function (e) { e = r.getRangeById(e), a.storeState(e) }, e.clearStoredState = function (e) { e = r.getRangeById(e), a.clearStoredState(e) } }(p.Range || (p.Range = {})) }(Page = Page || {});
        var Page; !function (o) { var e, c, t, r, n, a, i, d, l, s; function h(e) { var t = this; this.observers = [], this.id = e.id, this.element = e, this.reloadValue(), this.element.addEventListener("change", function () { t.reloadValue(), n.storeState(t), t.callObservers() }) } e = o.Checkbox || (o.Checkbox = {}), Object.defineProperty(h.prototype, "checked", { get: function () { return this._checked }, set: function (e) { this.element.checked = e, this.reloadValue() }, enumerable: !1, configurable: !0 }), h.prototype.callObservers = function () { for (var e = 0, t = this.observers; e < t.length; e++)(0, t[e])(this.checked) }, h.prototype.reloadValue = function () { this._checked = this.element.checked }, s = h, (t = c = c || {}).getCheckboxById = function (e) { return t.load(), r[e] || null }, t.load = function () { void 0 === r && (r = function () { for (var e = {}, t = document.querySelectorAll("div.checkbox > input[type=checkbox][id]"), r = 0; r < t.length; r++) { var o = new s(t[r]); e[o.id] = o } return e }()) }, a = n = n || {}, i = "checkbox", d = "true", l = "false", a.storeState = function (e) { var t = e.checked ? d : l; o.Helpers.URL.setQueryParameter(i, e.id, t) }, a.clearStoredState = function (e) { o.Helpers.URL.removeQueryParameter(i, e.id) }, a.applyStoredState = function () { o.Helpers.URL.loopOnParameters(i, function (e, t) { var r = c.getCheckboxById(e); !r || t !== d && t !== l ? (console.log("Removing invalid query parameter '" + e + "=" + t + "'."), o.Helpers.URL.removeQueryParameter(i, e)) : (r.checked = t === d, r.callObservers()) }) }, o.Helpers.Events.callAfterDOMLoaded(function () { c.load(), n.applyStoredState() }), e.addObserver = function (e, t) { return !!(e = c.getCheckboxById(e)) && (e.observers.push(t), !0) }, e.setChecked = function (e, t) { (e = c.getCheckboxById(e)) && (e.checked = t) }, e.isChecked = function (e) { return !!(e = c.getCheckboxById(e)) && e.checked }, e.storeState = function (e) { e = c.getCheckboxById(e), n.storeState(e) }, e.clearStoredState = function (e) { e = c.getCheckboxById(e), n.clearStoredState(e) } }(Page = Page || {});

        var Page; !function (J) { !function (n) { function t(e) { var n = document.querySelector(e); return n || console.error("Cannot find element '" + e + "'."), n } function e(e) { return t("input[type=checkbox][id=" + e + "]") } var o = document.getElementById("canvas-container"), i = t("canvas[id=canvas]"), c = document.getElementById("canvas-buttons-column"), r = e("fullscreen-checkbox-id"), a = e("side-pane-checkbox-id"), u = o.querySelector(".loader"), s = 512, l = 512; function d(e) { document.body.style.overflow = e ? "hidden" : "auto" } function f() { var e = i.getBoundingClientRect(); return [Math.floor(e.width), Math.floor(e.height)] } r && (J.Helpers.Events.callAfterDOMLoaded(function () { d(r.checked), r.addEventListener("change", function () { d(r.checked) }) }), a && r.addEventListener("change", function () { r.checked && (a.checked = !1) }, !1)); var h = [0, 0], v = []; function g(e) { return e + "px" } function m() { o.style.width = "100vw"; var e = f(); if (r.checked ? (o.style.height = "100%", o.style.maxWidth = "", o.style.maxHeight = "") : (e[1] = e[0] * l / s, o.style.height = g(e[1]), o.style.maxWidth = g(s), o.style.maxHeight = g(l)), e[0] !== h[0] || e[1] !== h[1]) { h = f(); for (var n = 0, t = v; n < t.length; n++)(0, t[n])(h[0], h[1]) } } J.Helpers.Events.callAfterDOMLoaded(m), r.addEventListener("change", m, !1), window.addEventListener("resize", m, !1); var p, y, E, w, L, k, M, C, b, S, Y, x, X, D, P, I, R = [m], T = [], H = [], U = [], z = [], q = [], B = [], O = []; function A(e, n) { var t = i.getBoundingClientRect(); return [(e - t.left) / t.width, (n - t.top) / t.height] } function F(e, n) { y[0] = e, y[1] = n } function Q(e, n) { n = A(e, n); F(n[0], n[1]), w = !0; for (var t = 0, o = T; t < o.length; t++)(0, o[t])() } function W() { if (w) { w = !1; for (var e = 0, n = H; e < n.length; e++)(0, n[e])() } } function V(e, n) { var t = A(E[0] = e, E[1] = n), o = t[0] - y[0], i = t[1] - y[1]; if (y[0] = t[0], y[1] = t[1], w) for (var c = 0, r = U; c < r.length; c++)(0, r[c])(o, i); for (var a = 0, u = z; a < u.length; a++)(0, u[a])(t[0], t[1]) } function j(e, n) { var t = e.clientX - n.clientX, n = e.clientY - n.clientY; return Math.sqrt(t * t + n * n) } function G(e, n) { J.Helpers.URL.setQueryParameter(x, e, n ? P : I) } r && r.addEventListener("change", function () { for (var e = r.checked, n = 0, t = R; n < t.length; n++)(0, t[n])(e) }, !1), document.addEventListener("keydown", function (e) { 27 === e.keyCode && n.toggleFullscreen(!1) }), Y = p = p || {}, y = [0, 0], w = !(E = [0, 0]), Y.getMousePosition = function () { return [y[0], y[1]] }, Y.setMousePosition = F, Y.isMouseDown = function () { return w }, Y.mouseDown = Q, Y.mouseUp = W, Y.mouseMove = V, i && (i.addEventListener("mousedown", function (e) { 0 === e.button && Q(e.clientX, e.clientY) }, !1), i.addEventListener("mouseenter", function () { for (var e = 0, n = q; e < n.length; e++)(0, n[e])() }, !1), i.addEventListener("mouseleave", function () { for (var e = 0, n = B; e < n.length; e++)(0, n[e])() }, !1), i.addEventListener("wheel", function (e) { if (0 < O.length) { for (var n = 0 < e.deltaY ? 1 : -1, t = 0, o = O; t < o.length; t++)(0, o[t])(n, y); return e.preventDefault(), !1 } return !0 }, !1), window.addEventListener("mousemove", function (e) { V(e.clientX, e.clientY) }), window.addEventListener("mouseup", function (e) { 0 === e.button && W() }), v.push(function () { V(E[0], E[1]) })), L = [], k = 0, i && (i.addEventListener("touchstart", function (e) { for (var n = 0 === L.length, t = 0; t < e.changedTouches.length; ++t) { for (var o = e.changedTouches[t], i = !1, c = 0, r = L; c < r.length; c++) { var a = r[c]; if (o.identifier === a.id) { i = !0; break } } i || L.push({ id: o.identifier, clientX: o.clientX, clientY: o.clientY }) } n && 0 < L.length ? (n = L[0], p.mouseDown(n.clientX, n.clientY)) : 2 === L.length && (k = j(L[0], L[1])) }, !1), window.addEventListener("touchend", function (e) { for (var n, t = 0 < L.length, o = 0; o < e.changedTouches.length; ++o)for (var i = e.changedTouches[o], c = 0; c < L.length; ++c)i.identifier === L[c].id && (L.splice(c, 1), c--); 1 === L.length ? (n = A(L[0].clientX, L[0].clientY), p.setMousePosition(n[0], n[1])) : t && 0 === L.length && p.mouseUp() }), window.addEventListener("touchmove", function (e) { for (var n = e.changedTouches, t = 0; t < n.length; ++t)for (var o = n[t], i = 0, c = L; i < c.length; i++) { var r = c[i]; o.identifier === r.id && (r.clientX = o.clientX, r.clientY = o.clientY) } var a = z.length + U.length; if (p.isMouseDown() && 0 < a && e.preventDefault(), 1 === L.length) p.mouseMove(L[0].clientX, L[0].clientY); else if (2 === L.length) { var e = j(L[0], L[1]), u = (k - e) / k; k = e; for (var s = A(.5 * (L[0].clientX + L[1].clientX), .5 * (L[0].clientY + L[1].clientY)), l = 0, d = O; l < d.length; l++)(0, d[l])(5 * u, s) } }, { passive: !1 })), Y = M = M || {}, C = {}, b = "-indicator-id", Y.getIndicator = function (e) { return t("#" + e + b) }, Y.getIndicatorSpan = function (e) { return C[e] || (C[e] = t("#" + (e + b) + " span")), C[e] }, Y = S = S || {}, x = "canvas", X = "fullscreen", D = "sidepane", P = "true", I = "false", Y.attachStorageEvents = function () { r && r.addEventListener("change", function () { G(X, r.checked), J.Helpers.URL.removeQueryParameter(x, D) }), a && a.addEventListener("change", function () { G(D, a.checked) }) }, Y.applyStoredState = function () { J.Helpers.URL.loopOnParameters(x, function (e, n) { e !== X || n !== P && n !== I ? e !== D || n !== P && n !== I ? (console.log("Removing invalid query parameter '" + e + "=" + n + "'."), J.Helpers.URL.removeQueryParameter(x, e)) : a && (a.checked = n === P) : r && (r.checked = n === P) }) }, S.applyStoredState(), S.attachStorageEvents(), n.Observers = Object.freeze({ canvasResize: v, fullscreenToggle: R, mouseDown: T, mouseDrag: U, mouseEnter: q, mouseLeave: B, mouseMove: z, mouseWheel: O, mouseUp: H }), n.getAspectRatio = function () { var e = f(); return e[0] / e[1] }, n.getCanvas = function () { return i }, n.getCanvasContainer = function () { return o }, n.getSize = f, n.getMousePosition = function () { return p.getMousePosition() }, n.isFullScreen = function () { return r && r.checked }, n.isMouseDown = function () { return p.isMouseDown() }, n.setIndicatorText = function (e, n) { (e = M.getIndicatorSpan(e)) && (e.innerText = n) }, n.setIndicatorVisibility = function (e, n) { (e = M.getIndicator(e)) && (e.style.display = n ? "" : "none") }, n.setIndicatorsVisibility = function (e) { document.getElementById("indicators").style.display = e ? "" : "none" }, n.setMaxSize = function (e, n) { s = e, l = n, m() }, n.setResizable = function (e) { c.style.display = e ? "" : "none" }, n.setLoaderText = function (e) { u && (u.querySelector("span").innerText = e) }, n.showLoader = function (e) { u && (u.style.display = e ? "block" : "") }, n.toggleFullscreen = function (e) { r && e !== r.checked && (r.checked = e, "function" == typeof window.CustomEvent ? r.dispatchEvent(new CustomEvent("change")) : "function" == typeof CustomEvent.prototype.initCustomEvent && ((e = document.createEvent("CustomEvent")).initCustomEvent("change", !1, !1, void 0), r.dispatchEvent(e))) } }(J.Canvas || (J.Canvas = {})) }(Page = Page || {});
        Page.Canvas.setMaxSize(512, 512);
    </script>

    <!-- <script src="script/app-bundle.js"></script> -->
    <script>
        var img = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAIAQMAAAD+wSzIAAAABlBMVEX///+/v7+jQ3Y5AAAADklEQVQI12P4AIX8EAgALgAD/aNpbtEAAAAASUVORK5CYII'
        !function () { "use strict"; var e = { 747: function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.getQueryStringValue = t.downloadTextFile = t.declarePolyfills = void 0, t.downloadTextFile = function (e, t) { var n = "text/plain", r = new Blob([e], { type: n }); if (void 0 !== window.navigator && void 0 !== window.navigator.msSaveBlob) window.navigator.msSaveBlob(r, t); else { var a = URL.createObjectURL(r), i = document.createElement("a"); i.download = t, i.href = a, i.dataset.downloadurl = "".concat(n, ":").concat(i.download, ":").concat(i.href), i.style.display = "none", document.body.appendChild(i), i.click(), document.body.removeChild(i), setTimeout((function () { URL.revokeObjectURL(a) }), 5e3) } }, t.getQueryStringValue = function (e) { var t = window.location.href, n = t.indexOf("?"); if (n >= 0) { var r = t.substring(n + 1); if (r.length > 0) for (var a = 0, i = r.split("&"); a < i.length; a++) { var o = i[a].split("="); if (2 === o.length && decodeURIComponent(o[0]) === e) return decodeURIComponent(o[1]) } } return null }, t.declarePolyfills = function () { "function" != typeof Array.prototype.includes && (console.log("Declaring Array.includes polyfill..."), Object.defineProperty(Array.prototype, "includes", { value: function (e) { return this.indexOf(e) >= 0 } })), "function" != typeof String.prototype.repeat && (console.log("Declaring String.repeat polyfill..."), Object.defineProperty(String.prototype, "repeat", { value: function (e) { if (e < 0 || e === 1 / 0) throw new RangeError; for (var t = "", n = 0; n < e; n++)t += this; return t } })) } }, 633: function (e, t, n) { var r = this && this.__createBinding || (Object.create ? function (e, t, n, r) { void 0 === r && (r = n), Object.defineProperty(e, r, { enumerable: !0, get: function () { return t[n] } }) } : function (e, t, n, r) { void 0 === r && (r = n), e[r] = t[n] }), a = this && this.__setModuleDefault || (Object.create ? function (e, t) { Object.defineProperty(e, "default", { enumerable: !0, value: t }) } : function (e, t) { e.default = t }), i = this && this.__importStar || function (e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var n in e) "default" !== n && Object.prototype.hasOwnProperty.call(e, n) && r(t, e, n); return a(t, e), t }; Object.defineProperty(t, "__esModule", { value: !0 }); var o = i(n(747)), s = n(61), h = n(886), c = n(174), d = n(204), l = n(607); n(457), o.declarePolyfills(), function () { var e = new h.PlotterCanvas2D, t = null, n = null, r = !0; function a() { r && (n.reset(s.Parameters.linesOpacity, s.Parameters.linesThickness), t.reset(), r = !1), n.computeNextSegments(20) && s.Parameters.showIndicators && n.updateIndicators(Page.Canvas.setIndicatorText), t.plot(), s.Parameters.debug && n.drawDebugView(e.context), requestAnimationFrame(a) } function i(t) { e.blur = t } function u(a) { Page.Canvas.showLoader(!1), n = new d.ThreadComputer(a), t = new l.ThreadPlotter(e, n), r = !0 } s.Parameters.addRedrawObserver((function () { null == t || t.reset() })), s.Parameters.addResetObserver((function () { r = !0 })), s.Parameters.addBlurChangeObserver(i), i(s.Parameters.blur), s.Parameters.addFileUploadObserver(u), Page.Canvas.showLoader(!0); var p = new Image; p.addEventListener("load", (function () { u(p), requestAnimationFrame(a) })), p.src = img, s.Parameters.addDownloadObserver((function () { var e = new c.PlotterSVG; new l.ThreadPlotter(e, n).plot(); var t = e.export(); o.downloadTextFile(t, "image-as-threading.svg") })), s.Parameters.addDownloadInstructionsObserver((function () { e.getSegment(); var t = n.instructions; o.downloadTextFile(t, "image-as-threading_instructions.txt") })) }() }, 457: function () { }, 61: function (e, t, n) { var r = this && this.__createBinding || (Object.create ? function (e, t, n, r) { void 0 === r && (r = n), Object.defineProperty(e, r, { enumerable: !0, get: function () { return t[n] } }) } : function (e, t, n, r) { void 0 === r && (r = n), e[r] = t[n] }), a = this && this.__setModuleDefault || (Object.create ? function (e, t) { Object.defineProperty(e, "default", { enumerable: !0, value: t }) } : function (e, t) { e.default = t }), i = this && this.__importStar || function (e) { if (e && e.__esModule) return e; var t = {}; if (null != e) for (var n in e) "default" !== n && Object.prototype.hasOwnProperty.call(e, n) && r(t, e, n); return a(t, e), t }; Object.defineProperty(t, "__esModule", { value: !0 }), t.EShape = t.EMode = t.Parameters = void 0; var o = i(n(747)); n(457); var s, h, c = "shape-tabs-id", d = "pegs-range-id", l = "quality-tabs-id", u = "thread-mode-tabs-id", p = "opacity-range-id", g = "thickness-range-id", f = "display-pegs-checkbox-id", v = "invert-colors-checkbox-id", m = "show-indicators-checkbox-id", y = "blur-range-id"; !function (e) { e.RECTANGLE = "0", e.ELLIPSIS = "1" }(s || (s = {})), t.EShape = s, function (e) { e.MONOCHROME = "0", e.COLORS = "1" }(h || (h = {})), t.EMode = h; var b = []; function C() { for (var e = 0, t = b; e < t.length; e++)(0, t[e])() } var P = []; function w() { for (var e = 0, t = P; e < t.length; e++)(0, t[e])() } Page.Tabs.addObserver(c, w), Page.Range.addLazyObserver(d, w), Page.Tabs.addObserver(l, w), Page.Tabs.addObserver(u, w), Page.Range.addLazyObserver(p, w), Page.Range.addLazyObserver(g, w), Page.Checkbox.addObserver(f, C), Page.Checkbox.addObserver(v, w), Page.Canvas.Observers.canvasResize.push(C); var x = "1" === o.getQueryStringValue("debug"); function O() { var e = Page.Checkbox.isChecked(m); Page.Canvas.setIndicatorsVisibility(e) } Page.Canvas.setIndicatorVisibility("error-average", x), Page.Canvas.setIndicatorVisibility("error-mean-square", x), Page.Canvas.setIndicatorVisibility("error-variance", x), Page.Checkbox.addObserver(m, O), O(); var T = function () { function e() { } return e.addFileUploadObserver = function (e) { Page.FileControl.addUploadObserver("input-image-upload-button", (function (t) { if (1 === t.length) { Page.Canvas.showLoader(!0); var n = new FileReader; n.onload = function () { var t = new Image; t.addEventListener("load", (function () { e(t) })), t.src = n.result }, n.readAsDataURL(t[0]) } })) }, Object.defineProperty(e, "debug", { get: function () { return x }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "shape", { get: function () { return Page.Tabs.getValues(c)[0] }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "pegsCount", { get: function () { return Page.Range.getValue(d) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "quality", { get: function () { return +Page.Tabs.getValues(l)[0] }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "mode", { get: function () { return Page.Tabs.getValues(u)[0] }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "nbLines", { get: function () { return Page.Range.getValue("lines-range-id") }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "linesOpacity", { get: function () { var e = Page.Range.getValue(p); return Math.pow(2, e - 7) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "linesThickness", { get: function () { return Page.Range.getValue(g) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "displayPegs", { get: function () { return Page.Checkbox.isChecked(f) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "invertColors", { get: function () { return Page.Checkbox.isChecked(v) }, enumerable: !1, configurable: !0 }), Object.defineProperty(e, "showIndicators", { get: function () { return Page.Checkbox.isChecked(m) }, enumerable: !1, configurable: !0 }), e.addRedrawObserver = function (e) { b.push(e) }, e.addResetObserver = function (e) { P.push(e) }, Object.defineProperty(e, "blur", { get: function () { return Page.Range.getValue(y) }, enumerable: !1, configurable: !0 }), e.addBlurChangeObserver = function (e) { Page.Range.addObserver(y, e) }, e.addDownloadObserver = function (e) { Page.FileControl.addDownloadObserver("result-download-id", e) }, e.addDownloadInstructionsObserver = function (e) { Page.FileControl.addDownloadObserver("instructions-download-id", e) }, e }(); function S() { } t.Parameters = T, Page.Tabs.addObserver(u, S), Page.Checkbox.addObserver(v, S) }, 781: function (e, t, n) { var r, a; Object.defineProperty(t, "__esModule", { value: !0 }), t.useAdvancedCompositing = t.resetCanvasCompositing = t.computeRawColor = t.applyCanvasCompositing = t.ECompositingOperation = t.EColor = void 0, n(457), function (e) { e[e.DARKEN = 0] = "DARKEN", e[e.LIGHTEN = 1] = "LIGHTEN" }(r || (r = {})), t.ECompositingOperation = r, function (e) { e[e.MONOCHROME = 0] = "MONOCHROME", e[e.RED = 1] = "RED", e[e.GREEN = 2] = "GREEN", e[e.BLUE = 3] = "BLUE" }(a || (a = {})), t.EColor = a; var i = !0; function o(e) { return e === a.MONOCHROME ? { r: 1, g: 1, b: 1 } : { r: e === a.RED ? 1 : 0, g: e === a.GREEN ? 1 : 0, b: e === a.BLUE ? 1 : 0 } } function s(e) { e.globalCompositeOperation = "source-over" } t.useAdvancedCompositing = function () { return i }, t.computeRawColor = o, t.applyCanvasCompositing = function (e, t, n, a) { var h = o(t); if (i) { var c = a === r.LIGHTEN ? "lighter" : "difference"; if (e.globalCompositeOperation = c, e.globalCompositeOperation === c) { var d = Math.ceil(255 * n); return void (e.strokeStyle = "rgb(".concat(h.r * d, ", ").concat(h.g * d, ", ").concat(h.b * d, ")")) } i = !1, Page.Demopage.setErrorMessage("advanced-compositing-not-supported", "Your browser does not support canvas2D compositing '".concat(c, "'. The project will not run as expected.")) } s(e), a === r.DARKEN && (h.r = 1 - h.r, h.g = 1 - h.g, h.b = 1 - h.b), e.strokeStyle = "rgba(".concat(255 * h.r, ", ").concat(255 * h.g, ", ").concat(255 * h.b, ", ").concat(n, ")") }, t.resetCanvasCompositing = s }, 792: function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.PlotterBase = void 0; var n = function () { function e() { } return e.prototype.drawBrokenLine = function (e, t, n, r, a) { for (var i = [], o = 0; o < e.length - 1; o++)i.push({ from: e[o], to: e[o + 1] }); this.drawLines(i, t, n, r, a) }, e }(); t.PlotterBase = n }, 886: function (e, t, n) { var r, a = this && this.__extends || (r = function (e, t) { return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]) }, r(e, t) }, function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null"); function n() { this.constructor = e } r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) }); Object.defineProperty(t, "__esModule", { value: !0 }), t.PlotterCanvas2D = void 0; var i = n(781), o = n(792); n(457); var s = function (e) { function t() { var t, n = e.call(this) || this; return n.segmentLines = [], n.segPoints = [], n.canvas = Page.Canvas.getCanvas(), n.context = n.canvas.getContext("2d", { alpha: !1 }), n.cssPixel = null !== (t = window.devicePixelRatio) && void 0 !== t ? t : 1, n } return a(t, e), t.prototype.resize = function () { var e = Math.floor(this.cssPixel * this.canvas.clientWidth), t = Math.floor(this.cssPixel * this.canvas.clientHeight); this.canvas.width === e && this.canvas.height === t || (this.canvas.width = e, this.canvas.height = t) }, t.prototype.initialize = function (e) { this.context.fillStyle = e.backgroundColor, this.context.lineJoin = "round", (0, i.resetCanvasCompositing)(this.context), this.context.fillRect(0, 0, this.canvas.width, this.canvas.height) }, t.prototype.finalize = function () { }, Object.defineProperty(t.prototype, "blur", { set: function (e) { 0 === e ? this.canvas.style.filter = "" : (this.canvas.style.filter = "blur(".concat(e, "px)"), this.canvas.style.filter = "url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='a' x='0' y='0' width='1' height='1'%3E%3CfeGaussianBlur stdDeviation='".concat(e, "' result='b'/%3E%3CfeMorphology operator='dilate' radius='").concat(e, "'/%3E %3CfeMerge%3E%3CfeMergeNode/%3E%3CfeMergeNode in='b'/%3E%3C/feMerge%3E%3C/filter%3E%3C/svg%3E#a\")")) }, enumerable: !1, configurable: !0 }), t.prototype.drawLines = function (e, t, n, r, a) { if (e.length >= 1) { (0, i.applyCanvasCompositing)(this.context, t, n, r), this.context.lineWidth = a * this.cssPixel; for (var o = 0, s = e; o < s.length; o++) { var h = s[o]; this.segmentLines[this.segmentLines.length] = { from: h.from, to: h.to, colorName: t + "" }, this.context.beginPath(), this.context.moveTo(h.from.x * this.cssPixel, h.from.y * this.cssPixel), this.context.lineTo(h.to.x * this.cssPixel, h.to.y * this.cssPixel), this.context.stroke(), this.context.closePath() } (0, i.resetCanvasCompositing)(this.context) } }, t.prototype.drawPoints = function (e, t, n) { if (e.length > 0) { this.context.fillStyle = t, this.context.strokeStyle = "none"; for (var r = 0, a = e; r < a.length; r++) { var i = a[r]; this.segPoints[this.segPoints.length] = { x: i.x, y: i.y, name: "Nail -" + this.segPoints.length }, this.context.beginPath(), this.context.arc(i.x * this.cssPixel, i.y * this.cssPixel, .5 * n * this.cssPixel, 0, 2 * Math.PI), this.context.fill(), this.context.closePath() } } }, Object.defineProperty(t.prototype, "size", { get: function () { return { width: Math.floor(this.canvas.width / this.cssPixel), height: Math.floor(this.canvas.height / this.cssPixel) } }, enumerable: !1, configurable: !0 }), t.prototype.getSegment = function () { for (var e = [], t = [], n = 0; n < this.segmentLines.length; n++) { for (var r = 0; r < this.segPoints.length; r++)this.segmentLines[n].from.x == this.segPoints[r].x && this.segmentLines[n].from.y == this.segPoints[r].y && (e[n] = this.segPoints[r]), this.segmentLines[n].to.x == this.segPoints[r].x && this.segmentLines[n].to.y == this.segPoints[r].y && (t[n] = this.segPoints[r]); console.log(this.segmentLines[n].colorName + e[n].name + " to " + t[n].name) } }, t }(o.PlotterBase); t.PlotterCanvas2D = s }, 174: function (e, t, n) { var r, a = this && this.__extends || (r = function (e, t) { return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]) }, r(e, t) }, function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null"); function n() { this.constructor = e } r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) }); Object.defineProperty(t, "__esModule", { value: !0 }), t.PlotterSVG = void 0; var i = n(781), o = n(792), s = n(567), h = "gaussianBlur", c = function (e) { function t() { return e.call(this) || this } return a(t, e), t.prototype.resize = function () { }, t.prototype.initialize = function (e) { this.writer = new s.XMLWriter, this.hasBlur = e.blur > 0, this.writer.addLine('<?xml version="1.0" encoding="UTF-8" standalone="no"?>'), this.writer.startBlock('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '.concat(1e3, " ").concat(1e3, '">')), this.hasBlur && (this.writer.startBlock("<defs>"), this.writer.startBlock('<filter id="'.concat(h, '" x="0" y="0">')), this.writer.addLine('<feGaussianBlur in="SourceGraphic" stdDeviation="'.concat(e.blur, '"/>')), this.writer.endBlock("</filter>"), this.writer.endBlock("</defs>"), this.writer.startBlock('<g filter="url(#'.concat(h, ')">'))), this.writer.addLine('<rect fill="white" stroke="none" x="'.concat(-10, '" y="').concat(-10, '" width="').concat(1020, '" height="').concat(1020, '"/>')) }, t.prototype.finalize = function () { this.hasBlur && this.writer.endBlock("</g>"), this.writer.endBlock("</svg>") }, t.prototype.drawLines = function (e, t, n, r, a) { if (e.length >= 1) { var o = void 0; if ((0, i.useAdvancedCompositing)()) { this.writer.startBlock("<defs>"), this.writer.startBlock('<style type="text/css">'), this.writer.startBlock("<![CDATA["), this.writer.addLine("line { mix-blend-mode: difference; }"), r === i.ECompositingOperation.LIGHTEN && this.writer.addLine("svg { filter: invert(1); background: black; }"), this.writer.endBlock("]]>"), this.writer.endBlock("</style>"), this.writer.endBlock("</defs>"); var s = Math.ceil(255 * n), h = (0, i.computeRawColor)(t); o = "rgb(".concat(h.r * s, ", ").concat(h.g * s, ", ").concat(h.b * s, ")") } else s = (0, i.useAdvancedCompositing)() ? 255 : 0, h = (0, i.computeRawColor)(t), o = "rgba(".concat(h.r * s, ", ").concat(h.g * s, ", ").concat(h.b * s, ", ").concat(n, ")"); this.writer.startBlock('<g stroke="'.concat(o, '" stroke-width="').concat(a, '" stroke-linecap="round" fill="none">')); for (var c = 0, d = e; c < d.length; c++) { var l = d[c]; this.writer.addLine('<line x1="'.concat(l.from.x.toFixed(1), '" y1="').concat(l.from.y.toFixed(1), '" x2="').concat(l.to.x.toFixed(1), '" y2="').concat(l.to.y.toFixed(1), '"/>')) } this.writer.endBlock("</g>") } }, t.prototype.drawPoints = function (e, t, n) { if (e.length > 0) { this.writer.startBlock('<g fill="'.concat(t, '" stroke="none">')); for (var r = 0, a = e; r < a.length; r++) { var i = a[r]; this.writer.addLine('<circle cx="'.concat(i.x.toFixed(1), '" cy="').concat(i.y.toFixed(1), '" r="').concat(.5 * n, '"/>')) } this.writer.endBlock("</g>") } }, t.prototype.export = function () { var e = Date.now(), t = this.writer.result; return console.log("Concatenation took ".concat(Date.now() - e, " ms.")), t }, Object.defineProperty(t.prototype, "size", { get: function () { return { width: 1e3, height: 1e3 } }, enumerable: !1, configurable: !0 }), t }(o.PlotterBase); t.PlotterSVG = c }, 567: function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.XMLWriter = void 0; var n = function () { function e() { this.indentationLevel = 0, this.lines = [] } return Object.defineProperty(e.prototype, "result", { get: function () { return this.lines.join("\n") }, enumerable: !1, configurable: !0 }), e.prototype.startBlock = function (e) { this.addLine(e), this.indentationLevel++ }, e.prototype.endBlock = function (e) { this.indentationLevel--, this.addLine(e) }, e.prototype.addLine = function (e) { this.lines.push(this.prefix + e) }, Object.defineProperty(e.prototype, "prefix", { get: function () { return "\t".repeat(this.indentationLevel) }, enumerable: !1, configurable: !0 }), e }(); t.XMLWriter = n }, 204: function (e, t, n) { Object.defineProperty(t, "__esModule", { value: !0 }), t.ThreadComputer = void 0; var r = n(61), a = n(506), i = n(781), o = n(68), s = n(64), h = -9007199254740991, c = 2 * Math.PI; function d(e, t, n) { return e < t ? t : e > n ? n : e } function l(e, t, n) { return e * (1 - n) + t * n } function u(e) { return 0 === e.length ? null : e[Math.floor(Math.random() * e.length)] } var p = function () { function e(e) { this.hiddenCanvasData = null, this.sourceImage = e, this.hiddenCanvas = document.createElement("canvas"), this.hiddenCanvasContext = this.hiddenCanvas.getContext("2d"), this.reset(.0625, 1) } return Object.defineProperty(e.prototype, "pegsArray", { get: function () { return this.pegs }, enumerable: !1, configurable: !0 }), e.prototype.drawThread = function (e, t) { var n = this, a = this.computeTransformation(e.size), o = a.scaling * this.hiddenCanvasScale * this.lineThickness, s = r.Parameters.invertColors ? i.ECompositingOperation.LIGHTEN : i.ECompositingOperation.DARKEN; this.thread.iterateOnThreads(t, (function (t, r) { for (var i = [], h = 0, c = t; h < c.length; h++) { var d = c[h], l = a.transform(d); i.push(l) } e.drawBrokenLine(i, r, n.lineOpacity, s, o) })) }, e.prototype.drawPegs = function (e) { for (var t = this.computeTransformation(e.size), n = t.scaling * this.hiddenCanvasScale * .5, r = [], a = 0, i = this.pegs; a < i.length; a++) { var o = i[a], s = t.transform(o); r.push(s) } e.drawPoints(r, "red", n) }, e.prototype.drawDebugView = function (e) { e.drawImage(this.hiddenCanvas, 0, 0, this.hiddenCanvas.width, this.hiddenCanvas.height) }, e.prototype.computeNextSegments = function (e) { var t = this, n = performance.now(), a = r.Parameters.nbLines; if (this.nbSegments === a) return !1; if (this.nbSegments > a) return this.thread.lowerNbSegments(a), this.resetHiddenCanvas(), this.thread.iterateOnThreads(0, (function (e, n) { (0, i.applyCanvasCompositing)(t.hiddenCanvasContext, n, t.lineOpacityInternal, i.ECompositingOperation.LIGHTEN); for (var r = 0; r + 1 < e.length; r++)t.drawSegmentOnHiddenCanvas(e[r], e[r + 1]) })), this.computeError(), !0; for (var o = null; this.nbSegments < a && performance.now() - n < e;) { var s = this.thread.getThreadToGrow(); o !== s.color && ((0, i.applyCanvasCompositing)(this.hiddenCanvasContext, s.color, this.lineOpacityInternal, i.ECompositingOperation.LIGHTEN), this.thread.enableSamplingFor(s.color), o = s.color), this.computeSegment(s.thread), this.nbSegments % 100 == 0 && this.computeError() } return !0 }, e.prototype.reset = function (e, t) { this.lineOpacity = e, this.lineThickness = t, this.hiddenCanvasScale = r.Parameters.quality, r.Parameters.mode === r.EMode.MONOCHROME ? this.thread = new o.ThreadMonochrome : this.thread = new s.ThreadRedBlueGreen, this.resetHiddenCanvas(), this.pegs = this.computePegs() }, e.prototype.updateIndicators = function (e) { e("pegs-count", this.pegs.length.toString()), e("segments-count", this.nbSegments.toString()), e("error-average", this.error.average.toString()), e("error-mean-square", this.error.meanSquare.toString()), e("error-variance", this.error.variance.toString()) }, Object.defineProperty(e.prototype, "nbSegments", { get: function () { return this.thread.totalNbSegments }, enumerable: !1, configurable: !0 }), Object.defineProperty(e.prototype, "instructions", { get: function () { if (r.Parameters.mode !== r.EMode.MONOCHROME) return "Instructions are only available for monochrome mode."; if (r.Parameters.invertColors) return "Instructions are only available for black thread."; for (var e = -1, t = -1, n = 0, a = this.pegs; n < a.length; n++) { var i = a[n]; e < i.x && (e = i.x), t < i.y && (t = i.y) } var o = []; o.push("Generated by https://piellardj.github.io/image-stylization-threading.\n"), o.push("Here are instructions to reproduce this in real life. For the best result, make sure you used the website at the highest quality mode and the highest thread opacity.\n"), o.push("Space units used below are abstract, just scale it to whatever size you want. Typically, you can choose 1 unit = 1 millimeter."), o.push("Computed for a total size of ".concat(e, "x").concat(t, ".")); var s = this.lineThickness * this.hiddenCanvasScale; o.push("Computed for a black thread of width ".concat(s, " and opacity ").concat(this.lineOpacity, " (this is equivalent to an opaque thread of width ").concat(s * this.lineOpacity, ").")), o.push("\nFirst here are the positions of the pegs:"); for (var h = this.pegs, c = 0; c < h.length; c++)h[c].name = "PEG_".concat(c), o.push("  - ".concat(h[c].name, ": x=").concat(h[c].x.toFixed(2), " ; y=").concat(h[c].y.toFixed(2))); return o.push("\nThen here are the steps of the thread:"), this.thread.iterateOnThreads(0, (function (e) { var t = e; o.push("  - First start from ".concat(t[0].name)); for (var n = 1; n < t.length; n++)o.push("  - then go to ".concat(t[n].name, " (this is segment ").concat(n, " / ").concat(t.length - 1, ")")) })), o.join("\n") }, enumerable: !1, configurable: !0 }), e.prototype.initializeHiddenCanvasLineProperties = function () { var e = this.lineThickness * this.hiddenCanvasScale; e <= 1 ? (this.lineOpacityInternal = .5 * this.lineOpacity * e, this.hiddenCanvasContext.lineWidth = 1) : (this.lineOpacityInternal = .5 * this.lineOpacity, this.hiddenCanvasContext.lineWidth = e) }, e.prototype.computeSegment = function (e) { var t, n; if (0 === e.length) { var r = this.computeBestStartingSegment(); e.push(r.peg1), t = r.peg1, n = r.peg2 } else { t = e[e.length - 1]; var a = Math.min(e.length, 20), i = e.slice(-a); n = this.computeBestNextPeg(t, i) } e.push(n), this.drawSegmentOnHiddenCanvas(t, n) }, e.prototype.resetHiddenCanvas = function () { var t = e.computeBestSize(this.sourceImage, 100 * this.hiddenCanvasScale); this.hiddenCanvas.width = t.width, this.hiddenCanvas.height = t.height, (0, i.resetCanvasCompositing)(this.hiddenCanvasContext), this.hiddenCanvasContext.drawImage(this.sourceImage, 0, 0, t.width, t.height); var n = this.hiddenCanvasContext.getImageData(0, 0, t.width, t.height); this.thread.adjustCanvasData(n.data, r.Parameters.invertColors), this.hiddenCanvasContext.putImageData(n, 0, 0), this.computeError(), this.initializeHiddenCanvasLineProperties() }, e.prototype.computeError = function () { this.uploadCanvasDataToCPU(), this.error = { average: 0, variance: 0, meanSquare: 0 }; for (var e = this.hiddenCanvasData.width * this.hiddenCanvasData.height, t = 3 * e, n = 0; n < e; n++) { var r = 127 - this.hiddenCanvasData.data[4 * n + 0], a = 127 - this.hiddenCanvasData.data[4 * n + 1], i = 127 - this.hiddenCanvasData.data[4 * n + 2]; this.error.average += r + a + i, this.error.meanSquare += r * r + a * a + i * i } for (this.error.average = Math.round(this.error.average / t), this.error.meanSquare = Math.round(this.error.meanSquare / t), n = 0; n < e; n++) { var o = ((r = 127 - this.hiddenCanvasData.data[4 * n + 0]) + (a = 127 - this.hiddenCanvasData.data[4 * n + 1]) + (i = 127 - this.hiddenCanvasData.data[4 * n + 2])) / 3 - this.error.average; this.error.variance += o * o } this.error.variance = Math.round(this.error.variance / t) }, e.prototype.computeTransformation = function (e) { return new a.Transformation(e, this.hiddenCanvas) }, e.prototype.drawSegmentOnHiddenCanvas = function (e, t) { this.hiddenCanvasContext.beginPath(), this.hiddenCanvasContext.moveTo(e.x, e.y), this.hiddenCanvasContext.lineTo(t.x, t.y), this.hiddenCanvasContext.stroke(), this.hiddenCanvasContext.closePath(), this.hiddenCanvasData = null }, e.prototype.computeBestStartingSegment = function () { for (var e = [], t = h, n = 1 + Math.floor(this.pegs.length / 100), r = 0; r < this.pegs.length; r += n)for (var a = r + 1; a < this.pegs.length; a += n) { var i = this.pegs[r], o = this.pegs[a]; if (!this.arePegsTooClose(i, o)) { var s = this.computeSegmentPotential(i, o); s > t ? (t = s, e = [{ peg1: i, peg2: o }]) : s === t && e.push({ peg1: i, peg2: o }) } } return u(e) }, e.prototype.computeBestNextPeg = function (e, t) { for (var n = [], r = h, a = 0, i = this.pegs; a < i.length; a++) { var o = i[a]; if (!this.arePegsTooClose(e, o) && !t.includes(o)) { var s = this.computeSegmentPotential(e, o); s > r ? (r = s, n = [o]) : s === r && n.push(o) } } return u(n) }, e.prototype.uploadCanvasDataToCPU = function () { if (null === this.hiddenCanvasData) { var e = this.hiddenCanvas.width, t = this.hiddenCanvas.height; this.hiddenCanvasData = this.hiddenCanvasContext.getImageData(0, 0, e, t) } }, e.prototype.computeSegmentPotential = function (e, t) { this.uploadCanvasDataToCPU(); for (var n, r, a, i, o = 0, s = (r = t, a = (n = e).x - r.x, i = n.y - r.y, Math.sqrt(a * a + i * i)), h = Math.ceil(s), c = 0; c < h; c++) { var d = (c + 1) / (h + 1), u = { x: l(e.x, t.x, d), y: l(e.y, t.y, d) }; o += 127 - (this.sampleCanvasData(u) + 255 * this.lineOpacityInternal) } return o / h }, e.prototype.sampleCanvasData = function (e) { var t = this.hiddenCanvasData.width, n = this.hiddenCanvasData.height, r = d(Math.floor(e.x), 0, t - 1), a = d(Math.ceil(e.x), 0, t - 1), i = d(Math.floor(e.y), 0, n - 1), o = d(Math.ceil(e.y), 0, n - 1), s = this.sampleCanvasPixel(r, i), h = this.sampleCanvasPixel(a, i), c = this.sampleCanvasPixel(r, o), u = this.sampleCanvasPixel(a, o), p = e.x % 1, g = l(s, h, p), f = l(c, u, p); return l(g, f, e.y % 1) }, e.prototype.sampleCanvasPixel = function (e, t) { var n = 4 * (e + t * this.hiddenCanvasData.width); return this.thread.sampleCanvas(this.hiddenCanvasData.data, n) }, e.computeBestSize = function (e, t) { var n = t / Math.max(e.width, e.height); return { width: Math.ceil(e.width * n), height: Math.ceil(e.height * n) } }, e.prototype.computePegs = function () { var e, t = 1e3; e = (h = this.hiddenCanvas.width / this.hiddenCanvas.height) > 1 ? { width: t, height: Math.round(t / h) } : { width: Math.round(t * h), height: t }; var n = r.Parameters.shape, a = r.Parameters.pegsCount, i = []; if (n === r.EShape.RECTANGLE) { this.arePegsTooClose = function (e, t) { return e.x === t.x || e.y === t.y }; var o = e.width, s = e.height, h = s / o, d = Math.round(.5 * a / (1 + h)), l = Math.round(.5 * (a - 2 * d)); i.push({ x: 0, y: 0 }); for (var u = 1; u < d; u++)i.push({ x: o * (u / d), y: 0 }); i.push({ x: o, y: 0 }); for (var p = 1; p < l; p++)i.push({ x: o, y: s * (p / l) }); for (i.push({ x: o, y: s }), u = d - 1; u >= 1; u--)i.push({ x: o * (u / d), y: s }); for (i.push({ x: 0, y: s }), p = l - 1; p >= 1; p--)i.push({ x: 0, y: s * (p / l) }) } else { this.arePegsTooClose = function (e, t) { var n = Math.abs(e.angle - t.angle); return Math.min(n, c - n) <= c / 16 }; for (var g = .5 * e.width, f = .5 * e.height, v = Math.PI * (3 * (g + f) - Math.sqrt((3 * g + f) * (g + 3 * f))) / a, m = 0; i.length < a;) { var y = Math.cos(m), b = Math.sin(m), C = { x: g * (1 + y), y: f * (1 + b), angle: m }; i.push(C), m += v / Math.sqrt(g * g * b * b + f * f * y * y) } } for (var P = 0, w = i; P < w.length; P++)(C = w[P]).x *= this.hiddenCanvas.width / e.width, C.y *= this.hiddenCanvas.height / e.height; return i }, e }(); t.ThreadComputer = p }, 607: function (e, t, n) { Object.defineProperty(t, "__esModule", { value: !0 }), t.ThreadPlotter = void 0; var r = n(61), a = function () { function e(e, t) { this.plotter = e, this.threadComputer = t, this.nbSegmentsDrawn = 0 } return e.prototype.reset = function () { this.nbSegmentsDrawn = 0 }, e.prototype.plot = function () { if (this.nbSegmentsDrawn !== this.threadComputer.nbSegments) { if (this.nbSegmentsDrawn > this.threadComputer.nbSegments && (this.nbSegmentsDrawn = 0), 0 === this.nbSegmentsDrawn) { var e = { backgroundColor: r.Parameters.invertColors ? "black" : "white", blur: r.Parameters.blur }; this.plotter.resize(), this.plotter.initialize(e), r.Parameters.displayPegs && this.threadComputer.drawPegs(this.plotter), this.threadComputer.drawThread(this.plotter, 0), this.plotter.finalize() } else this.threadComputer.drawThread(this.plotter, this.nbSegmentsDrawn); this.nbSegmentsDrawn = this.threadComputer.nbSegments } }, e }(); t.ThreadPlotter = a }, 45: function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.ThreadBase = void 0; var n = function () { function e() { this.sampleCanvas = null } return e.lowerNbSegmentsForThread = function (e, t) { e.length = t > 0 ? Math.min(e.length, t + 1) : 0 }, e.computeNbSegments = function (e) { return e.length > 1 ? e.length - 1 : 0 }, e.iterateOnThread = function (t, n, r, a) { r < e.computeNbSegments(t) && a(t.slice(r), n) }, e }(); t.ThreadBase = n }, 68: function (e, t, n) { var r, a = this && this.__extends || (r = function (e, t) { return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]) }, r(e, t) }, function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null"); function n() { this.constructor = e } r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) }); Object.defineProperty(t, "__esModule", { value: !0 }), t.ThreadMonochrome = void 0; var i = n(781), o = n(45), s = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.threadPegs = [], t } return a(t, e), Object.defineProperty(t.prototype, "totalNbSegments", { get: function () { return o.ThreadBase.computeNbSegments(this.threadPegs) }, enumerable: !1, configurable: !0 }), t.prototype.lowerNbSegments = function (e) { o.ThreadBase.lowerNbSegmentsForThread(this.threadPegs, e) }, t.prototype.iterateOnThreads = function (e, t) { o.ThreadBase.iterateOnThread(this.threadPegs, i.EColor.MONOCHROME, e, t) }, t.prototype.getThreadToGrow = function () { return { thread: this.threadPegs, color: i.EColor.MONOCHROME } }, t.prototype.adjustCanvasData = function (e, t) { var n; n = t ? function (e) { return (255 - e) / 2 } : function (e) { return e / 2 }; for (var r = e.length / 4, a = 0; a < r; a++) { var i = n((e[4 * a + 0] + e[4 * a + 1] + e[4 * a + 2]) / 3); e[4 * a + 0] = i, e[4 * a + 1] = i, e[4 * a + 2] = i } }, t.prototype.enableSamplingFor = function () { null === this.sampleCanvas && (this.sampleCanvas = function (e, t) { return e[t + 0] }) }, t }(o.ThreadBase); t.ThreadMonochrome = s }, 64: function (e, t, n) { var r, a = this && this.__extends || (r = function (e, t) { return r = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var n in t) Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]) }, r(e, t) }, function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Class extends value " + String(t) + " is not a constructor or null"); function n() { this.constructor = e } r(e, t), e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype, new n) }); Object.defineProperty(t, "__esModule", { value: !0 }), t.ThreadRedBlueGreen = void 0; var i = n(781), o = n(45), s = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.threadPegsRed = [], t.threadPegsGreen = [], t.threadPegsBlue = [], t } return a(t, e), Object.defineProperty(t.prototype, "totalNbSegments", { get: function () { return o.ThreadBase.computeNbSegments(this.threadPegsRed) + o.ThreadBase.computeNbSegments(this.threadPegsGreen) + o.ThreadBase.computeNbSegments(this.threadPegsBlue) }, enumerable: !1, configurable: !0 }), t.prototype.lowerNbSegments = function (e) { var t = this.computeIdealSegmentsRepartition(e); o.ThreadBase.lowerNbSegmentsForThread(this.threadPegsRed, t.red), o.ThreadBase.lowerNbSegmentsForThread(this.threadPegsGreen, t.green), o.ThreadBase.lowerNbSegmentsForThread(this.threadPegsBlue, t.blue) }, t.prototype.iterateOnThreads = function (e, t) { var n = this.computeIdealSegmentsRepartition(e); o.ThreadBase.iterateOnThread(this.threadPegsRed, i.EColor.RED, n.red, t), o.ThreadBase.iterateOnThread(this.threadPegsGreen, i.EColor.GREEN, n.green, t), o.ThreadBase.iterateOnThread(this.threadPegsBlue, i.EColor.BLUE, n.blue, t) }, t.prototype.getThreadToGrow = function () { var e = this.computeIdealSegmentsRepartition(this.totalNbSegments + 1); return e.red > 0 && this.threadPegsRed.length < e.red + 1 ? { thread: this.threadPegsRed, color: i.EColor.RED } : e.green > 0 && this.threadPegsGreen.length < e.green + 1 ? { thread: this.threadPegsGreen, color: i.EColor.GREEN } : { thread: this.threadPegsBlue, color: i.EColor.BLUE } }, t.prototype.adjustCanvasData = function (e, t) { var n, r = 0, a = 0, i = 0; n = t ? function (e) { return (255 - e) / 2 } : function (e) { return e / 2 }; for (var o = e.length / 4, s = 0; s < o; s++)r += e[4 * s + 0], a += e[4 * s + 1], i += e[4 * s + 2], e[4 * s + 0] = n(e[4 * s + 0]), e[4 * s + 1] = n(e[4 * s + 1]), e[4 * s + 2] = n(e[4 * s + 2]); t || (r = 255 * o - r, a = 255 * o - a, i = 255 * o - i); var h = r + a + i; this.frequencyRed = r / h, this.frequencyGreen = a / h, this.frequencyBlue = i / h }, t.prototype.enableSamplingFor = function (e) { var t; t = e === i.EColor.RED ? 0 : e === i.EColor.GREEN ? 1 : 2, this.sampleCanvas = function (e, n) { return e[n + t] } }, t.prototype.computeIdealSegmentsRepartition = function (e) { for (var t = e * this.frequencyRed, n = e * this.frequencyGreen, r = e * this.frequencyBlue, a = { red: Math.floor(t), green: Math.floor(n), blue: Math.floor(r) }; a.red + a.green + a.blue < e;) { var i = t - a.red / Math.max(1, a.red + a.green + a.blue), o = n - a.green / Math.max(1, a.red + a.green + a.blue), s = r - a.blue / Math.max(1, a.red + a.green + a.blue); i > o && i > s ? a.red++ : o > i && o > s ? a.green++ : a.blue++ } return a }, t }(o.ThreadBase); t.ThreadRedBlueGreen = s }, 506: function (e, t) { Object.defineProperty(t, "__esModule", { value: !0 }), t.Transformation = void 0; var n = function () { function e(e, t) { var n = e.width / t.width, r = e.height / t.height; this.scaling = Math.min(n, r), this.origin = { x: .5 * (e.width - this.scaling * t.width), y: .5 * (e.height - this.scaling * t.height) } } return e.prototype.transform = function (e) { return { x: this.origin.x + e.x * this.scaling, y: this.origin.y + e.y * this.scaling } }, e }(); t.Transformation = n } }, t = {}; !function n(r) { var a = t[r]; if (void 0 !== a) return a.exports; var i = t[r] = { exports: {} }; return e[r].call(i.exports, i, i.exports, n), i.exports }(633) }();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQUM5QmxCLEVBQVlFLE1BQ0xlLEVBQVdELEdBQVVDLEVBQVdDLEVBQ3ZDbEIsRUFBWUcsUUFFWkgsRUFBWUksT0FJcEIsT0FBT0osR0FFZixFQXJJQSxDQUFpQyxFQUFBVCxZQXVJeEIsRUFBQWpILG1CQUFBQSxHLDJGQy9JVCxpQkFJSSxXQUFtQjZJLEVBQWtCQyxHQUNqQyxJQUFNQyxFQUFrQkYsRUFBVWxQLE1BQVFtUCxFQUFZblAsTUFDaERxUCxFQUFtQkgsRUFBVWpQLE9BQVNrUCxFQUFZbFAsT0FFeEQzSSxLQUFLNk0sUUFBVXRILEtBQUtvRyxJQUFJbU0sRUFBaUJDLEdBQ3pDL1gsS0FBS2dZLE9BQVMsQ0FDVnZPLEVBQUcsSUFBT21PLEVBQVVsUCxNQUFRMUksS0FBSzZNLFFBQVVnTCxFQUFZblAsT0FDdkRnQixFQUFHLElBQU9rTyxFQUFValAsT0FBUzNJLEtBQUs2TSxRQUFVZ0wsRUFBWWxQLFNBVXBFLE9BTlcsWUFBQTBFLFVBQVAsU0FBaUJyRCxHQUNiLE1BQU8sQ0FDSFAsRUFBR3pKLEtBQUtnWSxPQUFPdk8sRUFBSU8sRUFBTVAsRUFBSXpKLEtBQUs2TSxRQUNsQ25ELEVBQUcxSixLQUFLZ1ksT0FBT3RPLEVBQUlNLEVBQU1OLEVBQUkxSixLQUFLNk0sVUFHOUMsRUFyQkEsR0F1QlMsRUFBQTZFLGVBQUFBLElDekJMdUcsRUFBMkIsSUFHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsSUFPVixPQUhBRSxFQUFvQkwsR0FBVU0sS0FBS0YsRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0osR0FHcEVLLEVBQU9ELFFDbEJXSixDQUFvQixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW1hZ2Utc3R5bGl6YXRpb24tdGhyZWFkaW5nLy4vc3JjL3RzL2hlbHBlcnMudHMiLCJ3ZWJwYWNrOi8vaW1hZ2Utc3R5bGl6YXRpb24tdGhyZWFkaW5nLy4vc3JjL3RzL21haW4udHMiLCJ3ZWJwYWNrOi8vaW1hZ2Utc3R5bGl6YXRpb24tdGhyZWFkaW5nLy4vc3JjL3RzL3BhcmFtZXRlcnMudHMiLCJ3ZWJwYWNrOi8vaW1hZ2Utc3R5bGl6YXRpb24tdGhyZWFkaW5nLy4vc3JjL3RzL3Bsb3R0ZXIvY29tcG9zaXRpbmcudHMiLCJ3ZWJwYWNrOi8vaW1hZ2Utc3R5bGl6YXRpb24tdGhyZWFkaW5nLy4vc3JjL3RzL3Bsb3R0ZXIvcGxvdHRlci1iYXNlLnRzIiwid2VicGFjazovL2ltYWdlLXN0eWxpemF0aW9uLXRocmVhZGluZy8uL3NyYy90cy9wbG90dGVyL3Bsb3R0ZXItY2FudmFzLTJkLnRzIiwid2VicGFjazovL2ltYWdlLXN0eWxpemF0aW9uLXRocmVhZGluZy8uL3NyYy90cy9wbG90dGVyL3Bsb3R0ZXItc3ZnLnRzIiwid2VicGFjazovL2ltYWdlLXN0eWxpemF0aW9uLXRocmVhZGluZy8uL3NyYy90cy9wbG90dGVyL3htbC13cml0ZXIudHMiLCJ3ZWJwYWNrOi8vaW1hZ2Utc3R5bGl6YXRpb24tdGhyZWFkaW5nLy4vc3JjL3RzL3RocmVhZGluZy90aHJlYWQtY29tcHV0ZXIudHMiLCJ3ZWJwYWNrOi8vaW1hZ2Utc3R5bGl6YXRpb24tdGhyZWFkaW5nLy4vc3JjL3RzL3RocmVhZGluZy90aHJlYWQtcGxvdHRlci50cyIsIndlYnBhY2s6Ly9pbWFnZS1zdHlsaXphdGlvbi10aHJlYWRpbmcvLi9zcmMvdHMvdGhyZWFkaW5nL3RocmVhZC90aHJlYWQtYmFzZS50cyIsIndlYnBhY2s6Ly9pbWFnZS1zdHlsaXphdGlvbi10aHJlYWRpbmcvLi9zcmMvdHMvdGhyZWFkaW5nL3RocmVhZC90aHJlYWQtbW9ub2Nocm9tZS50cyIsIndlYnBhY2s6Ly9pbWFnZS1zdHlsaXphdGlvbi10aHJlYWRpbmcvLi9zcmMvdHMvdGhyZWFkaW5nL3RocmVhZC90aHJlYWQtcmVkLWdyZWVuLWJsdWUudHMiLCJ3ZWJwYWNrOi8vaW1hZ2Utc3R5bGl6YXRpb24tdGhyZWFkaW5nLy4vc3JjL3RzL3RocmVhZGluZy90cmFuc2Zvcm1hdGlvbi50cyIsIndlYnBhY2s6Ly9pbWFnZS1zdHlsaXphdGlvbi10aHJlYWRpbmcvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vaW1hZ2Utc3R5bGl6YXRpb24tdGhyZWFkaW5nL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBkb3dubG9hZFRleHRGaWxlKGNvbnRlbnQ6IHN0cmluZywgZmlsZW5hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgY29uc3QgZmlsZVR5cGUgPSBcInRleHQvcGxhaW5cIjtcclxuXHJcbiAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoW2NvbnRlbnRdLCB7IHR5cGU6IGZpbGVUeXBlIH0pO1xyXG5cclxuICAgIGlmICh0eXBlb2Ygd2luZG93Lm5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgKHdpbmRvdy5uYXZpZ2F0b3IgYXMgYW55KS5tc1NhdmVCbG9iICE9PSBcInVuZGVmaW5lZFwiKSB7IC8vIGZvciBJRVxyXG4gICAgICAgICh3aW5kb3cubmF2aWdhdG9yIGFzIGFueSkubXNTYXZlQmxvYihibG9iLCBmaWxlbmFtZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IG9iamVjdFVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XHJcblxyXG4gICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIGxpbmtFbGVtZW50LmRvd25sb2FkID0gZmlsZW5hbWU7XHJcbiAgICAgICAgbGlua0VsZW1lbnQuaHJlZiA9IG9iamVjdFVybDtcclxuICAgICAgICBsaW5rRWxlbWVudC5kYXRhc2V0LmRvd25sb2FkdXJsID0gYCR7ZmlsZVR5cGV9OiR7bGlua0VsZW1lbnQuZG93bmxvYWR9OiR7bGlua0VsZW1lbnQuaHJlZn1gO1xyXG4gICAgICAgIGxpbmtFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmtFbGVtZW50KTtcclxuICAgICAgICBsaW5rRWxlbWVudC5jbGljaygpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGlua0VsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBkb24ndCBmb3JnZXQgdG8gZnJlZSB0aGUgb2JqZWN0VVJMIGFmdGVyIGEgZmV3IHNlY29uZHNcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChvYmplY3RVcmwpO1xyXG4gICAgICAgIH0sIDUwMDApO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRRdWVyeVN0cmluZ1ZhbHVlKG5hbWU6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xyXG4gICAgY29uc3QgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICBjb25zdCBxdWVyeVN0cmluZ1N0YXJ0ID0gdXJsLmluZGV4T2YoXCI/XCIpO1xyXG4gICAgaWYgKHF1ZXJ5U3RyaW5nU3RhcnQgPj0gMCkge1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gdXJsLnN1YnN0cmluZyhxdWVyeVN0cmluZ1N0YXJ0ICsgMSk7XHJcbiAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IHF1ZXJ5U3RyaW5nLnNwbGl0KFwiJlwiKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBwYXJhbWV0ZXIgb2YgcGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5VmFsdWUgPSBwYXJhbWV0ZXIuc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleVZhbHVlLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlY29kZWRLZXkgPSBkZWNvZGVVUklDb21wb25lbnQoa2V5VmFsdWVbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWNvZGVkS2V5ID09PSBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoa2V5VmFsdWVbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVjbGFyZUFycmF5SW5jbHVkZXNQb2x5ZmlsbCgpOiB2b2lkIHtcclxuICAgIGlmICh0eXBlb2YgQXJyYXkucHJvdG90eXBlLmluY2x1ZGVzICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkRlY2xhcmluZyBBcnJheS5pbmNsdWRlcyBwb2x5ZmlsbC4uLlwiKTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBcImluY2x1ZGVzXCIsIHtcclxuICAgICAgICAgICAgdmFsdWU8VD4odGhpczogVFtdLCBlbGVtZW50OiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4T2YoZWxlbWVudCkgPj0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZWNsYXJlU3RyaW5nUmVwZWF0UG9seWZpbGwoKTogdm9pZCB7XHJcbiAgICBpZiAodHlwZW9mIFN0cmluZy5wcm90b3R5cGUucmVwZWF0ICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkRlY2xhcmluZyBTdHJpbmcucmVwZWF0IHBvbHlmaWxsLi4uXCIpO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcucHJvdG90eXBlLCBcInJlcGVhdFwiLCB7XHJcbiAgICAgICAgICAgIHZhbHVlKHRoaXM6IHN0cmluZywgY291bnQ6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPCAwIHx8IGNvdW50ID09PSBJbmZpbml0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gdGhpcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZGVjbGFyZVBvbHlmaWxscygpOiB2b2lkIHtcclxuICAgIGRlY2xhcmVBcnJheUluY2x1ZGVzUG9seWZpbGwoKTtcclxuICAgIGRlY2xhcmVTdHJpbmdSZXBlYXRQb2x5ZmlsbCgpO1xyXG59XHJcblxyXG5leHBvcnQge1xyXG4gICAgZGVjbGFyZVBvbHlmaWxscyxcclxuICAgIGRvd25sb2FkVGV4dEZpbGUsXHJcbiAgICBnZXRRdWVyeVN0cmluZ1ZhbHVlLFxyXG59O1xyXG4iLCJpbXBvcnQgKiBhcyBIZWxwZXJzIGZyb20gXCIuL2hlbHBlcnNcIjtcclxuXHJcbmltcG9ydCB7IFBhcmFtZXRlcnMgfSBmcm9tIFwiLi9wYXJhbWV0ZXJzXCI7XHJcblxyXG5pbXBvcnQgeyBQbG90dGVyQ2FudmFzMkQgfSBmcm9tIFwiLi9wbG90dGVyL3Bsb3R0ZXItY2FudmFzLTJkXCI7XHJcbmltcG9ydCB7IFBsb3R0ZXJTVkcgfSBmcm9tIFwiLi9wbG90dGVyL3Bsb3R0ZXItc3ZnXCI7XHJcblxyXG5pbXBvcnQgeyBUaHJlYWRDb21wdXRlciB9IGZyb20gXCIuL3RocmVhZGluZy90aHJlYWQtY29tcHV0ZXJcIjtcclxuaW1wb3J0IHsgVGhyZWFkUGxvdHRlciB9IGZyb20gXCIuL3RocmVhZGluZy90aHJlYWQtcGxvdHRlclwiO1xyXG5cclxuaW1wb3J0IFwiLi9wYWdlLWludGVyZmFjZS1nZW5lcmF0ZWRcIjtcclxuXHJcbmZ1bmN0aW9uIG1haW4oKTogdm9pZCB7XHJcbiAgICBjb25zdCBNQVhfQ09NUFVUSU5HX1RJTUVfUEVSX0ZSQU1FID0gMjA7IC8vIG1zXHJcbiAgICBjb25zdCBjYW52YXNQbG90dGVyID0gbmV3IFBsb3R0ZXJDYW52YXMyRCgpO1xyXG4gICAgbGV0IHRocmVhZFBsb3R0ZXI6IFRocmVhZFBsb3R0ZXIgPSBudWxsO1xyXG4gICAgbGV0IHRocmVhZENvbXB1dGVyOiBUaHJlYWRDb21wdXRlciA9IG51bGw7XHJcbiAgICBsZXQgbmVlZFRvUmVzZXQgPSB0cnVlO1xyXG5cclxuICAgIFBhcmFtZXRlcnMuYWRkUmVkcmF3T2JzZXJ2ZXIoKCkgPT4geyB0aHJlYWRQbG90dGVyPy5yZXNldCgpOyB9KTtcclxuICAgIFBhcmFtZXRlcnMuYWRkUmVzZXRPYnNlcnZlcigoKSA9PiB7IG5lZWRUb1Jlc2V0ID0gdHJ1ZTsgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gbWFpbkxvb3AoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKG5lZWRUb1Jlc2V0KSB7XHJcbiAgICAgICAgICAgIHRocmVhZENvbXB1dGVyLnJlc2V0KFBhcmFtZXRlcnMubGluZXNPcGFjaXR5LCBQYXJhbWV0ZXJzLmxpbmVzVGhpY2tuZXNzKTtcclxuICAgICAgICAgICAgdGhyZWFkUGxvdHRlci5yZXNldCgpXHJcbiAgICAgICAgICAgIG5lZWRUb1Jlc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBjb21wdXRlZFNvbWV0aGluZyA9IHRocmVhZENvbXB1dGVyLmNvbXB1dGVOZXh0U2VnbWVudHMoTUFYX0NPTVBVVElOR19USU1FX1BFUl9GUkFNRSk7XHJcblxyXG4gICAgICAgIGlmIChjb21wdXRlZFNvbWV0aGluZyAmJiBQYXJhbWV0ZXJzLnNob3dJbmRpY2F0b3JzKSB7XHJcbiAgICAgICAgICAgIHRocmVhZENvbXB1dGVyLnVwZGF0ZUluZGljYXRvcnMoUGFnZS5DYW52YXMuc2V0SW5kaWNhdG9yVGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aHJlYWRQbG90dGVyLnBsb3QoKTtcclxuXHJcbiAgICAgICAgaWYgKFBhcmFtZXRlcnMuZGVidWcpIHtcclxuICAgICAgICAgICAgdGhyZWFkQ29tcHV0ZXIuZHJhd0RlYnVnVmlldyhjYW52YXNQbG90dGVyLmNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG1haW5Mb29wKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB1cGRhdGVCbHVyKGJsdXI6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGNhbnZhc1Bsb3R0ZXIuYmx1ciA9IGJsdXI7XHJcbiAgICB9XHJcbiAgICBQYXJhbWV0ZXJzLmFkZEJsdXJDaGFuZ2VPYnNlcnZlcih1cGRhdGVCbHVyKTtcclxuICAgIHVwZGF0ZUJsdXIoUGFyYW1ldGVycy5ibHVyKTtcclxuXHJcbiAgICBmdW5jdGlvbiBvbk5ld0ltYWdlKGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgUGFnZS5DYW52YXMuc2hvd0xvYWRlcihmYWxzZSk7XHJcbiAgICAgICAgdGhyZWFkQ29tcHV0ZXIgPSBuZXcgVGhyZWFkQ29tcHV0ZXIoaW1hZ2UpO1xyXG4gICAgICAgIHRocmVhZFBsb3R0ZXIgPSBuZXcgVGhyZWFkUGxvdHRlcihjYW52YXNQbG90dGVyLCB0aHJlYWRDb21wdXRlcik7XHJcbiAgICAgICAgbmVlZFRvUmVzZXQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgUGFyYW1ldGVycy5hZGRGaWxlVXBsb2FkT2JzZXJ2ZXIob25OZXdJbWFnZSk7XHJcblxyXG4gICAgUGFnZS5DYW52YXMuc2hvd0xvYWRlcih0cnVlKTtcclxuICAgIGNvbnN0IGRlZmF1bHRJbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgZGVmYXVsdEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICBvbk5ld0ltYWdlKGRlZmF1bHRJbWFnZSk7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKG1haW5Mb29wKTtcclxuICAgIH0pO1xyXG4gICAgZGVmYXVsdEltYWdlLnNyYyA9IFwiLi9yZXNvdXJjZXMvY2F0LmpwZ1wiO1xyXG5cclxuICAgIFBhcmFtZXRlcnMuYWRkRG93bmxvYWRPYnNlcnZlcigoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgc3ZnUGxvdHRlciA9IG5ldyBQbG90dGVyU1ZHKCk7XHJcbiAgICAgICAgY29uc3QgcGxvdHRlciA9IG5ldyBUaHJlYWRQbG90dGVyKHN2Z1Bsb3R0ZXIsIHRocmVhZENvbXB1dGVyKTtcclxuICAgICAgICBwbG90dGVyLnBsb3QoKTtcclxuICAgICAgICBjb25zdCBzdmdTdHJpbmcgPSBzdmdQbG90dGVyLmV4cG9ydCgpO1xyXG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gXCJpbWFnZS1hcy10aHJlYWRpbmcuc3ZnXCI7XHJcbiAgICAgICAgSGVscGVycy5kb3dubG9hZFRleHRGaWxlKHN2Z1N0cmluZywgZmlsZW5hbWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgUGFyYW1ldGVycy5hZGREb3dubG9hZEluc3RydWN0aW9uc09ic2VydmVyKCgpID0+IHtcclxuICAgICAgICBjYW52YXNQbG90dGVyLmdldFNlZ21lbnQoKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0ZXh0ID0gdGhyZWFkQ29tcHV0ZXIuaW5zdHJ1Y3Rpb25zO1xyXG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gXCJpbWFnZS1hcy10aHJlYWRpbmdfaW5zdHJ1Y3Rpb25zLnR4dFwiO1xyXG4gICAgICAgIEhlbHBlcnMuZG93bmxvYWRUZXh0RmlsZSh0ZXh0LCBmaWxlbmFtZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuSGVscGVycy5kZWNsYXJlUG9seWZpbGxzKCk7XHJcbm1haW4oKTtcclxuIiwiaW1wb3J0ICogYXMgSGVscGVycyBmcm9tIFwiLi9oZWxwZXJzXCI7XHJcblxyXG5pbXBvcnQgXCIuL3BhZ2UtaW50ZXJmYWNlLWdlbmVyYXRlZFwiO1xyXG5cclxuY29uc3QgY29udHJvbElkID0ge1xyXG4gICAgVVBMT0FEX0lOUFVUX0lNQUdFOiBcImlucHV0LWltYWdlLXVwbG9hZC1idXR0b25cIixcclxuICAgIFNIQVBFOiBcInNoYXBlLXRhYnMtaWRcIixcclxuICAgIFBFR1NfQ09VTlQ6IFwicGVncy1yYW5nZS1pZFwiLFxyXG4gICAgTkJfTElORVM6IFwibGluZXMtcmFuZ2UtaWRcIixcclxuICAgIFFVQUxJVFk6IFwicXVhbGl0eS10YWJzLWlkXCIsXHJcbiAgICBNT0RFOiBcInRocmVhZC1tb2RlLXRhYnMtaWRcIixcclxuICAgIExJTkVTX09QQUNJVFk6IFwib3BhY2l0eS1yYW5nZS1pZFwiLFxyXG4gICAgTElORVNfVEhJQ0tORVNTOiBcInRoaWNrbmVzcy1yYW5nZS1pZFwiLFxyXG4gICAgRElTUExBWV9QRUdTOiBcImRpc3BsYXktcGVncy1jaGVja2JveC1pZFwiLFxyXG4gICAgSU5WRVJUX0NPTE9SUzogXCJpbnZlcnQtY29sb3JzLWNoZWNrYm94LWlkXCIsXHJcbiAgICBTSE9XX0lORElDQVRPUlM6IFwic2hvdy1pbmRpY2F0b3JzLWNoZWNrYm94LWlkXCIsXHJcbiAgICBCTFVSOiBcImJsdXItcmFuZ2UtaWRcIixcclxuICAgIERPV05MT0FEOiBcInJlc3VsdC1kb3dubG9hZC1pZFwiLFxyXG4gICAgRE9XTkxPQURfSU5TVFJVQ1RJT05TOiBcImluc3RydWN0aW9ucy1kb3dubG9hZC1pZFwiLFxyXG59O1xyXG5cclxuZW51bSBFU2hhcGUge1xyXG4gICAgUkVDVEFOR0xFID0gXCIwXCIsXHJcbiAgICBFTExJUFNJUyA9IFwiMVwiLFxyXG59XHJcblxyXG5lbnVtIEVNb2RlIHtcclxuICAgIE1PTk9DSFJPTUUgPSBcIjBcIixcclxuICAgIENPTE9SUyA9IFwiMVwiLFxyXG59XHJcblxyXG50eXBlIE9ic2VydmVyID0gKCkgPT4gdW5rbm93bjtcclxuY29uc3QgcmVkcmF3T2JzZXJ2ZXJzOiBPYnNlcnZlcltdID0gW107XHJcbmZ1bmN0aW9uIHRyaWdnZXJSZWRyYXcoKTogdm9pZCB7XHJcbiAgICBmb3IgKGNvbnN0IG9ic2VydmVyIG9mIHJlZHJhd09ic2VydmVycykge1xyXG4gICAgICAgIG9ic2VydmVyKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHJlc2V0T2JzZXJ2ZXJzOiBPYnNlcnZlcltdID0gW107XHJcbmZ1bmN0aW9uIHRyaWdnZXJSZXNldCgpOiB2b2lkIHtcclxuICAgIGZvciAoY29uc3Qgb2JzZXJ2ZXIgb2YgcmVzZXRPYnNlcnZlcnMpIHtcclxuICAgICAgICBvYnNlcnZlcigpO1xyXG4gICAgfVxyXG59XHJcblxyXG5QYWdlLlRhYnMuYWRkT2JzZXJ2ZXIoY29udHJvbElkLlNIQVBFLCB0cmlnZ2VyUmVzZXQpO1xyXG5QYWdlLlJhbmdlLmFkZExhenlPYnNlcnZlcihjb250cm9sSWQuUEVHU19DT1VOVCwgdHJpZ2dlclJlc2V0KTtcclxuUGFnZS5UYWJzLmFkZE9ic2VydmVyKGNvbnRyb2xJZC5RVUFMSVRZLCB0cmlnZ2VyUmVzZXQpO1xyXG5QYWdlLlRhYnMuYWRkT2JzZXJ2ZXIoY29udHJvbElkLk1PREUsIHRyaWdnZXJSZXNldCk7XHJcblBhZ2UuUmFuZ2UuYWRkTGF6eU9ic2VydmVyKGNvbnRyb2xJZC5MSU5FU19PUEFDSVRZLCB0cmlnZ2VyUmVzZXQpO1xyXG5QYWdlLlJhbmdlLmFkZExhenlPYnNlcnZlcihjb250cm9sSWQuTElORVNfVEhJQ0tORVNTLCB0cmlnZ2VyUmVzZXQpO1xyXG5QYWdlLkNoZWNrYm94LmFkZE9ic2VydmVyKGNvbnRyb2xJZC5ESVNQTEFZX1BFR1MsIHRyaWdnZXJSZWRyYXcpO1xyXG5QYWdlLkNoZWNrYm94LmFkZE9ic2VydmVyKGNvbnRyb2xJZC5JTlZFUlRfQ09MT1JTLCB0cmlnZ2VyUmVzZXQpO1xyXG5QYWdlLkNhbnZhcy5PYnNlcnZlcnMuY2FudmFzUmVzaXplLnB1c2godHJpZ2dlclJlZHJhdyk7XHJcblxyXG5jb25zdCBpc0luRGVidWcgPSBIZWxwZXJzLmdldFF1ZXJ5U3RyaW5nVmFsdWUoXCJkZWJ1Z1wiKSA9PT0gXCIxXCI7XHJcblxyXG5QYWdlLkNhbnZhcy5zZXRJbmRpY2F0b3JWaXNpYmlsaXR5KFwiZXJyb3ItYXZlcmFnZVwiLCBpc0luRGVidWcpO1xyXG5QYWdlLkNhbnZhcy5zZXRJbmRpY2F0b3JWaXNpYmlsaXR5KFwiZXJyb3ItbWVhbi1zcXVhcmVcIiwgaXNJbkRlYnVnKTtcclxuUGFnZS5DYW52YXMuc2V0SW5kaWNhdG9yVmlzaWJpbGl0eShcImVycm9yLXZhcmlhbmNlXCIsIGlzSW5EZWJ1Zyk7XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVJbmRpY2F0b3JzVmlzaWJpbGl0eSgpOiB2b2lkIHtcclxuICAgIGNvbnN0IHNob3VsZEJlVmlzaWJsZSA9IFBhZ2UuQ2hlY2tib3guaXNDaGVja2VkKGNvbnRyb2xJZC5TSE9XX0lORElDQVRPUlMpO1xyXG4gICAgUGFnZS5DYW52YXMuc2V0SW5kaWNhdG9yc1Zpc2liaWxpdHkoc2hvdWxkQmVWaXNpYmxlKTtcclxufVxyXG5QYWdlLkNoZWNrYm94LmFkZE9ic2VydmVyKGNvbnRyb2xJZC5TSE9XX0lORElDQVRPUlMsIHVwZGF0ZUluZGljYXRvcnNWaXNpYmlsaXR5KTtcclxudXBkYXRlSW5kaWNhdG9yc1Zpc2liaWxpdHkoKTtcclxuXHJcbmFic3RyYWN0IGNsYXNzIFBhcmFtZXRlcnMge1xyXG4gICAgcHVibGljIHN0YXRpYyBhZGRGaWxlVXBsb2FkT2JzZXJ2ZXIoY2FsbGJhY2s6IChpbWFnZTogSFRNTEltYWdlRWxlbWVudCkgPT4gdW5rbm93bik6IHZvaWQge1xyXG4gICAgICAgIFBhZ2UuRmlsZUNvbnRyb2wuYWRkVXBsb2FkT2JzZXJ2ZXIoY29udHJvbElkLlVQTE9BRF9JTlBVVF9JTUFHRSwgKGZpbGVzTGlzdDogRmlsZUxpc3QpID0+IHtcclxuICAgICAgICAgICAgaWYgKGZpbGVzTGlzdC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIFBhZ2UuQ2FudmFzLnNob3dMb2FkZXIodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soaW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gcmVhZGVyLnJlc3VsdCBhcyBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZXNMaXN0WzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGRlYnVnKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBpc0luRGVidWc7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgc2hhcGUoKTogRVNoYXBlIHtcclxuICAgICAgICByZXR1cm4gUGFnZS5UYWJzLmdldFZhbHVlcyhjb250cm9sSWQuU0hBUEUpWzBdIGFzIEVTaGFwZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCBwZWdzQ291bnQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gUGFnZS5SYW5nZS5nZXRWYWx1ZShjb250cm9sSWQuUEVHU19DT1VOVCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgcXVhbGl0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiArUGFnZS5UYWJzLmdldFZhbHVlcyhjb250cm9sSWQuUVVBTElUWSlbMF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgbW9kZSgpOiBFTW9kZSB7XHJcbiAgICAgICAgcmV0dXJuIFBhZ2UuVGFicy5nZXRWYWx1ZXMoY29udHJvbElkLk1PREUpWzBdIGFzIEVNb2RlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IG5iTGluZXMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gUGFnZS5SYW5nZS5nZXRWYWx1ZShjb250cm9sSWQuTkJfTElORVMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0IGxpbmVzT3BhY2l0eSgpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IHJhdyA9IFBhZ2UuUmFuZ2UuZ2V0VmFsdWUoY29udHJvbElkLkxJTkVTX09QQUNJVFkpO1xyXG4gICAgICAgIHJldHVybiBNYXRoLnBvdygyLCByYXcgLSA3KTsgLy8gMl4ocmF3KzIpIC8gMjU2XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgbGluZXNUaGlja25lc3MoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gUGFnZS5SYW5nZS5nZXRWYWx1ZShjb250cm9sSWQuTElORVNfVEhJQ0tORVNTKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCBkaXNwbGF5UGVncygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gUGFnZS5DaGVja2JveC5pc0NoZWNrZWQoY29udHJvbElkLkRJU1BMQVlfUEVHUyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgaW52ZXJ0Q29sb3JzKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBQYWdlLkNoZWNrYm94LmlzQ2hlY2tlZChjb250cm9sSWQuSU5WRVJUX0NPTE9SUyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBnZXQgc2hvd0luZGljYXRvcnMoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIFBhZ2UuQ2hlY2tib3guaXNDaGVja2VkKGNvbnRyb2xJZC5TSE9XX0lORElDQVRPUlMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkUmVkcmF3T2JzZXJ2ZXIoY2FsbGJhY2s6IE9ic2VydmVyKTogdm9pZCB7XHJcbiAgICAgICAgcmVkcmF3T2JzZXJ2ZXJzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkUmVzZXRPYnNlcnZlcihjYWxsYmFjazogT2JzZXJ2ZXIpOiB2b2lkIHtcclxuICAgICAgICByZXNldE9ic2VydmVycy5wdXNoKGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldCBibHVyKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIFBhZ2UuUmFuZ2UuZ2V0VmFsdWUoY29udHJvbElkLkJMVVIpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBhZGRCbHVyQ2hhbmdlT2JzZXJ2ZXIoY2FsbGJhY2s6IChuZXdCbHVyOiBudW1iZXIpID0+IHVua25vd24pOiB2b2lkIHtcclxuICAgICAgICBQYWdlLlJhbmdlLmFkZE9ic2VydmVyKGNvbnRyb2xJZC5CTFVSLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBhZGREb3dubG9hZE9ic2VydmVyKGNhbGxiYWNrOiAoKSA9PiB1bmtub3duKTogdm9pZCB7XHJcbiAgICAgICAgUGFnZS5GaWxlQ29udHJvbC5hZGREb3dubG9hZE9ic2VydmVyKGNvbnRyb2xJZC5ET1dOTE9BRCwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgYWRkRG93bmxvYWRJbnN0cnVjdGlvbnNPYnNlcnZlcihjYWxsYmFjazogKCkgPT4gdW5rbm93bik6IHZvaWQge1xyXG4gICAgICAgIFBhZ2UuRmlsZUNvbnRyb2wuYWRkRG93bmxvYWRPYnNlcnZlcihjb250cm9sSWQuRE9XTkxPQURfSU5TVFJVQ1RJT05TLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZURvd25sb2FkSW5zdHJ1Y3Rpb25zVmlzaWJpbGl0eSgpOiB2b2lkIHtcclxuICAgIC8vIGNvbnN0IGlzTW9ub2Nocm9tZSA9IChQYXJhbWV0ZXJzLm1vZGUgPT09IEVNb2RlLk1PTk9DSFJPTUUpO1xyXG4gICAgLy8gY29uc3QgaXNCbGFja09uV2hpdGUgPSAhUGFyYW1ldGVycy5pbnZlcnRDb2xvcnM7XHJcbiAgICAvLyBQYWdlLkNvbnRyb2xzLnNldFZpc2liaWxpdHkoY29udHJvbElkLkRPV05MT0FEX0lOU1RSVUNUSU9OUywgaXNNb25vY2hyb21lICYmIGlzQmxhY2tPbldoaXRlKTtcclxufVxyXG5QYWdlLlRhYnMuYWRkT2JzZXJ2ZXIoY29udHJvbElkLk1PREUsIHVwZGF0ZURvd25sb2FkSW5zdHJ1Y3Rpb25zVmlzaWJpbGl0eSk7XHJcblBhZ2UuQ2hlY2tib3guYWRkT2JzZXJ2ZXIoY29udHJvbElkLklOVkVSVF9DT0xPUlMsIHVwZGF0ZURvd25sb2FkSW5zdHJ1Y3Rpb25zVmlzaWJpbGl0eSk7XHJcbnVwZGF0ZURvd25sb2FkSW5zdHJ1Y3Rpb25zVmlzaWJpbGl0eSgpO1xyXG5cclxuZXhwb3J0IHtcclxuICAgIFBhcmFtZXRlcnMsXHJcbiAgICBFTW9kZSxcclxuICAgIEVTaGFwZSxcclxufTtcclxuIiwiaW1wb3J0IFwiLi4vcGFnZS1pbnRlcmZhY2UtZ2VuZXJhdGVkXCI7XHJcblxyXG5lbnVtIEVDb21wb3NpdGluZ09wZXJhdGlvbiB7XHJcbiAgICBEQVJLRU4sXHJcbiAgICBMSUdIVEVOLFxyXG59XHJcblxyXG5lbnVtIEVDb2xvciB7XHJcbiAgICBNT05PQ0hST01FLFxyXG4gICAgUkVELFxyXG4gICAgR1JFRU4sXHJcbiAgICBCTFVFLFxyXG59XHJcblxyXG5pbnRlcmZhY2UgSUNvbG9yIHtcclxuICAgIHI6IG51bWJlcjtcclxuICAgIGc6IG51bWJlcjtcclxuICAgIGI6IG51bWJlcjtcclxufVxyXG5cclxubGV0IHN1cHBvcnRzQWR2YW5jZWRDb21wb3NpdGluZyA9IHRydWU7XHJcbmZ1bmN0aW9uIHVzZUFkdmFuY2VkQ29tcG9zaXRpbmcoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gc3VwcG9ydHNBZHZhbmNlZENvbXBvc2l0aW5nO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb21wdXRlUmF3Q29sb3IoY29sb3I6IEVDb2xvcik6IElDb2xvciB7XHJcbiAgICBpZiAoY29sb3IgPT09IEVDb2xvci5NT05PQ0hST01FKSB7XHJcbiAgICAgICAgcmV0dXJuIHsgcjogMSwgZzogMSwgYjogMSB9O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3VsdDogSUNvbG9yID0ge1xyXG4gICAgICAgIHI6IChjb2xvciA9PT0gRUNvbG9yLlJFRCkgPyAxIDogMCxcclxuICAgICAgICBnOiAoY29sb3IgPT09IEVDb2xvci5HUkVFTikgPyAxIDogMCxcclxuICAgICAgICBiOiAoY29sb3IgPT09IEVDb2xvci5CTFVFKSA/IDEgOiAwLFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogQHBhcmFtIG9wYWNpdHkgaW4gWzAsIDFdXHJcbiAqL1xyXG5mdW5jdGlvbiBhcHBseUNhbnZhc0NvbXBvc2l0aW5nKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgY29sb3I6IEVDb2xvciwgb3BhY2l0eTogbnVtYmVyLCBvcGVyYXRpb246IEVDb21wb3NpdGluZ09wZXJhdGlvbik6IHZvaWQge1xyXG4gICAgY29uc3QgcmF3UkdCID0gY29tcHV0ZVJhd0NvbG9yKGNvbG9yKTtcclxuXHJcbiAgICBpZiAoc3VwcG9ydHNBZHZhbmNlZENvbXBvc2l0aW5nKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0T3BlcmF0aW9uID0gKG9wZXJhdGlvbiA9PT0gRUNvbXBvc2l0aW5nT3BlcmF0aW9uLkxJR0hURU4pID8gXCJsaWdodGVyXCIgOiBcImRpZmZlcmVuY2VcIjtcclxuICAgICAgICBjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9IHRhcmdldE9wZXJhdGlvbjtcclxuICAgICAgICBpZiAoY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPT09IHRhcmdldE9wZXJhdGlvbikge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IE1hdGguY2VpbCgyNTUgKiBvcGFjaXR5KTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGByZ2IoJHtyYXdSR0IuciAqIHZhbHVlfSwgJHtyYXdSR0IuZyAqIHZhbHVlfSwgJHtyYXdSR0IuYiAqIHZhbHVlfSlgO1xyXG4gICAgICAgICAgICByZXR1cm47IC8vIHN1Y2Nlc3NcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdXBwb3J0c0FkdmFuY2VkQ29tcG9zaXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgUGFnZS5EZW1vcGFnZS5zZXRFcnJvck1lc3NhZ2UoXCJhZHZhbmNlZC1jb21wb3NpdGluZy1ub3Qtc3VwcG9ydGVkXCIsIGBZb3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBjYW52YXMyRCBjb21wb3NpdGluZyAnJHt0YXJnZXRPcGVyYXRpb259Jy4gVGhlIHByb2plY3Qgd2lsbCBub3QgcnVuIGFzIGV4cGVjdGVkLmApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBiYXNpYyBjb21wb3NpdGluZ1xyXG4gICAge1xyXG4gICAgICAgIHJlc2V0Q2FudmFzQ29tcG9zaXRpbmcoY29udGV4dCk7XHJcbiAgICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gRUNvbXBvc2l0aW5nT3BlcmF0aW9uLkRBUktFTikge1xyXG4gICAgICAgICAgICByYXdSR0IuciA9IDEgLSByYXdSR0IucjtcclxuICAgICAgICAgICAgcmF3UkdCLmcgPSAxIC0gcmF3UkdCLmc7XHJcbiAgICAgICAgICAgIHJhd1JHQi5iID0gMSAtIHJhd1JHQi5iO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gYHJnYmEoJHtyYXdSR0IuciAqIDI1NX0sICR7cmF3UkdCLmcgKiAyNTV9LCAke3Jhd1JHQi5iICogMjU1fSwgJHtvcGFjaXR5fSlgO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldENhbnZhc0NvbXBvc2l0aW5nKGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInNvdXJjZS1vdmVyXCI7XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgICBFQ29sb3IsXHJcbiAgICBFQ29tcG9zaXRpbmdPcGVyYXRpb24sXHJcbiAgICBhcHBseUNhbnZhc0NvbXBvc2l0aW5nLFxyXG4gICAgY29tcHV0ZVJhd0NvbG9yLFxyXG4gICAgcmVzZXRDYW52YXNDb21wb3NpdGluZyxcclxuICAgIHVzZUFkdmFuY2VkQ29tcG9zaXRpbmcsXHJcbn07XHJcbiIsImltcG9ydCB7IElMaW5lIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvaS1saW5lXCI7XHJcbmltcG9ydCB7IElQb2ludCB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL2ktcG9pbnRcIjtcclxuaW1wb3J0IHsgSVNpemUgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9pLXNpemVcIjtcclxuaW1wb3J0IHsgRUNvbG9yLCBFQ29tcG9zaXRpbmdPcGVyYXRpb24gfSBmcm9tIFwiLi9jb21wb3NpdGluZ1wiO1xyXG5cclxuaW50ZXJmYWNlIElQbG90dGVySW5mbyB7XHJcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IHN0cmluZztcclxuICAgIGJsdXI6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIElJbWFnZUZpdHRpbmcge1xyXG4gICAgc2l6ZUluUGxvdHRlcjogSVNpemU7XHJcbiAgICBpbWFnZVJlbGF0aXZlVG9DYW52YXNQaXhlbDogKHJlbGF0aXZlQ29vcmRzOiBJUG9pbnQpID0+IElQb2ludDtcclxufTtcclxuXHJcbmFic3RyYWN0IGNsYXNzIFBsb3R0ZXJCYXNlIHtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCByZXNpemUoKTogdm9pZDtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBpbml0aWFsaXplKGluZm9zOiBJUGxvdHRlckluZm8pOiB2b2lkO1xyXG4gICAgcHVibGljIGFic3RyYWN0IGZpbmFsaXplKCk6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGRyYXdMaW5lcyhsaW5lczogSUxpbmVbXSwgY29sb3I6IEVDb2xvciwgb3BhY2l0eTogbnVtYmVyLCBvcGVyYXRpb246IEVDb21wb3NpdGluZ09wZXJhdGlvbiwgdGhpY2tuZXNzOiBudW1iZXIpOiB2b2lkO1xyXG4gICAgcHVibGljIGFic3RyYWN0IGRyYXdQb2ludHMocG9pbnRzOiBJUG9pbnRbXSwgY29sb3I6IHN0cmluZywgZGlhbWV0ZXI6IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGdldCBzaXplKCk6IElTaXplO1xyXG5cclxuICAgIHB1YmxpYyBkcmF3QnJva2VuTGluZShwb2ludHM6IElQb2ludFtdLCBjb2xvcjogRUNvbG9yLCBvcGFjaXR5OiBudW1iZXIsIG9wZXJhdGlvbjogRUNvbXBvc2l0aW5nT3BlcmF0aW9uLCB0aGlja25lc3M6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGxpbmVzOiBJTGluZVtdID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICBsaW5lcy5wdXNoKHsgZnJvbTogcG9pbnRzW2ldLCB0bzogcG9pbnRzW2kgKyAxXSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kcmF3TGluZXMobGluZXMsIGNvbG9yLCBvcGFjaXR5LCBvcGVyYXRpb24sIHRoaWNrbmVzcyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFBsb3R0ZXJCYXNlLCBJSW1hZ2VGaXR0aW5nLCBJUGxvdHRlckluZm8sIElTaXplIH1cclxuIiwiaW1wb3J0IHsgSUxpbmUgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9pLWxpbmVcIjtcclxuaW1wb3J0IHsgSVBvaW50IH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvaS1wb2ludFwiO1xyXG5pbXBvcnQgeyBJU2l6ZSB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL2ktc2l6ZVwiO1xyXG5pbXBvcnQgeyBhcHBseUNhbnZhc0NvbXBvc2l0aW5nLCBFQ29sb3IsIEVDb21wb3NpdGluZ09wZXJhdGlvbiwgcmVzZXRDYW52YXNDb21wb3NpdGluZyB9IGZyb20gXCIuL2NvbXBvc2l0aW5nXCI7XHJcbmltcG9ydCB7IElQbG90dGVySW5mbywgUGxvdHRlckJhc2UgfSBmcm9tIFwiLi9wbG90dGVyLWJhc2VcIjtcclxuXHJcbmltcG9ydCBcIi4uL3BhZ2UtaW50ZXJmYWNlLWdlbmVyYXRlZFwiO1xyXG5cclxuaW50ZXJmYWNlIElOYW1lZFBvaW50IGV4dGVuZHMgSVBvaW50IHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuXHJcbn1cclxuaW50ZXJmYWNlIElOYW1lZExpbmUgZXh0ZW5kcyBJTGluZSB7XHJcbiAgICBjb2xvck5hbWU6IHN0cmluZztcclxuXHJcbn1cclxuXHJcbmNsYXNzIFBsb3R0ZXJDYW52YXMyRCBleHRlbmRzIFBsb3R0ZXJCYXNlIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHB1YmxpYyByZWFkb25seSBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGNzc1BpeGVsOiBudW1iZXI7XHJcbiAgICBzZWdtZW50TGluZXM6IElOYW1lZExpbmVbXSA9IFtdO1xyXG4gICAgc2VnUG9pbnRzOiBJTmFtZWRQb2ludFtdID0gW107XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FudmFzID0gUGFnZS5DYW52YXMuZ2V0Q2FudmFzKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHsgYWxwaGE6IGZhbHNlIH0pO1xyXG4gICAgICAgIHRoaXMuY3NzUGl4ZWwgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA/PyAxO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgYWN0dWFsV2lkdGggPSBNYXRoLmZsb29yKHRoaXMuY3NzUGl4ZWwgKiB0aGlzLmNhbnZhcy5jbGllbnRXaWR0aCk7XHJcbiAgICAgICAgY29uc3QgYWN0dWFsSGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLmNzc1BpeGVsICogdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY2FudmFzLndpZHRoICE9PSBhY3R1YWxXaWR0aCB8fCB0aGlzLmNhbnZhcy5oZWlnaHQgIT09IGFjdHVhbEhlaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IGFjdHVhbFdpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSBhY3R1YWxIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0aWFsaXplKGluZm9zOiBJUGxvdHRlckluZm8pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gaW5mb3MuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5saW5lSm9pbiA9IFwicm91bmRcIjtcclxuICAgICAgICByZXNldENhbnZhc0NvbXBvc2l0aW5nKHRoaXMuY29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1lbXB0eVxyXG4gICAgcHVibGljIGZpbmFsaXplKCk6IHZvaWQgeyB9XHJcblxyXG4gICAgcHVibGljIHNldCBibHVyKHZhbHVlOiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuc3R5bGUuZmlsdGVyID0gXCJcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHlsZS5maWx0ZXIgPSBgYmx1cigke3ZhbHVlfXB4KWA7IC8vIHNpbXBsZSBibHVyIHN1cHBvcnRlZCBldmVyeXdoZXJlIGJ1dCB3aXRoIGFydGlmYWN0cyBvbiB0aGUgZWRnZXNcclxuICAgICAgICAgICAgLy8gYXJ0aWZhY3QtZnJlZSBibHVyLCBidXQgbm90IHN1cHBvcnRlZCBldmVyeXdoZXJlXHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLmZpbHRlciA9IGB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyclM0UlM0NmaWx0ZXIgaWQ9J2EnIHg9JzAnIHk9JzAnIHdpZHRoPScxJyBoZWlnaHQ9JzEnJTNFJTNDZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPScke3ZhbHVlfScgcmVzdWx0PSdiJy8lM0UlM0NmZU1vcnBob2xvZ3kgb3BlcmF0b3I9J2RpbGF0ZScgcmFkaXVzPScke3ZhbHVlfScvJTNFICUzQ2ZlTWVyZ2UlM0UlM0NmZU1lcmdlTm9kZS8lM0UlM0NmZU1lcmdlTm9kZSBpbj0nYicvJTNFJTNDL2ZlTWVyZ2UlM0UlM0MvZmlsdGVyJTNFJTNDL3N2ZyUzRSNhXCIpYDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXdMaW5lcyhsaW5lczogSUxpbmVbXSwgY29sb3I6IEVDb2xvciwgb3BhY2l0eTogbnVtYmVyLCBvcGVyYXRpb246IEVDb21wb3NpdGluZ09wZXJhdGlvbiwgdGhpY2tuZXNzOiBudW1iZXIpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+PSAxKSB7XHJcbiAgICAgICAgICAgIGFwcGx5Q2FudmFzQ29tcG9zaXRpbmcodGhpcy5jb250ZXh0LCBjb2xvciwgb3BhY2l0eSwgb3BlcmF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5saW5lV2lkdGggPSB0aGlja25lc3MgKiB0aGlzLmNzc1BpeGVsO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZHJhd2RsaW5lIHg6ICcgKyBsaW5lLmZyb20ueCArICd5OiAnK2xpbmUuZnJvbS55KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlZ21lbnRMaW5lc1t0aGlzLnNlZ21lbnRMaW5lcy5sZW5ndGhdID0geyBmcm9tOiBsaW5lLmZyb20sIHRvOiBsaW5lLnRvLCBjb2xvck5hbWU6IGNvbG9yKycnIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQubW92ZVRvKGxpbmUuZnJvbS54ICogdGhpcy5jc3NQaXhlbCwgbGluZS5mcm9tLnkgKiB0aGlzLmNzc1BpeGVsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8obGluZS50by54ICogdGhpcy5jc3NQaXhlbCwgbGluZS50by55ICogdGhpcy5jc3NQaXhlbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlc2V0Q2FudmFzQ29tcG9zaXRpbmcodGhpcy5jb250ZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXdQb2ludHMocG9pbnRzOiBJUG9pbnRbXSwgY29sb3I6IHN0cmluZywgZGlhbWV0ZXI6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmIChwb2ludHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IFwibm9uZVwiO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBwb2ludCBvZiBwb2ludHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VnUG9pbnRzW3RoaXMuc2VnUG9pbnRzLmxlbmd0aF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogcG9pbnQueCxcclxuICAgICAgICAgICAgICAgICAgICB5OiBwb2ludC55LFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdOYWlsIC0nICsgdGhpcy5zZWdQb2ludHMubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5hcmMocG9pbnQueCAqIHRoaXMuY3NzUGl4ZWwsIHBvaW50LnkgKiB0aGlzLmNzc1BpeGVsLCAwLjUgKiBkaWFtZXRlciAqIHRoaXMuY3NzUGl4ZWwsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzaXplKCk6IElTaXplIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3aWR0aDogTWF0aC5mbG9vcih0aGlzLmNhbnZhcy53aWR0aCAvIHRoaXMuY3NzUGl4ZWwpLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGguZmxvb3IodGhpcy5jYW52YXMuaGVpZ2h0IC8gdGhpcy5jc3NQaXhlbCksXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZWdtZW50KCkge1xyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgbGV0IHNlZ21lbnRGcm9tUG9pbnQ6IElOYW1lZFBvaW50W10gPSBbXTtcclxuICAgICAgICBsZXQgc2VnbWVudFRvUG9pbnQ6IElOYW1lZFBvaW50W10gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2VnbWVudExpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5zZWdQb2ludHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2VnbWVudExpbmVzW2ldLmZyb20ueCArJzsnK25hbWVkUG9pbnRzW2pdLngpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VnbWVudExpbmVzW2ldLmZyb20ueCA9PSB0aGlzLnNlZ1BvaW50c1tqXS54ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWdtZW50TGluZXNbaV0uZnJvbS55ID09IHRoaXMuc2VnUG9pbnRzW2pdLnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50RnJvbVBvaW50W2ldID0gdGhpcy5zZWdQb2ludHNbal1cclxuICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlZ21lbnRMaW5lc1tpXS50by54ID09IHRoaXMuc2VnUG9pbnRzW2pdLnggJiZcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlZ21lbnRMaW5lc1tpXS50by55ID09IHRoaXMuc2VnUG9pbnRzW2pdLnkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50VG9Qb2ludFtpXSA9IHRoaXMuc2VnUG9pbnRzW2pdXHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VnbWVudExpbmVzW2ldLmNvbG9yTmFtZSsgc2VnbWVudEZyb21Qb2ludFtpXS5uYW1lICsgJyB0byAnICsgc2VnbWVudFRvUG9pbnRbaV0ubmFtZSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBQbG90dGVyQ2FudmFzMkQgfTtcclxuXHJcbiIsImltcG9ydCB7IElMaW5lIH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvaS1saW5lXCI7XHJcbmltcG9ydCB7IElQb2ludCB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL2ktcG9pbnRcIjtcclxuaW1wb3J0IHsgY29tcHV0ZVJhd0NvbG9yLCBFQ29sb3IsIEVDb21wb3NpdGluZ09wZXJhdGlvbiwgdXNlQWR2YW5jZWRDb21wb3NpdGluZyB9IGZyb20gXCIuL2NvbXBvc2l0aW5nXCI7XHJcbmltcG9ydCB7IFBsb3R0ZXJCYXNlLCBJUGxvdHRlckluZm8sIElTaXplIH0gZnJvbSBcIi4vcGxvdHRlci1iYXNlXCI7XHJcbmltcG9ydCB7IFhNTFdyaXRlciB9IGZyb20gXCIuL3htbC13cml0ZXJcIjtcclxuXHJcbmNvbnN0IFdJRFRIID0gMTAwMDtcclxuY29uc3QgSEVJR0hUID0gMTAwMDtcclxuXHJcbmNvbnN0IEJMVVJfRUZGRUNUX0lEID0gXCJnYXVzc2lhbkJsdXJcIjtcclxuXHJcbmNsYXNzIFBsb3R0ZXJTVkcgZXh0ZW5kcyBQbG90dGVyQmFzZSB7XHJcbiAgICBwcml2YXRlIGhhc0JsdXI6IGJvb2xlYW47XHJcbiAgICBwcml2YXRlIHdyaXRlcjogWE1MV3JpdGVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1lbXB0eVxyXG4gICAgcHVibGljIHJlc2l6ZSgpOiB2b2lkIHtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZShpbmZvczogSVBsb3R0ZXJJbmZvKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy53cml0ZXIgPSBuZXcgWE1MV3JpdGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaGFzQmx1ciA9IGluZm9zLmJsdXIgPiAwO1xyXG5cclxuICAgICAgICB0aGlzLndyaXRlci5hZGRMaW5lKGA8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJub1wiPz5gKTtcclxuICAgICAgICB0aGlzLndyaXRlci5zdGFydEJsb2NrKGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2ZXJzaW9uPVwiMS4xXCIgdmlld0JveD1cIjAgMCAke1dJRFRIfSAke0hFSUdIVH1cIj5gKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaGFzQmx1cikge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlci5zdGFydEJsb2NrKGA8ZGVmcz5gKTtcclxuICAgICAgICAgICAgdGhpcy53cml0ZXIuc3RhcnRCbG9jayhgPGZpbHRlciBpZD1cIiR7QkxVUl9FRkZFQ1RfSUR9XCIgeD1cIjBcIiB5PVwiMFwiPmApO1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlci5hZGRMaW5lKGA8ZmVHYXVzc2lhbkJsdXIgaW49XCJTb3VyY2VHcmFwaGljXCIgc3RkRGV2aWF0aW9uPVwiJHtpbmZvcy5ibHVyfVwiLz5gKTtcclxuICAgICAgICAgICAgdGhpcy53cml0ZXIuZW5kQmxvY2soYDwvZmlsdGVyPmApO1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlci5lbmRCbG9jayhgPC9kZWZzPmApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy53cml0ZXIuc3RhcnRCbG9jayhgPGcgZmlsdGVyPVwidXJsKCMke0JMVVJfRUZGRUNUX0lEfSlcIj5gKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBtYXJnaW4gPSAxMDtcclxuICAgICAgICB0aGlzLndyaXRlci5hZGRMaW5lKGA8cmVjdCBmaWxsPVwid2hpdGVcIiBzdHJva2U9XCJub25lXCIgeD1cIiR7LW1hcmdpbn1cIiB5PVwiJHstbWFyZ2lufVwiIHdpZHRoPVwiJHtXSURUSCArIDIgKiBtYXJnaW59XCIgaGVpZ2h0PVwiJHtIRUlHSFQgKyAyICogbWFyZ2lufVwiLz5gKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZmluYWxpemUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzQmx1cikge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlci5lbmRCbG9jayhgPC9nPmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLndyaXRlci5lbmRCbG9jayhgPC9zdmc+YCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXdMaW5lcyhsaW5lczogSUxpbmVbXSwgY29sb3I6IEVDb2xvciwgb3BhY2l0eTogbnVtYmVyLCBvcGVyYXRpb246IEVDb21wb3NpdGluZ09wZXJhdGlvbiwgdGhpY2tuZXNzOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAobGluZXMubGVuZ3RoID49IDEpIHtcclxuXHJcbiAgICAgICAgICAgIGxldCBzdHJva2VDb2xvcjogc3RyaW5nO1xyXG4gICAgICAgICAgICBpZiAodXNlQWR2YW5jZWRDb21wb3NpdGluZygpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlci5zdGFydEJsb2NrKGA8ZGVmcz5gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVyLnN0YXJ0QmxvY2soYDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5gKTtcclxuICAgICAgICAgICAgICAgIHRoaXMud3JpdGVyLnN0YXJ0QmxvY2soYDwhW0NEQVRBW2ApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZXIuYWRkTGluZShgbGluZSB7IG1peC1ibGVuZC1tb2RlOiBkaWZmZXJlbmNlOyB9YCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3BlcmF0aW9uID09PSBFQ29tcG9zaXRpbmdPcGVyYXRpb24uTElHSFRFTikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud3JpdGVyLmFkZExpbmUoYHN2ZyB7IGZpbHRlcjogaW52ZXJ0KDEpOyBiYWNrZ3JvdW5kOiBibGFjazsgfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZXIuZW5kQmxvY2soYF1dPmApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZXIuZW5kQmxvY2soYDwvc3R5bGU+YCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlci5lbmRCbG9jayhgPC9kZWZzPmApO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gTWF0aC5jZWlsKDI1NSAqIG9wYWNpdHkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmF3UkdCID0gY29tcHV0ZVJhd0NvbG9yKGNvbG9yKTtcclxuICAgICAgICAgICAgICAgIHN0cm9rZUNvbG9yID0gYHJnYigke3Jhd1JHQi5yICogdmFsdWV9LCAke3Jhd1JHQi5nICogdmFsdWV9LCAke3Jhd1JHQi5iICogdmFsdWV9KWA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9ICh1c2VBZHZhbmNlZENvbXBvc2l0aW5nKCkpID8gMjU1IDogMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJhd1JHQiA9IGNvbXB1dGVSYXdDb2xvcihjb2xvcik7XHJcbiAgICAgICAgICAgICAgICBzdHJva2VDb2xvciA9IGByZ2JhKCR7cmF3UkdCLnIgKiB2YWx1ZX0sICR7cmF3UkdCLmcgKiB2YWx1ZX0sICR7cmF3UkdCLmIgKiB2YWx1ZX0sICR7b3BhY2l0eX0pYDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gbGluZXMgY29udGFpbmVyXHJcbiAgICAgICAgICAgIHRoaXMud3JpdGVyLnN0YXJ0QmxvY2soYDxnIHN0cm9rZT1cIiR7c3Ryb2tlQ29sb3J9XCIgc3Ryb2tlLXdpZHRoPVwiJHt0aGlja25lc3N9XCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIGZpbGw9XCJub25lXCI+YCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53cml0ZXIuYWRkTGluZShgPGxpbmUgeDE9XCIke2xpbmUuZnJvbS54LnRvRml4ZWQoMSl9XCIgeTE9XCIke2xpbmUuZnJvbS55LnRvRml4ZWQoMSl9XCIgeDI9XCIke2xpbmUudG8ueC50b0ZpeGVkKDEpfVwiIHkyPVwiJHtsaW5lLnRvLnkudG9GaXhlZCgxKX1cIi8+YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy53cml0ZXIuZW5kQmxvY2soYDwvZz5gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXdQb2ludHMocG9pbnRzOiBJUG9pbnRbXSwgY29sb3I6IHN0cmluZywgZGlhbWV0ZXI6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGlmIChwb2ludHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLndyaXRlci5zdGFydEJsb2NrKGA8ZyBmaWxsPVwiJHtjb2xvcn1cIiBzdHJva2U9XCJub25lXCI+YCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgcG9pbnQgb2YgcG9pbnRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlci5hZGRMaW5lKGA8Y2lyY2xlIGN4PVwiJHtwb2ludC54LnRvRml4ZWQoMSl9XCIgY3k9XCIke3BvaW50LnkudG9GaXhlZCgxKX1cIiByPVwiJHswLjUgKiBkaWFtZXRlcn1cIi8+YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy53cml0ZXIuZW5kQmxvY2soYDwvZz5gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGV4cG9ydCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLndyaXRlci5yZXN1bHQ7XHJcbiAgICAgICAgY29uc29sZS5sb2coYENvbmNhdGVuYXRpb24gdG9vayAke0RhdGUubm93KCkgLSBzdGFydH0gbXMuYCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHNpemUoKTogSVNpemUge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBXSURUSCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBIRUlHSFQsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgUGxvdHRlclNWRyB9XHJcbiIsImNsYXNzIFhNTFdyaXRlciB7XHJcbiAgICBwcml2YXRlIGluZGVudGF0aW9uTGV2ZWw6IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgcmVzdWx0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGluZXMuam9pbihcIlxcblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRCbG9jayhsaW5lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFkZExpbmUobGluZSk7XHJcbiAgICAgICAgdGhpcy5pbmRlbnRhdGlvbkxldmVsKys7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVuZEJsb2NrKGxpbmU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5kZW50YXRpb25MZXZlbC0tO1xyXG4gICAgICAgIHRoaXMuYWRkTGluZShsaW5lKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkTGluZShsaW5lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmxpbmVzLnB1c2godGhpcy5wcmVmaXggKyBsaW5lKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldCBwcmVmaXgoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gXCJcXHRcIi5yZXBlYXQodGhpcy5pbmRlbnRhdGlvbkxldmVsKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgWE1MV3JpdGVyIH07XHJcbiIsImltcG9ydCB7IElQb2ludCB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL2ktcG9pbnRcIjtcclxuaW1wb3J0IHsgSVNpemUgfSBmcm9tIFwiLi4vaW50ZXJmYWNlcy9pLXNpemVcIjtcclxuaW1wb3J0IHsgRU1vZGUsIEVTaGFwZSwgUGFyYW1ldGVycyB9IGZyb20gXCIuLi9wYXJhbWV0ZXJzXCI7XHJcbmltcG9ydCB7IFBsb3R0ZXJCYXNlIH0gZnJvbSBcIi4uL3Bsb3R0ZXIvcGxvdHRlci1iYXNlXCI7XHJcbmltcG9ydCB7IFRyYW5zZm9ybWF0aW9uIH0gZnJvbSBcIi4vdHJhbnNmb3JtYXRpb25cIjtcclxuaW1wb3J0IHsgYXBwbHlDYW52YXNDb21wb3NpdGluZywgRUNvbG9yLCBFQ29tcG9zaXRpbmdPcGVyYXRpb24sIHJlc2V0Q2FudmFzQ29tcG9zaXRpbmcgfSBmcm9tIFwiLi4vcGxvdHRlci9jb21wb3NpdGluZ1wiO1xyXG5cclxuaW1wb3J0IHsgVGhyZWFkTW9ub2Nocm9tZSB9IGZyb20gXCIuL3RocmVhZC90aHJlYWQtbW9ub2Nocm9tZVwiO1xyXG5pbXBvcnQgeyBUaHJlYWRSZWRCbHVlR3JlZW4gfSBmcm9tIFwiLi90aHJlYWQvdGhyZWFkLXJlZC1ncmVlbi1ibHVlXCI7XHJcbmltcG9ydCB7IFRocmVhZEJhc2UgfSBmcm9tIFwiLi90aHJlYWQvdGhyZWFkLWJhc2VcIjtcclxuXHJcbmNvbnN0IE1JTl9TQUZFX05VTUJFUiA9IC05MDA3MTk5MjU0NzQwOTkxO1xyXG5jb25zdCBUV09fUEkgPSAyICogTWF0aC5QSTtcclxuXHJcbmZ1bmN0aW9uIGNsYW1wKHg6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGlmICh4IDwgbWluKSB7XHJcbiAgICAgICAgcmV0dXJuIG1pbjtcclxuICAgIH0gZWxzZSBpZiAoeCA+IG1heCkge1xyXG4gICAgICAgIHJldHVybiBtYXg7XHJcbiAgICB9XHJcbiAgICByZXR1cm4geDtcclxufVxyXG5cclxuZnVuY3Rpb24gbWl4KGE6IG51bWJlciwgYjogbnVtYmVyLCB4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIGEgKiAoMSAtIHgpICsgYiAqIHg7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc3RhbmNlKHAxOiBJUG9pbnQsIHAyOiBJUG9pbnQpOiBudW1iZXIge1xyXG4gICAgY29uc3QgZFggPSBwMS54IC0gcDIueDtcclxuICAgIGNvbnN0IGRZID0gcDEueSAtIHAyLnk7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KGRYICogZFggKyBkWSAqIGRZKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmFuZG9tSXRlbTxUPihsaXN0OiBUW10pOiBUIHtcclxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsaXN0Lmxlbmd0aCk7XHJcbiAgICByZXR1cm4gbGlzdFtyYW5kb21JbmRleF07XHJcbn1cclxuXHJcbmludGVyZmFjZSBJUGVnIHtcclxuICAgIHg6IG51bWJlcjtcclxuICAgIHk6IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIElTZWdtZW50IHtcclxuICAgIHBlZzE6IElQZWc7XHJcbiAgICBwZWcyOiBJUGVnO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSUVycm9yTWVhc3VyZSB7XHJcbiAgICBhdmVyYWdlOiBudW1iZXI7XHJcbiAgICB2YXJpYW5jZTogbnVtYmVyO1xyXG4gICAgbWVhblNxdWFyZTogbnVtYmVyO1xyXG59XHJcblxyXG50eXBlIEluZGljYXRvclVwZGF0ZUZ1bmN0aW9uID0gKGluZGljYXRvcklkOiBzdHJpbmcsIGluZGljYXRvclZhbHVlOiBzdHJpbmcpID0+IHVua25vd247XHJcblxyXG4vKipcclxuICogQ2xhc3MgdXNlZCB0byBjb21wdXRlIHdoaWNoIHRocmVhZCBwYXRoIGlzIHRoZSBiZXN0IGNob2ljZS5cclxuICovXHJcbmNsYXNzIFRocmVhZENvbXB1dGVyIHtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgc291cmNlSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGhpZGRlbkNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGhpZGRlbkNhbnZhc0NvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIHByaXZhdGUgaGlkZGVuQ2FudmFzRGF0YTogSW1hZ2VEYXRhID0gbnVsbFxyXG4gICAgcHJpdmF0ZSBoaWRkZW5DYW52YXNTY2FsZTogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgZXJyb3I6IElFcnJvck1lYXN1cmU7XHJcblxyXG4gICAgcHJpdmF0ZSBwZWdzOiBJUGVnW107XHJcblxyXG4gICAgcHJpdmF0ZSBsaW5lT3BhY2l0eTogbnVtYmVyOyAvLyBpbiB0aGUgZmluYWwgcmVzdWx0XHJcbiAgICBwcml2YXRlIGxpbmVPcGFjaXR5SW50ZXJuYWw6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbGluZVRoaWNrbmVzczogbnVtYmVyOyAvLyBhYnN0cmFjdCB1bml0XHJcblxyXG4gICAgcHJpdmF0ZSB0aHJlYWQ6IFRocmVhZEJhc2U7XHJcblxyXG4gICAgcHJpdmF0ZSBhcmVQZWdzVG9vQ2xvc2U6IChwZWcxOiBJUGVnLCBwZWcyOiBJUGVnKSA9PiBib29sZWFuO1xyXG4gICAgXHJcbiAgICBwdWJsaWMgIGdldCBwZWdzQXJyYXkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wZWdzXHJcbn1cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihpbWFnZTogSFRNTEltYWdlRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuc291cmNlSW1hZ2UgPSBpbWFnZTtcclxuXHJcbiAgICAgICAgdGhpcy5oaWRkZW5DYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIHRoaXMuaGlkZGVuQ2FudmFzQ29udGV4dCA9IHRoaXMuaGlkZGVuQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXNldCgxNiAvIDI1NiwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXdUaHJlYWQocGxvdHRlcjogUGxvdHRlckJhc2UsIG5iU2VnbWVudHNUb0lnbm9yZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdHJhbnNmb3JtYXRpb24gPSB0aGlzLmNvbXB1dGVUcmFuc2Zvcm1hdGlvbihwbG90dGVyLnNpemUpO1xyXG4gICAgICAgIGNvbnN0IGxpbmVXaWR0aCA9ICh0cmFuc2Zvcm1hdGlvbi5zY2FsaW5nICogdGhpcy5oaWRkZW5DYW52YXNTY2FsZSkgKiB0aGlzLmxpbmVUaGlja25lc3M7XHJcbiAgICAgICAgY29uc3QgY29tcG9zaXRpbmcgPSBQYXJhbWV0ZXJzLmludmVydENvbG9ycyA/IEVDb21wb3NpdGluZ09wZXJhdGlvbi5MSUdIVEVOIDogRUNvbXBvc2l0aW5nT3BlcmF0aW9uLkRBUktFTjtcclxuXHJcbiAgICAgICAgdGhpcy50aHJlYWQuaXRlcmF0ZU9uVGhyZWFkcyhuYlNlZ21lbnRzVG9JZ25vcmUsICh0aHJlYWQ6IElQZWdbXSwgY29sb3I6IEVDb2xvciwpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcG9pbnRzOiBJUG9pbnRbXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBlZyBvZiB0aHJlYWQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBwb2ludCA9IHRyYW5zZm9ybWF0aW9uLnRyYW5zZm9ybShwZWcpO1xyXG4gICAgICAgICAgICAgICAgLy8gcG9pbnQubmFtZSA9IHBvaW50cy5sZW5ndGgrJydcclxuICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKHBvaW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcGxvdHRlci5kcmF3QnJva2VuTGluZShwb2ludHMsIGNvbG9yLCB0aGlzLmxpbmVPcGFjaXR5LCBjb21wb3NpdGluZywgbGluZVdpZHRoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZHJhd1BlZ3MocGxvdHRlcjogUGxvdHRlckJhc2UpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm1hdGlvbiA9IHRoaXMuY29tcHV0ZVRyYW5zZm9ybWF0aW9uKHBsb3R0ZXIuc2l6ZSk7XHJcbiAgICAgICAgY29uc3QgcG9pbnRTaXplID0gMC41ICogKHRyYW5zZm9ybWF0aW9uLnNjYWxpbmcgKiB0aGlzLmhpZGRlbkNhbnZhc1NjYWxlKTtcclxuXHJcbiAgICAgICAgY29uc3QgcG9pbnRzOiBJUG9pbnRbXSA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgcGVnIG9mIHRoaXMucGVncykge1xyXG4gICAgICAgICAgICBsZXQgcG9pbnQgPSB0cmFuc2Zvcm1hdGlvbi50cmFuc2Zvcm0ocGVnKTtcclxuICAgICAgICAgICAgLy8gcG9pbnQubmFtZSA9IHBvaW50cy5sZW5ndGgrJyc7XHJcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHBvaW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHBsb3R0ZXIuZHJhd1BvaW50cyhwb2ludHMsIFwicmVkXCIsIHBvaW50U2l6ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRyYXdEZWJ1Z1ZpZXcodGFyZ2V0Q29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZCB7XHJcbiAgICAgICAgdGFyZ2V0Q29udGV4dC5kcmF3SW1hZ2UodGhpcy5oaWRkZW5DYW52YXMsIDAsIDAsIHRoaXMuaGlkZGVuQ2FudmFzLndpZHRoLCB0aGlzLmhpZGRlbkNhbnZhcy5oZWlnaHQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgaXMgbm90aGluZyBtb3JlIHRvIGNvbXB1dGUgKi9cclxuICAgIHB1YmxpYyBjb21wdXRlTmV4dFNlZ21lbnRzKG1heE1pbGxpc2Vjb25kc1Rha2VuOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xyXG5cclxuICAgICAgICBjb25zdCB0YXJnZXROYlNlZ21lbnRzID0gUGFyYW1ldGVycy5uYkxpbmVzO1xyXG4gICAgICAgIGlmICh0aGlzLm5iU2VnbWVudHMgPT09IHRhcmdldE5iU2VnbWVudHMpIHtcclxuICAgICAgICAgICAgLy8gbm8gbmV3IHNlZ21lbnQgdG8gY29tcHV0ZVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm5iU2VnbWVudHMgPiB0YXJnZXROYlNlZ21lbnRzKSB7XHJcbiAgICAgICAgICAgIC8vIHdlIGRyZXcgdG9vIG1hbnkgbGluZXMgYWxyZWFkeSwgcmVtb3ZlcyB0aGUgZXhjZXNzXHJcbiAgICAgICAgICAgIHRoaXMudGhyZWFkLmxvd2VyTmJTZWdtZW50cyh0YXJnZXROYlNlZ21lbnRzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJlZHJhdyB0aGUgaGlkZGVuIGNhbnZhcyBmcm9tIHNjcmF0Y2hcclxuICAgICAgICAgICAgdGhpcy5yZXNldEhpZGRlbkNhbnZhcygpO1xyXG4gICAgICAgICAgICB0aGlzLnRocmVhZC5pdGVyYXRlT25UaHJlYWRzKDAsICh0aHJlYWQ6IElQZWdbXSwgY29sb3I6IEVDb2xvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBwbHlDYW52YXNDb21wb3NpdGluZyh0aGlzLmhpZGRlbkNhbnZhc0NvbnRleHQsIGNvbG9yLCB0aGlzLmxpbmVPcGFjaXR5SW50ZXJuYWwsIEVDb21wb3NpdGluZ09wZXJhdGlvbi5MSUdIVEVOKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpUGVnID0gMDsgaVBlZyArIDEgPCB0aHJlYWQubGVuZ3RoOyBpUGVnKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdTZWdtZW50T25IaWRkZW5DYW52YXModGhyZWFkW2lQZWddLCB0aHJlYWRbaVBlZyArIDFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVFcnJvcigpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBsYXN0Q29sb3I6IEVDb2xvciA9IG51bGw7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMubmJTZWdtZW50cyA8IHRhcmdldE5iU2VnbWVudHMgJiYgcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCA8IG1heE1pbGxpc2Vjb25kc1Rha2VuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRocmVhZFRvR3JvdyA9IHRoaXMudGhyZWFkLmdldFRocmVhZFRvR3JvdygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxhc3RDb2xvciAhPT0gdGhyZWFkVG9Hcm93LmNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBhcHBseUNhbnZhc0NvbXBvc2l0aW5nKHRoaXMuaGlkZGVuQ2FudmFzQ29udGV4dCwgdGhyZWFkVG9Hcm93LmNvbG9yLCB0aGlzLmxpbmVPcGFjaXR5SW50ZXJuYWwsIEVDb21wb3NpdGluZ09wZXJhdGlvbi5MSUdIVEVOKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGhyZWFkLmVuYWJsZVNhbXBsaW5nRm9yKHRocmVhZFRvR3Jvdy5jb2xvcik7XHJcbiAgICAgICAgICAgICAgICBsYXN0Q29sb3IgPSB0aHJlYWRUb0dyb3cuY29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb21wdXRlU2VnbWVudCh0aHJlYWRUb0dyb3cudGhyZWFkKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5iU2VnbWVudHMgJSAxMDAgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZUVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIG9wYWNpdHkgaW4gWzAsMV1cclxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgYXQgbGVhc3Qgb25lIHBhcmFtZXRlciBjaGFuZ2VkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyByZXNldChvcGFjaXR5OiBudW1iZXIsIGxpbmV0aGlja25lc3M6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubGluZU9wYWNpdHkgPSBvcGFjaXR5O1xyXG4gICAgICAgIHRoaXMubGluZVRoaWNrbmVzcyA9IGxpbmV0aGlja25lc3M7XHJcblxyXG4gICAgICAgIHRoaXMuaGlkZGVuQ2FudmFzU2NhbGUgPSBQYXJhbWV0ZXJzLnF1YWxpdHk7XHJcblxyXG4gICAgICAgIGlmIChQYXJhbWV0ZXJzLm1vZGUgPT09IEVNb2RlLk1PTk9DSFJPTUUpIHtcclxuICAgICAgICAgICAgdGhpcy50aHJlYWQgPSBuZXcgVGhyZWFkTW9ub2Nocm9tZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudGhyZWFkID0gbmV3IFRocmVhZFJlZEJsdWVHcmVlbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0SGlkZGVuQ2FudmFzKCk7XHJcblxyXG4gICAgICAgIHRoaXMucGVncyA9IHRoaXMuY29tcHV0ZVBlZ3MoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlSW5kaWNhdG9ycyh1cGRhdGVGdW5jdGlvbjogSW5kaWNhdG9yVXBkYXRlRnVuY3Rpb24pOiB2b2lkIHtcclxuICAgICAgICB1cGRhdGVGdW5jdGlvbihcInBlZ3MtY291bnRcIiwgdGhpcy5wZWdzLmxlbmd0aC50b1N0cmluZygpKTtcclxuICAgICAgICB1cGRhdGVGdW5jdGlvbihcInNlZ21lbnRzLWNvdW50XCIsIHRoaXMubmJTZWdtZW50cy50b1N0cmluZygpKTtcclxuICAgICAgICB1cGRhdGVGdW5jdGlvbihcImVycm9yLWF2ZXJhZ2VcIiwgdGhpcy5lcnJvci5hdmVyYWdlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHVwZGF0ZUZ1bmN0aW9uKFwiZXJyb3ItbWVhbi1zcXVhcmVcIiwgdGhpcy5lcnJvci5tZWFuU3F1YXJlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIHVwZGF0ZUZ1bmN0aW9uKFwiZXJyb3ItdmFyaWFuY2VcIiwgdGhpcy5lcnJvci52YXJpYW5jZS50b1N0cmluZygpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IG5iU2VnbWVudHMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50aHJlYWQudG90YWxOYlNlZ21lbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaW5zdHJ1Y3Rpb25zKCk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKFBhcmFtZXRlcnMubW9kZSAhPT0gRU1vZGUuTU9OT0NIUk9NRSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJJbnN0cnVjdGlvbnMgYXJlIG9ubHkgYXZhaWxhYmxlIGZvciBtb25vY2hyb21lIG1vZGUuXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChQYXJhbWV0ZXJzLmludmVydENvbG9ycykge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJJbnN0cnVjdGlvbnMgYXJlIG9ubHkgYXZhaWxhYmxlIGZvciBibGFjayB0aHJlYWQuXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZG9tYWluV2lkdGggPSAtMTtcclxuICAgICAgICBsZXQgZG9tYWluSGVpZ2h0ID0gLTE7XHJcbiAgICAgICAgZm9yIChjb25zdCBwZWcgb2YgdGhpcy5wZWdzKSB7XHJcbiAgICAgICAgICAgIGlmIChkb21haW5XaWR0aCA8IHBlZy54KSB7XHJcbiAgICAgICAgICAgICAgICBkb21haW5XaWR0aCA9IHBlZy54O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChkb21haW5IZWlnaHQgPCBwZWcueSkge1xyXG4gICAgICAgICAgICAgICAgZG9tYWluSGVpZ2h0ID0gcGVnLnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGluc3RydWN0aW9uczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChcIkdlbmVyYXRlZCBieSBodHRwczovL3BpZWxsYXJkai5naXRodWIuaW8vaW1hZ2Utc3R5bGl6YXRpb24tdGhyZWFkaW5nLlxcblwiKTtcclxuICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChcIkhlcmUgYXJlIGluc3RydWN0aW9ucyB0byByZXByb2R1Y2UgdGhpcyBpbiByZWFsIGxpZmUuIEZvciB0aGUgYmVzdCByZXN1bHQsIG1ha2Ugc3VyZSB5b3UgdXNlZCB0aGUgd2Vic2l0ZSBhdCB0aGUgaGlnaGVzdCBxdWFsaXR5IG1vZGUgYW5kIHRoZSBoaWdoZXN0IHRocmVhZCBvcGFjaXR5LlxcblwiKTtcclxuXHJcbiAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goYFNwYWNlIHVuaXRzIHVzZWQgYmVsb3cgYXJlIGFic3RyYWN0LCBqdXN0IHNjYWxlIGl0IHRvIHdoYXRldmVyIHNpemUgeW91IHdhbnQuIFR5cGljYWxseSwgeW91IGNhbiBjaG9vc2UgMSB1bml0ID0gMSBtaWxsaW1ldGVyLmApO1xyXG4gICAgICAgIGluc3RydWN0aW9ucy5wdXNoKGBDb21wdXRlZCBmb3IgYSB0b3RhbCBzaXplIG9mICR7ZG9tYWluV2lkdGh9eCR7ZG9tYWluSGVpZ2h0fS5gKTtcclxuICAgICAgICBjb25zdCB0aHJlYWRUaGlja25lc3MgPSB0aGlzLmxpbmVUaGlja25lc3MgKiB0aGlzLmhpZGRlbkNhbnZhc1NjYWxlO1xyXG4gICAgICAgIGluc3RydWN0aW9ucy5wdXNoKGBDb21wdXRlZCBmb3IgYSBibGFjayB0aHJlYWQgb2Ygd2lkdGggJHt0aHJlYWRUaGlja25lc3N9IGFuZCBvcGFjaXR5ICR7dGhpcy5saW5lT3BhY2l0eX0gKHRoaXMgaXMgZXF1aXZhbGVudCB0byBhbiBvcGFxdWUgdGhyZWFkIG9mIHdpZHRoICR7dGhyZWFkVGhpY2tuZXNzICogdGhpcy5saW5lT3BhY2l0eX0pLmApO1xyXG5cclxuICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChcIlxcbkZpcnN0IGhlcmUgYXJlIHRoZSBwb3NpdGlvbnMgb2YgdGhlIHBlZ3M6XCIpO1xyXG5cclxuICAgICAgICBpbnRlcmZhY2UgSU5hbWVkUGVnIGV4dGVuZHMgSVBlZyB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5hbWVkUGVncyA9IHRoaXMucGVncyBhcyBJTmFtZWRQZWdbXTtcclxuICAgICAgICBmb3IgKGxldCBpUCA9IDA7IGlQIDwgbmFtZWRQZWdzLmxlbmd0aDsgaVArKykge1xyXG4gICAgICAgICAgICBuYW1lZFBlZ3NbaVBdLm5hbWUgPSBgUEVHXyR7aVB9YDtcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goYCAgLSAke25hbWVkUGVnc1tpUF0ubmFtZX06IHg9JHtuYW1lZFBlZ3NbaVBdLngudG9GaXhlZCgyKX0gOyB5PSR7bmFtZWRQZWdzW2lQXS55LnRvRml4ZWQoMil9YCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChcIlxcblRoZW4gaGVyZSBhcmUgdGhlIHN0ZXBzIG9mIHRoZSB0aHJlYWQ6XCIpO1xyXG5cclxuICAgICAgICB0aGlzLnRocmVhZC5pdGVyYXRlT25UaHJlYWRzKDAsICh0aHJlYWQ6IElQZWdbXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuYW1lZFRocmVhZCA9IHRocmVhZCBhcyBJTmFtZWRQZWdbXTtcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goYCAgLSBGaXJzdCBzdGFydCBmcm9tICR7bmFtZWRUaHJlYWRbMF0ubmFtZX1gKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaVAgPSAxOyBpUCA8IG5hbWVkVGhyZWFkLmxlbmd0aDsgaVArKykge1xyXG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goYCAgLSB0aGVuIGdvIHRvICR7bmFtZWRUaHJlYWRbaVBdLm5hbWV9ICh0aGlzIGlzIHNlZ21lbnQgJHtpUH0gLyAke25hbWVkVGhyZWFkLmxlbmd0aCAtIDF9KWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBpbnN0cnVjdGlvbnMuam9pbihcIlxcblwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRpYWxpemVIaWRkZW5DYW52YXNMaW5lUHJvcGVydGllcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0aGVvcmljYWxUaGlja25lcyA9IHRoaXMubGluZVRoaWNrbmVzcyAqIHRoaXMuaGlkZGVuQ2FudmFzU2NhbGU7XHJcblxyXG4gICAgICAgIGlmICh0aGVvcmljYWxUaGlja25lcyA8PSAxKSB7XHJcbiAgICAgICAgICAgIC8vIGRvIG5vdCBnbyBiZWxvdyBhIGxpbmUgd2lkdGggb2YgMSBiZWNhdXNlIGl0IGNyZWF0ZXMgYXJ0aWZhY3QuXHJcbiAgICAgICAgICAgIC8vIGluc3RlYWQsIGxvd2VyIHRoZSBsaW5lcyBvcGFjaXR5LlxyXG4gICAgICAgICAgICB0aGlzLmxpbmVPcGFjaXR5SW50ZXJuYWwgPSAwLjUgKiB0aGlzLmxpbmVPcGFjaXR5ICogdGhlb3JpY2FsVGhpY2tuZXM7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZGVuQ2FudmFzQ29udGV4dC5saW5lV2lkdGggPSAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubGluZU9wYWNpdHlJbnRlcm5hbCA9IDAuNSAqIHRoaXMubGluZU9wYWNpdHk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZGVuQ2FudmFzQ29udGV4dC5saW5lV2lkdGggPSB0aGVvcmljYWxUaGlja25lcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb21wdXRlU2VnbWVudCh0aHJlYWQ6IElQZWdbXSk6IHZvaWQge1xyXG4gICAgICAgIGxldCBsYXN0UGVnOiBJUGVnO1xyXG4gICAgICAgIGxldCBuZXh0UGVnOiBJUGVnO1xyXG5cclxuICAgICAgICBpZiAodGhyZWFkLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFydGluZ1NlZ21lbnQgPSB0aGlzLmNvbXB1dGVCZXN0U3RhcnRpbmdTZWdtZW50KCk7XHJcbiAgICAgICAgICAgIHRocmVhZC5wdXNoKHN0YXJ0aW5nU2VnbWVudC5wZWcxKTtcclxuICAgICAgICAgICAgbGFzdFBlZyA9IHN0YXJ0aW5nU2VnbWVudC5wZWcxO1xyXG4gICAgICAgICAgICBuZXh0UGVnID0gc3RhcnRpbmdTZWdtZW50LnBlZzI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGFzdFBlZyA9IHRocmVhZFt0aHJlYWQubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIGNvbnN0IEhJU1RPUllfU0laRSA9IE1hdGgubWluKHRocmVhZC5sZW5ndGgsIDIwKTtcclxuICAgICAgICAgICAgY29uc3QgcHJldm91c1BlZ3MgPSB0aHJlYWQuc2xpY2UoLUhJU1RPUllfU0laRSk7XHJcbiAgICAgICAgICAgIG5leHRQZWcgPSB0aGlzLmNvbXB1dGVCZXN0TmV4dFBlZyhsYXN0UGVnLCBwcmV2b3VzUGVncyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aHJlYWQucHVzaChuZXh0UGVnKTtcclxuICAgICAgICB0aGlzLmRyYXdTZWdtZW50T25IaWRkZW5DYW52YXMobGFzdFBlZywgbmV4dFBlZyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZXNldEhpZGRlbkNhbnZhcygpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB3YW50ZWRTaXplID0gVGhyZWFkQ29tcHV0ZXIuY29tcHV0ZUJlc3RTaXplKHRoaXMuc291cmNlSW1hZ2UsIDEwMCAqIHRoaXMuaGlkZGVuQ2FudmFzU2NhbGUpO1xyXG4gICAgICAgIHRoaXMuaGlkZGVuQ2FudmFzLndpZHRoID0gd2FudGVkU2l6ZS53aWR0aDtcclxuICAgICAgICB0aGlzLmhpZGRlbkNhbnZhcy5oZWlnaHQgPSB3YW50ZWRTaXplLmhlaWdodDtcclxuXHJcbiAgICAgICAgcmVzZXRDYW52YXNDb21wb3NpdGluZyh0aGlzLmhpZGRlbkNhbnZhc0NvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuaGlkZGVuQ2FudmFzQ29udGV4dC5kcmF3SW1hZ2UodGhpcy5zb3VyY2VJbWFnZSwgMCwgMCwgd2FudGVkU2l6ZS53aWR0aCwgd2FudGVkU2l6ZS5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBjaGFuZ2UgdGhlIGJhc2UgbGV2ZWwgc28gdGhhdCBwdXJlIHdoaXRlIGJlY29tZXMgbWVkaXVtIGdyZXlcclxuICAgICAgICBjb25zdCBpbWFnZURhdGEgPSB0aGlzLmhpZGRlbkNhbnZhc0NvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHdhbnRlZFNpemUud2lkdGgsIHdhbnRlZFNpemUuaGVpZ2h0KTtcclxuICAgICAgICB0aGlzLnRocmVhZC5hZGp1c3RDYW52YXNEYXRhKGltYWdlRGF0YS5kYXRhLCBQYXJhbWV0ZXJzLmludmVydENvbG9ycyk7XHJcbiAgICAgICAgdGhpcy5oaWRkZW5DYW52YXNDb250ZXh0LnB1dEltYWdlRGF0YShpbWFnZURhdGEsIDAsIDApO1xyXG4gICAgICAgIHRoaXMuY29tcHV0ZUVycm9yKCk7XHJcblxyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUhpZGRlbkNhbnZhc0xpbmVQcm9wZXJ0aWVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb21wdXRlRXJyb3IoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy51cGxvYWRDYW52YXNEYXRhVG9DUFUoKTtcclxuXHJcbiAgICAgICAgdGhpcy5lcnJvciA9IHtcclxuICAgICAgICAgICAgYXZlcmFnZTogMCxcclxuICAgICAgICAgICAgdmFyaWFuY2U6IDAsXHJcbiAgICAgICAgICAgIG1lYW5TcXVhcmU6IDAsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgbmJQaXhlbHMgPSB0aGlzLmhpZGRlbkNhbnZhc0RhdGEud2lkdGggKiB0aGlzLmhpZGRlbkNhbnZhc0RhdGEuaGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IG5iU2FtcGxlcyA9IDMgKiBuYlBpeGVscztcclxuICAgICAgICBmb3IgKGxldCBpUCA9IDA7IGlQIDwgbmJQaXhlbHM7IGlQKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JSZWQgPSAxMjcgLSB0aGlzLmhpZGRlbkNhbnZhc0RhdGEuZGF0YVs0ICogaVAgKyAwXTtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JHcmVlbiA9IDEyNyAtIHRoaXMuaGlkZGVuQ2FudmFzRGF0YS5kYXRhWzQgKiBpUCArIDFdO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvckJsdWUgPSAxMjcgLSB0aGlzLmhpZGRlbkNhbnZhc0RhdGEuZGF0YVs0ICogaVAgKyAyXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IuYXZlcmFnZSArPSBlcnJvclJlZCArIGVycm9yR3JlZW4gKyBlcnJvckJsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IubWVhblNxdWFyZSArPSAoZXJyb3JSZWQgKiBlcnJvclJlZCkgKyAoZXJyb3JHcmVlbiAqIGVycm9yR3JlZW4pICsgKGVycm9yQmx1ZSAqIGVycm9yQmx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXJyb3IuYXZlcmFnZSA9IE1hdGgucm91bmQodGhpcy5lcnJvci5hdmVyYWdlIC8gbmJTYW1wbGVzKTtcclxuICAgICAgICB0aGlzLmVycm9yLm1lYW5TcXVhcmUgPSBNYXRoLnJvdW5kKHRoaXMuZXJyb3IubWVhblNxdWFyZSAvIG5iU2FtcGxlcyk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGlQID0gMDsgaVAgPCBuYlBpeGVsczsgaVArKykge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvclJlZCA9IDEyNyAtIHRoaXMuaGlkZGVuQ2FudmFzRGF0YS5kYXRhWzQgKiBpUCArIDBdO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvckdyZWVuID0gMTI3IC0gdGhpcy5oaWRkZW5DYW52YXNEYXRhLmRhdGFbNCAqIGlQICsgMV07XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yQmx1ZSA9IDEyNyAtIHRoaXMuaGlkZGVuQ2FudmFzRGF0YS5kYXRhWzQgKiBpUCArIDJdO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IChlcnJvclJlZCArIGVycm9yR3JlZW4gKyBlcnJvckJsdWUpIC8gMztcclxuICAgICAgICAgICAgY29uc3QgZGlzdGFuY2V0b0Vycm9yID0gZXJyb3IgLSB0aGlzLmVycm9yLmF2ZXJhZ2U7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IudmFyaWFuY2UgKz0gZGlzdGFuY2V0b0Vycm9yICogZGlzdGFuY2V0b0Vycm9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmVycm9yLnZhcmlhbmNlID0gTWF0aC5yb3VuZCh0aGlzLmVycm9yLnZhcmlhbmNlIC8gbmJTYW1wbGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbXB1dGVUcmFuc2Zvcm1hdGlvbih0YXJnZXRTaXplOiBJU2l6ZSk6IFRyYW5zZm9ybWF0aW9uIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRyYW5zZm9ybWF0aW9uKHRhcmdldFNpemUsIHRoaXMuaGlkZGVuQ2FudmFzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRyYXdTZWdtZW50T25IaWRkZW5DYW52YXMocGVnMTogSVBlZywgcGVnMjogSVBlZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaGlkZGVuQ2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmhpZGRlbkNhbnZhc0NvbnRleHQubW92ZVRvKHBlZzEueCwgcGVnMS55KTtcclxuICAgICAgICB0aGlzLmhpZGRlbkNhbnZhc0NvbnRleHQubGluZVRvKHBlZzIueCwgcGVnMi55KTtcclxuICAgICAgICB0aGlzLmhpZGRlbkNhbnZhc0NvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgdGhpcy5oaWRkZW5DYW52YXNDb250ZXh0LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICAvLyBpbnZhbGlkYXRlIENQVSBkYXRhXHJcbiAgICAgICAgdGhpcy5oaWRkZW5DYW52YXNEYXRhID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbXB1dGVCZXN0U3RhcnRpbmdTZWdtZW50KCk6IElTZWdtZW50IHtcclxuICAgICAgICBsZXQgY2FuZGlkYXRlczogSVNlZ21lbnRbXSA9IFtdO1xyXG4gICAgICAgIGxldCBiZXN0U2NvcmUgPSBNSU5fU0FGRV9OVU1CRVI7XHJcblxyXG4gICAgICAgIGNvbnN0IHN0ZXAgPSAxICsgTWF0aC5mbG9vcih0aGlzLnBlZ3MubGVuZ3RoIC8gMTAwKTtcclxuICAgICAgICBmb3IgKGxldCBpUGVnSWQxID0gMDsgaVBlZ0lkMSA8IHRoaXMucGVncy5sZW5ndGg7IGlQZWdJZDEgKz0gc3RlcCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpUGVnSWQyID0gaVBlZ0lkMSArIDE7IGlQZWdJZDIgPCB0aGlzLnBlZ3MubGVuZ3RoOyBpUGVnSWQyICs9IHN0ZXApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBlZzEgPSB0aGlzLnBlZ3NbaVBlZ0lkMV07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwZWcyID0gdGhpcy5wZWdzW2lQZWdJZDJdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5hcmVQZWdzVG9vQ2xvc2UocGVnMSwgcGVnMikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5kaWRhdGVTY29yZSA9IHRoaXMuY29tcHV0ZVNlZ21lbnRQb3RlbnRpYWwocGVnMSwgcGVnMik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZVNjb3JlID4gYmVzdFNjb3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RTY29yZSA9IGNhbmRpZGF0ZVNjb3JlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5kaWRhdGVzID0gW3sgcGVnMSwgcGVnMiwgfV07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjYW5kaWRhdGVTY29yZSA9PT0gYmVzdFNjb3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7IHBlZzEsIHBlZzIsIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJhbmRvbUl0ZW0oY2FuZGlkYXRlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb21wdXRlQmVzdE5leHRQZWcoY3VycmVudFBlZzogSVBlZywgcGVnc1RvQXZvaWQ6IElQZWdbXSk6IElQZWcge1xyXG4gICAgICAgIGxldCBjYW5kaWRhdGVzOiBJUGVnW10gPSBbXTtcclxuICAgICAgICBsZXQgYmVzdFNjb3JlID0gTUlOX1NBRkVfTlVNQkVSO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IHBlZyBvZiB0aGlzLnBlZ3MpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFyZVBlZ3NUb29DbG9zZShjdXJyZW50UGVnLCBwZWcpICYmICFwZWdzVG9Bdm9pZC5pbmNsdWRlcyhwZWcpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYW5kaWRhdGVTY29yZSA9IHRoaXMuY29tcHV0ZVNlZ21lbnRQb3RlbnRpYWwoY3VycmVudFBlZywgcGVnKTtcclxuICAgICAgICAgICAgICAgIGlmIChjYW5kaWRhdGVTY29yZSA+IGJlc3RTY29yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJlc3RTY29yZSA9IGNhbmRpZGF0ZVNjb3JlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMgPSBbcGVnXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FuZGlkYXRlU2NvcmUgPT09IGJlc3RTY29yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaChwZWcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmFuZG9tSXRlbShjYW5kaWRhdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwbG9hZENhbnZhc0RhdGFUb0NQVSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5oaWRkZW5DYW52YXNEYXRhID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5oaWRkZW5DYW52YXMud2lkdGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IHRoaXMuaGlkZGVuQ2FudmFzLmhlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5oaWRkZW5DYW52YXNEYXRhID0gdGhpcy5oaWRkZW5DYW52YXNDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyogVGhlIGhpZ2hlciB0aGUgcmVzdWx0LCB0aGUgYmV0dGVyIGEgY2hvaWNlIHRoZSB0aHJlYWQgaXMuICovXHJcbiAgICBwcml2YXRlIGNvbXB1dGVTZWdtZW50UG90ZW50aWFsKHBlZzE6IElQZWcsIHBlZzI6IElQZWcpOiBudW1iZXIge1xyXG4gICAgICAgIHRoaXMudXBsb2FkQ2FudmFzRGF0YVRvQ1BVKCk7XHJcblxyXG4gICAgICAgIGxldCBwb3RlbnRpYWwgPSAwO1xyXG5cclxuICAgICAgICBjb25zdCBzZWdtZW50TGVuZ3RoID0gZGlzdGFuY2UocGVnMSwgcGVnMik7XHJcbiAgICAgICAgY29uc3QgbmJTYW1wbGVzID0gTWF0aC5jZWlsKHNlZ21lbnRMZW5ndGgpO1xyXG4gICAgICAgIGZvciAobGV0IGlTYW1wbGUgPSAwOyBpU2FtcGxlIDwgbmJTYW1wbGVzOyBpU2FtcGxlKyspIHtcclxuICAgICAgICAgICAgY29uc3QgciA9IChpU2FtcGxlICsgMSkgLyAobmJTYW1wbGVzICsgMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhbXBsZTogSVBvaW50ID0ge1xyXG4gICAgICAgICAgICAgICAgeDogbWl4KHBlZzEueCwgcGVnMi54LCByKSxcclxuICAgICAgICAgICAgICAgIHk6IG1peChwZWcxLnksIHBlZzIueSwgciksXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpbWFnZVZhbHVlID0gdGhpcy5zYW1wbGVDYW52YXNEYXRhKHNhbXBsZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsVmFsdWUgPSBpbWFnZVZhbHVlICsgKHRoaXMubGluZU9wYWNpdHlJbnRlcm5hbCAqIDI1NSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyaWJ1dGlvbiA9IDEyNyAtIGZpbmFsVmFsdWU7XHJcbiAgICAgICAgICAgIHBvdGVudGlhbCArPSBjb250cmlidXRpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcG90ZW50aWFsIC8gbmJTYW1wbGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBMaW5lYXIgaW50ZXJwb2xhdGlvbi4gUmV0dXJucyBhIHJlc3VsdCBpbiBbMCwgMjU1XSAqL1xyXG4gICAgcHJpdmF0ZSBzYW1wbGVDYW52YXNEYXRhKGNvb3JkczogSVBvaW50KTogbnVtYmVyIHtcclxuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuaGlkZGVuQ2FudmFzRGF0YS53aWR0aDtcclxuICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmhpZGRlbkNhbnZhc0RhdGEuaGVpZ2h0O1xyXG5cclxuICAgICAgICBjb25zdCBtaW5YID0gY2xhbXAoTWF0aC5mbG9vcihjb29yZHMueCksIDAsIHdpZHRoIC0gMSk7XHJcbiAgICAgICAgY29uc3QgbWF4WCA9IGNsYW1wKE1hdGguY2VpbChjb29yZHMueCksIDAsIHdpZHRoIC0gMSk7XHJcbiAgICAgICAgY29uc3QgbWluWSA9IGNsYW1wKE1hdGguZmxvb3IoY29vcmRzLnkpLCAwLCBoZWlnaHQgLSAxKTtcclxuICAgICAgICBjb25zdCBtYXhZID0gY2xhbXAoTWF0aC5jZWlsKGNvb3Jkcy55KSwgMCwgaGVpZ2h0IC0gMSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHRvcExlZnQgPSB0aGlzLnNhbXBsZUNhbnZhc1BpeGVsKG1pblgsIG1pblkpO1xyXG4gICAgICAgIGNvbnN0IHRvcFJpZ2h0ID0gdGhpcy5zYW1wbGVDYW52YXNQaXhlbChtYXhYLCBtaW5ZKTtcclxuICAgICAgICBjb25zdCBib3R0b21MZWZ0ID0gdGhpcy5zYW1wbGVDYW52YXNQaXhlbChtaW5YLCBtYXhZKTtcclxuICAgICAgICBjb25zdCBib3R0b21SaWdodCA9IHRoaXMuc2FtcGxlQ2FudmFzUGl4ZWwobWF4WCwgbWF4WSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZyYWN0WCA9IGNvb3Jkcy54ICUgMTtcclxuICAgICAgICBjb25zdCB0b3AgPSBtaXgodG9wTGVmdCwgdG9wUmlnaHQsIGZyYWN0WCk7XHJcbiAgICAgICAgY29uc3QgYm90dG9tID0gbWl4KGJvdHRvbUxlZnQsIGJvdHRvbVJpZ2h0LCBmcmFjdFgpO1xyXG5cclxuICAgICAgICBjb25zdCBmcmFjdFkgPSBjb29yZHMueSAlIDE7XHJcbiAgICAgICAgcmV0dXJuIG1peCh0b3AsIGJvdHRvbSwgZnJhY3RZKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNhbXBsZUNhbnZhc1BpeGVsKHBpeGVsWDogbnVtYmVyLCBwaXhlbFk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgY29uc3QgaW5kZXggPSA0ICogKHBpeGVsWCArIHBpeGVsWSAqIHRoaXMuaGlkZGVuQ2FudmFzRGF0YS53aWR0aCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGhyZWFkLnNhbXBsZUNhbnZhcyh0aGlzLmhpZGRlbkNhbnZhc0RhdGEuZGF0YSwgaW5kZXgpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGNvbXB1dGVCZXN0U2l6ZShzb3VyY2VJbWFnZVNpemU6IElTaXplLCBtYXhTaXplOiBudW1iZXIpOiBJU2l6ZSB7XHJcbiAgICAgICAgY29uc3QgbWF4U291cmNlU2lkZSA9IE1hdGgubWF4KHNvdXJjZUltYWdlU2l6ZS53aWR0aCwgc291cmNlSW1hZ2VTaXplLmhlaWdodCk7XHJcbiAgICAgICAgY29uc3Qgc2l6aW5nRmFjdG9yID0gbWF4U2l6ZSAvIG1heFNvdXJjZVNpZGU7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgd2lkdGg6IE1hdGguY2VpbChzb3VyY2VJbWFnZVNpemUud2lkdGggKiBzaXppbmdGYWN0b3IpLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IE1hdGguY2VpbChzb3VyY2VJbWFnZVNpemUuaGVpZ2h0ICogc2l6aW5nRmFjdG9yKSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29tcHV0ZVBlZ3MoKTogSVBlZ1tdIHtcclxuICAgICAgICAvKiBGaXJzdCwgY29tcHV0ZSBwZWdzIGZvciBhIGZpeGVkLXNpemUgY2FudmFzKi9cclxuICAgICAgICBsZXQgZG9tYWluU2l6ZTogSVNpemU7XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBERUZBVUxUX0NBTlZBU19TSVpFX0ZPUl9QRUdTID0gMTAwMDtcclxuICAgICAgICAgICAgY29uc3QgYXNwZWN0UmF0aW8gPSB0aGlzLmhpZGRlbkNhbnZhcy53aWR0aCAvIHRoaXMuaGlkZGVuQ2FudmFzLmhlaWdodDtcclxuICAgICAgICAgICAgaWYgKGFzcGVjdFJhdGlvID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZG9tYWluU2l6ZSA9IHsgd2lkdGg6IERFRkFVTFRfQ0FOVkFTX1NJWkVfRk9SX1BFR1MsIGhlaWdodDogTWF0aC5yb3VuZChERUZBVUxUX0NBTlZBU19TSVpFX0ZPUl9QRUdTIC8gYXNwZWN0UmF0aW8pIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb21haW5TaXplID0geyB3aWR0aDogTWF0aC5yb3VuZChERUZBVUxUX0NBTlZBU19TSVpFX0ZPUl9QRUdTICogYXNwZWN0UmF0aW8pLCBoZWlnaHQ6IERFRkFVTFRfQ0FOVkFTX1NJWkVfRk9SX1BFR1MgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwZWdzU2hhcGUgPSBQYXJhbWV0ZXJzLnNoYXBlO1xyXG4gICAgICAgIGNvbnN0IHBlZ3NDb3VudCA9IFBhcmFtZXRlcnMucGVnc0NvdW50O1xyXG5cclxuICAgICAgICBjb25zdCBwZWdzOiBJUGVnW10gPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHBlZ3NTaGFwZSA9PT0gRVNoYXBlLlJFQ1RBTkdMRSkge1xyXG4gICAgICAgICAgICB0aGlzLmFyZVBlZ3NUb29DbG9zZSA9IChwZWcxOiBJUGVnLCBwZWcyOiBJUGVnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGVnMS54ID09PSBwZWcyLnggfHwgcGVnMS55ID09PSBwZWcyLnk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBtYXhYID0gZG9tYWluU2l6ZS53aWR0aDtcclxuICAgICAgICAgICAgY29uc3QgbWF4WSA9IGRvbWFpblNpemUuaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYXNwZWN0UmF0aW8gPSBtYXhZIC8gbWF4WDtcclxuICAgICAgICAgICAgY29uc3QgbmJQZWdzUGVyV2lkdGggPSBNYXRoLnJvdW5kKDAuNSAqIHBlZ3NDb3VudCAvICgxICsgYXNwZWN0UmF0aW8pKTtcclxuICAgICAgICAgICAgY29uc3QgbmJQZWdzUGVySGVpZ2h0ID0gTWF0aC5yb3VuZCgwLjUgKiAocGVnc0NvdW50IC0gMiAqIG5iUGVnc1BlcldpZHRoKSk7XHJcblxyXG4gICAgICAgICAgICBwZWdzLnB1c2goeyB4OiAwLCB5OiAwIH0pO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaVcgPSAxOyBpVyA8IG5iUGVnc1BlcldpZHRoOyBpVysrKSB7XHJcbiAgICAgICAgICAgICAgICBwZWdzLnB1c2goeyB4OiBtYXhYICogKGlXIC8gbmJQZWdzUGVyV2lkdGgpLCB5OiAwICx9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcGVncy5wdXNoKHsgeDogbWF4WCwgeTogMCB9KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGlIID0gMTsgaUggPCBuYlBlZ3NQZXJIZWlnaHQ7IGlIKyspIHtcclxuICAgICAgICAgICAgICAgIHBlZ3MucHVzaCh7IHg6IG1heFgsIHk6IG1heFkgKiAoaUggLyBuYlBlZ3NQZXJIZWlnaHQpIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwZWdzLnB1c2goeyB4OiBtYXhYLCB5OiBtYXhZIH0pO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaVcgPSBuYlBlZ3NQZXJXaWR0aCAtIDE7IGlXID49IDE7IGlXLS0pIHtcclxuICAgICAgICAgICAgICAgIHBlZ3MucHVzaCh7IHg6IG1heFggKiAoaVcgLyBuYlBlZ3NQZXJXaWR0aCksIHk6IG1heFkgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBlZ3MucHVzaCh7IHg6IDAsIHk6IG1heFkgfSk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpSCA9IG5iUGVnc1BlckhlaWdodCAtIDE7IGlIID49IDE7IGlILS0pIHtcclxuICAgICAgICAgICAgICAgIHBlZ3MucHVzaCh7IHg6IDAsIHk6IG1heFkgKiAoaUggLyBuYlBlZ3NQZXJIZWlnaHQpIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW50ZXJmYWNlIElQZWdDaXJjbGUgZXh0ZW5kcyBJUGVnIHtcclxuICAgICAgICAgICAgICAgIGFuZ2xlOiBudW1iZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXJlUGVnc1Rvb0Nsb3NlID0gKHBlZzE6IElQZWcsIHBlZzI6IElQZWcpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFic0RlbHRhQW5nbGUgPSBNYXRoLmFicygocGVnMSBhcyBJUGVnQ2lyY2xlKS5hbmdsZSAtIChwZWcyIGFzIElQZWdDaXJjbGUpLmFuZ2xlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1pbkFuZ2xlID0gTWF0aC5taW4oYWJzRGVsdGFBbmdsZSwgVFdPX1BJIC0gYWJzRGVsdGFBbmdsZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWluQW5nbGUgPD0gVFdPX1BJIC8gMTY7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBoYWxmV2lkdGggPSAwLjUgKiBkb21haW5TaXplLndpZHRoO1xyXG4gICAgICAgICAgICBjb25zdCBoYWxmSGVpZ2h0ID0gMC41ICogZG9tYWluU2l6ZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGNpcmN1bWZlcmVuY2UgPSBNYXRoLlBJICogKDMgKiAoaGFsZldpZHRoICsgaGFsZkhlaWdodCkgLSBNYXRoLnNxcnQoKDMgKiBoYWxmV2lkdGggKyBoYWxmSGVpZ2h0KSAqIChoYWxmV2lkdGggKyAzICogaGFsZkhlaWdodCkpKTtcclxuICAgICAgICAgICAgY29uc3QgZGlzdGFuY2VCZXR3ZWVuUGVncyA9IGNpcmN1bWZlcmVuY2UgLyBwZWdzQ291bnQ7XHJcbiAgICAgICAgICAgIGxldCBhbmdsZSA9IDA7XHJcbiAgICAgICAgICAgIHdoaWxlIChwZWdzLmxlbmd0aCA8IHBlZ3NDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29zQW5nbGUgPSBNYXRoLmNvcyhhbmdsZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzaW5BbmdsZSA9IE1hdGguc2luKGFuZ2xlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwZWc6IElQZWdDaXJjbGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogaGFsZldpZHRoICogKDEgKyBjb3NBbmdsZSksXHJcbiAgICAgICAgICAgICAgICAgICAgeTogaGFsZkhlaWdodCAqICgxICsgc2luQW5nbGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFuZ2xlLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGVncy5wdXNoKHBlZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY29tcHV0ZSB0aGUgZGVsdGEgYW5nbGUgc28gdGhhdCBwZWdzIGFyZSBldmVubHktc3BhY2VkIGV2ZW4gb24gZWxsaXBzZXNcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhQW5nbGUgPSBkaXN0YW5jZUJldHdlZW5QZWdzIC8gTWF0aC5zcXJ0KGhhbGZXaWR0aCAqIGhhbGZXaWR0aCAqIHNpbkFuZ2xlICogc2luQW5nbGUgKyBoYWxmSGVpZ2h0ICogaGFsZkhlaWdodCAqIGNvc0FuZ2xlICogY29zQW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgYW5nbGUgKz0gZGVsdGFBbmdsZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogVGhlbiBhZGp1c3QgdGhlIHBlZ3MgdG8gdGhlIGFjdHVhbCBjYW52YXMgc2l6ZSAqL1xyXG4gICAgICAgIGZvciAoY29uc3QgcGVnIG9mIHBlZ3MpIHtcclxuICAgICAgICAgICAgcGVnLnggKj0gdGhpcy5oaWRkZW5DYW52YXMud2lkdGggLyBkb21haW5TaXplLndpZHRoO1xyXG4gICAgICAgICAgICBwZWcueSAqPSB0aGlzLmhpZGRlbkNhbnZhcy5oZWlnaHQgLyBkb21haW5TaXplLmhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwZWdzO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBUaHJlYWRDb21wdXRlciwgSVBlZ307XHJcbiIsImltcG9ydCB7IFBhcmFtZXRlcnMgfSBmcm9tIFwiLi4vcGFyYW1ldGVyc1wiO1xyXG5pbXBvcnQgeyBJUGxvdHRlckluZm8sIFBsb3R0ZXJCYXNlIH0gZnJvbSBcIi4uL3Bsb3R0ZXIvcGxvdHRlci1iYXNlXCI7XHJcbmltcG9ydCB7IFRocmVhZENvbXB1dGVyIH0gZnJvbSBcIi4vdGhyZWFkLWNvbXB1dGVyXCI7XHJcblxyXG5jbGFzcyBUaHJlYWRQbG90dGVyIHtcclxuICAgIHByaXZhdGUgbmJTZWdtZW50c0RyYXduOiBudW1iZXIgPSAwO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IHBsb3R0ZXI6IFBsb3R0ZXJCYXNlLCBwcml2YXRlIHJlYWRvbmx5IHRocmVhZENvbXB1dGVyOiBUaHJlYWRDb21wdXRlcikgeyB9XHJcblxyXG4gICAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubmJTZWdtZW50c0RyYXduID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcGxvdCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5uYlNlZ21lbnRzRHJhd24gPT09IHRoaXMudGhyZWFkQ29tcHV0ZXIubmJTZWdtZW50cykge1xyXG4gICAgICAgICAgICAvLyBub3RoaW5nIG1vcmUgdG8gZG9cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5uYlNlZ21lbnRzRHJhd24gPiB0aGlzLnRocmVhZENvbXB1dGVyLm5iU2VnbWVudHMpIHtcclxuICAgICAgICAgICAgLy8gaWYgdGhlIG5iIG9mIHNlZ21lbnQgd2VudCBkb3duLCBubyBvdGhlciBjaG9pY2UgdGhhdCByZWRyYXdpbmcgYWxsIGZyb20gc2NyYXRjaFxyXG4gICAgICAgICAgICB0aGlzLm5iU2VnbWVudHNEcmF3biA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkcmF3RnJvbVNjcmF0Y2ggPSAodGhpcy5uYlNlZ21lbnRzRHJhd24gPT09IDApO1xyXG4gICAgICAgIGlmIChkcmF3RnJvbVNjcmF0Y2gpIHtcclxuICAgICAgICAgICAgY29uc3QgcGxvdHRlckluZm9zOiBJUGxvdHRlckluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFBhcmFtZXRlcnMuaW52ZXJ0Q29sb3JzID8gXCJibGFja1wiIDogXCJ3aGl0ZVwiLFxyXG4gICAgICAgICAgICAgICAgYmx1cjogUGFyYW1ldGVycy5ibHVyLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wbG90dGVyLnJlc2l6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnBsb3R0ZXIuaW5pdGlhbGl6ZShwbG90dGVySW5mb3MpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFBhcmFtZXRlcnMuZGlzcGxheVBlZ3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGhyZWFkQ29tcHV0ZXIuZHJhd1BlZ3ModGhpcy5wbG90dGVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy50aHJlYWRDb21wdXRlci5kcmF3VGhyZWFkKHRoaXMucGxvdHRlciwgMCk7XHJcbiAgICAgICAgICAgIHRoaXMucGxvdHRlci5maW5hbGl6ZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudGhyZWFkQ29tcHV0ZXIuZHJhd1RocmVhZCh0aGlzLnBsb3R0ZXIsIHRoaXMubmJTZWdtZW50c0RyYXduKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMubmJTZWdtZW50c0RyYXduID0gdGhpcy50aHJlYWRDb21wdXRlci5uYlNlZ21lbnRzO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBUaHJlYWRQbG90dGVyIH07XHJcbiIsImltcG9ydCB7IEVDb2xvciB9IGZyb20gXCIuLi8uLi9wbG90dGVyL2NvbXBvc2l0aW5nXCI7XHJcbmltcG9ydCB7IElQZWcgfSBmcm9tIFwiLi4vdGhyZWFkLWNvbXB1dGVyXCI7XHJcblxyXG50eXBlIFRocmVhZHNJdGVyYXRvciA9ICh0aHJlYWQ6IElQZWdbXSwgY29sb3I6IEVDb2xvcikgPT4gdW5rbm93bjtcclxuXHJcbnR5cGUgU2FtcGxpbmdGdW5jdGlvbiA9IChkYXRhOiBVaW50OENsYW1wZWRBcnJheSwgaW5kZXg6IG51bWJlcikgPT4gbnVtYmVyO1xyXG5cclxuaW50ZXJmYWNlIElUaHJlYWRUb0dyb3cge1xyXG4gICAgdGhyZWFkOiBJUGVnW107XHJcbiAgICBjb2xvcjogRUNvbG9yO1xyXG59XHJcblxyXG5hYnN0cmFjdCBjbGFzcyBUaHJlYWRCYXNlIHtcclxuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXQgdG90YWxOYlNlZ21lbnRzKCk6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgbG93ZXJOYlNlZ21lbnRzKHRhcmdldE51bWJlcjogbnVtYmVyKTogdm9pZDtcclxuXHJcbiAgICBwdWJsaWMgYWJzdHJhY3QgaXRlcmF0ZU9uVGhyZWFkcyhuYlNlZ21lbnRzVG9JZ25vcmU6IG51bWJlciwgY2FsbGJhY2s6IFRocmVhZHNJdGVyYXRvcik6IHZvaWQ7XHJcblxyXG4gICAgcHVibGljIGFic3RyYWN0IGdldFRocmVhZFRvR3JvdygpOiBJVGhyZWFkVG9Hcm93O1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBhZGp1c3RDYW52YXNEYXRhKGRhdGE6IFVpbnQ4Q2xhbXBlZEFycmF5LCBibGFja0JhY2tncm91bmQ6IGJvb2xlYW4pOiB2b2lkO1xyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBlbmFibGVTYW1wbGluZ0Zvcihjb2xvcjogRUNvbG9yKTogdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm5zIHZhbHVlIGluIFswLCAyNTVdLiBJZGVhbCB2YWx1ZSBpcyAxMjdcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNhbXBsZUNhbnZhczogU2FtcGxpbmdGdW5jdGlvbiA9IG51bGw7XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBsb3dlck5iU2VnbWVudHNGb3JUaHJlYWQodGhyZWFkOiBJUGVnW10sIHRhcmdldE51bWJlcjogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRhcmdldE51bWJlciA+IDApIHtcclxuICAgICAgICAgICAgdGhyZWFkLmxlbmd0aCA9IE1hdGgubWluKHRocmVhZC5sZW5ndGgsIHRhcmdldE51bWJlciArIDEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRocmVhZC5sZW5ndGggPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGNvbXB1dGVOYlNlZ21lbnRzKHRocmVhZDogSVBlZ1tdKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gKHRocmVhZC5sZW5ndGggPiAxKSA/IHRocmVhZC5sZW5ndGggLSAxIDogMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljICBpdGVyYXRlT25UaHJlYWQodGhyZWFkOiBJUGVnW10sIGNvbG9yOiBFQ29sb3IsIGZyb21TZWdtZW50TnVtYmVyOiBudW1iZXIsIGNhbGxiYWNrOiBUaHJlYWRzSXRlcmF0b3IpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB0aHJlYWRMZW5ndGggPSBUaHJlYWRCYXNlLmNvbXB1dGVOYlNlZ21lbnRzKHRocmVhZCk7XHJcbiAgICAgICAgaWYgKGZyb21TZWdtZW50TnVtYmVyIDwgdGhyZWFkTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRocmVhZFBhcnQgPSB0aHJlYWQuc2xpY2UoZnJvbVNlZ21lbnROdW1iZXIpO1xyXG4gICAgICAgICAgICBjYWxsYmFjayh0aHJlYWRQYXJ0LCBjb2xvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge1xyXG4gICAgSVRocmVhZFRvR3JvdyxcclxuICAgIFRocmVhZEJhc2UsXHJcbiAgICBUaHJlYWRzSXRlcmF0b3IsXHJcbn07XHJcbiIsImltcG9ydCB7IEVDb2xvciB9IGZyb20gXCIuLi8uLi9wbG90dGVyL2NvbXBvc2l0aW5nXCI7XHJcbmltcG9ydCB7IElQZWcgfSBmcm9tIFwiLi4vdGhyZWFkLWNvbXB1dGVyXCI7XHJcblxyXG5pbXBvcnQgeyBJVGhyZWFkVG9Hcm93LCBUaHJlYWRCYXNlLCBUaHJlYWRzSXRlcmF0b3IgfSBmcm9tIFwiLi90aHJlYWQtYmFzZVwiO1xyXG5cclxuY2xhc3MgVGhyZWFkTW9ub2Nocm9tZSBleHRlbmRzIFRocmVhZEJhc2Uge1xyXG4gICAgcHJpdmF0ZSB0aHJlYWRQZWdzOiBJUGVnW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRvdGFsTmJTZWdtZW50cygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBUaHJlYWRCYXNlLmNvbXB1dGVOYlNlZ21lbnRzKHRoaXMudGhyZWFkUGVncyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxvd2VyTmJTZWdtZW50cyh0YXJnZXROdW1iZXI6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIFRocmVhZEJhc2UubG93ZXJOYlNlZ21lbnRzRm9yVGhyZWFkKHRoaXMudGhyZWFkUGVncywgdGFyZ2V0TnVtYmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgIGl0ZXJhdGVPblRocmVhZHMobmJTZWdtZW50c1RvSWdub3JlOiBudW1iZXIsIGNhbGxiYWNrOiBUaHJlYWRzSXRlcmF0b3IpOiB2b2lkIHtcclxuICAgICAgICAgVGhyZWFkQmFzZS5pdGVyYXRlT25UaHJlYWQodGhpcy50aHJlYWRQZWdzLCBFQ29sb3IuTU9OT0NIUk9NRSwgbmJTZWdtZW50c1RvSWdub3JlLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRocmVhZFRvR3JvdygpOiBJVGhyZWFkVG9Hcm93IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0aHJlYWQ6IHRoaXMudGhyZWFkUGVncyxcclxuICAgICAgICAgICAgY29sb3I6IEVDb2xvci5NT05PQ0hST01FLFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRqdXN0Q2FudmFzRGF0YShkYXRhOiBVaW50OENsYW1wZWRBcnJheSwgYmxhY2tCYWNrZ3JvdW5kOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGNvbXB1dGVBZGp1c3RlZFZhbHVlOiAocmF3VmFsdWU6IG51bWJlcikgPT4gbnVtYmVyO1xyXG4gICAgICAgIGlmIChibGFja0JhY2tncm91bmQpIHtcclxuICAgICAgICAgICAgY29tcHV0ZUFkanVzdGVkVmFsdWUgPSAocmF3VmFsdWU6IG51bWJlcikgPT4gKDI1NSAtIHJhd1ZhbHVlKSAvIDI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29tcHV0ZUFkanVzdGVkVmFsdWUgPSAocmF3VmFsdWU6IG51bWJlcikgPT4gcmF3VmFsdWUgLyAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbmJQaXhlbHMgPSBkYXRhLmxlbmd0aCAvIDQ7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYlBpeGVsczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF2ZXJhZ2VTb3VyY2VWYWx1ZSA9IChkYXRhWzQgKiBpICsgMF0gKyBkYXRhWzQgKiBpICsgMV0gKyBkYXRhWzQgKiBpICsgMl0pIC8gMztcclxuICAgICAgICAgICAgY29uc3QgYWRqdXN0ZWRWYWx1ZSA9IGNvbXB1dGVBZGp1c3RlZFZhbHVlKGF2ZXJhZ2VTb3VyY2VWYWx1ZSk7XHJcbiAgICAgICAgICAgIGRhdGFbNCAqIGkgKyAwXSA9IGFkanVzdGVkVmFsdWU7XHJcbiAgICAgICAgICAgIGRhdGFbNCAqIGkgKyAxXSA9IGFkanVzdGVkVmFsdWU7XHJcbiAgICAgICAgICAgIGRhdGFbNCAqIGkgKyAyXSA9IGFkanVzdGVkVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbmFibGVTYW1wbGluZ0ZvcigpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5zYW1wbGVDYW52YXMgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5zYW1wbGVDYW52YXMgPSAoZGF0YTogVWludDhDbGFtcGVkQXJyYXksIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW2luZGV4ICsgMF07IC8vIG9ubHkgY2hlY2sgdGhlIHJlZCBjaGFubmVsIGJlY2F1c2UgdGhlIGhpZGRlbiBjYW52YXMgaXMgaW4gYmxhY2sgYW5kIHdoaXRlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IFRocmVhZE1vbm9jaHJvbWUgfTtcclxuIiwiaW1wb3J0IHsgRUNvbG9yIH0gZnJvbSBcIi4uLy4uL3Bsb3R0ZXIvY29tcG9zaXRpbmdcIjtcclxuaW1wb3J0IHsgSVBlZyB9IGZyb20gXCIuLi90aHJlYWQtY29tcHV0ZXJcIjtcclxuXHJcbmltcG9ydCB7IElUaHJlYWRUb0dyb3csIFRocmVhZEJhc2UsIFRocmVhZHNJdGVyYXRvciB9IGZyb20gXCIuL3RocmVhZC1iYXNlXCI7XHJcblxyXG5pbnRlcmZhY2UgSVNlZ21lbnRzUmVwYXJ0aXRpb24ge1xyXG4gICAgcmVkOiBudW1iZXI7XHJcbiAgICBncmVlbjogbnVtYmVyO1xyXG4gICAgYmx1ZTogbnVtYmVyO1xyXG59XHJcblxyXG5jbGFzcyBUaHJlYWRSZWRCbHVlR3JlZW4gZXh0ZW5kcyBUaHJlYWRCYXNlIHtcclxuICAgIHByaXZhdGUgdGhyZWFkUGVnc1JlZDogSVBlZ1tdID0gW107XHJcbiAgICBwcml2YXRlIHRocmVhZFBlZ3NHcmVlbjogSVBlZ1tdID0gW107XHJcbiAgICBwcml2YXRlIHRocmVhZFBlZ3NCbHVlOiBJUGVnW10gPSBbXTtcclxuXHJcbiAgICAvLyBpbmRpY2F0b3JzIGRlc2NyaWJpbmcgdGhlIGNvbG9ycyByZXBhcnRpdGlvbiBmcm9tIHRoZSBzb3VyY2UgaW1hZ2VcclxuICAgIHByaXZhdGUgZnJlcXVlbmN5UmVkOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGZyZXF1ZW5jeUdyZWVuOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGZyZXF1ZW5jeUJsdWU6IG51bWJlcjtcclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRvdGFsTmJTZWdtZW50cygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBUaHJlYWRCYXNlLmNvbXB1dGVOYlNlZ21lbnRzKHRoaXMudGhyZWFkUGVnc1JlZCkgK1xyXG4gICAgICAgICAgICBUaHJlYWRCYXNlLmNvbXB1dGVOYlNlZ21lbnRzKHRoaXMudGhyZWFkUGVnc0dyZWVuKSArXHJcbiAgICAgICAgICAgIFRocmVhZEJhc2UuY29tcHV0ZU5iU2VnbWVudHModGhpcy50aHJlYWRQZWdzQmx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGxvd2VyTmJTZWdtZW50cyh0YXJnZXROdW1iZXI6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHJlcGFydGl0aW9uID0gdGhpcy5jb21wdXRlSWRlYWxTZWdtZW50c1JlcGFydGl0aW9uKHRhcmdldE51bWJlcik7XHJcblxyXG4gICAgICAgIFRocmVhZEJhc2UubG93ZXJOYlNlZ21lbnRzRm9yVGhyZWFkKHRoaXMudGhyZWFkUGVnc1JlZCwgcmVwYXJ0aXRpb24ucmVkKTtcclxuICAgICAgICBUaHJlYWRCYXNlLmxvd2VyTmJTZWdtZW50c0ZvclRocmVhZCh0aGlzLnRocmVhZFBlZ3NHcmVlbiwgcmVwYXJ0aXRpb24uZ3JlZW4pO1xyXG4gICAgICAgIFRocmVhZEJhc2UubG93ZXJOYlNlZ21lbnRzRm9yVGhyZWFkKHRoaXMudGhyZWFkUGVnc0JsdWUsIHJlcGFydGl0aW9uLmJsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpdGVyYXRlT25UaHJlYWRzKG5iU2VnbWVudHNUb0lnbm9yZTogbnVtYmVyLCBjYWxsYmFjazogVGhyZWFkc0l0ZXJhdG9yKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcmVwYXJ0aXRpb24gPSB0aGlzLmNvbXB1dGVJZGVhbFNlZ21lbnRzUmVwYXJ0aXRpb24obmJTZWdtZW50c1RvSWdub3JlKTtcclxuXHJcbiAgICAgICAgVGhyZWFkQmFzZS5pdGVyYXRlT25UaHJlYWQodGhpcy50aHJlYWRQZWdzUmVkLCBFQ29sb3IuUkVELCByZXBhcnRpdGlvbi5yZWQsIGNhbGxiYWNrKTtcclxuICAgICAgICBUaHJlYWRCYXNlLml0ZXJhdGVPblRocmVhZCh0aGlzLnRocmVhZFBlZ3NHcmVlbiwgRUNvbG9yLkdSRUVOLCByZXBhcnRpdGlvbi5ncmVlbiwgY2FsbGJhY2spO1xyXG4gICAgICAgIFRocmVhZEJhc2UuaXRlcmF0ZU9uVGhyZWFkKHRoaXMudGhyZWFkUGVnc0JsdWUsIEVDb2xvci5CTFVFLCByZXBhcnRpdGlvbi5ibHVlLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRocmVhZFRvR3JvdygpOiBJVGhyZWFkVG9Hcm93IHtcclxuICAgICAgICBjb25zdCByZXBhcnRpdGlvbiA9IHRoaXMuY29tcHV0ZUlkZWFsU2VnbWVudHNSZXBhcnRpdGlvbih0aGlzLnRvdGFsTmJTZWdtZW50cyArIDEpO1xyXG4gICAgICAgIGlmIChyZXBhcnRpdGlvbi5yZWQgPiAwICYmIHRoaXMudGhyZWFkUGVnc1JlZC5sZW5ndGggPCByZXBhcnRpdGlvbi5yZWQgKzEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRocmVhZDogdGhpcy50aHJlYWRQZWdzUmVkLFxyXG4gICAgICAgICAgICAgICAgY29sb3I6IEVDb2xvci5SRUQsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBlbHNlIGlmIChyZXBhcnRpdGlvbi5ncmVlbiA+IDAgJiYgdGhpcy50aHJlYWRQZWdzR3JlZW4ubGVuZ3RoIDwgcmVwYXJ0aXRpb24uZ3JlZW4gKzEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHRocmVhZDogdGhpcy50aHJlYWRQZWdzR3JlZW4sXHJcbiAgICAgICAgICAgICAgICBjb2xvcjogRUNvbG9yLkdSRUVOLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdGhyZWFkOiB0aGlzLnRocmVhZFBlZ3NCbHVlLFxyXG4gICAgICAgICAgICBjb2xvcjogRUNvbG9yLkJMVUUsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRqdXN0Q2FudmFzRGF0YShkYXRhOiBVaW50OENsYW1wZWRBcnJheSwgYmxhY2tCYWNrZ3JvdW5kOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGN1bXVsYXRlZFJlZCA9IDA7XHJcbiAgICAgICAgbGV0IGN1bXVsYXRlZEdyZWVuID0gMDtcclxuICAgICAgICBsZXQgY3VtdWxhdGVkQmx1ZSA9IDA7XHJcblxyXG4gICAgICAgIGxldCBjb21wdXRlQWRqdXN0ZWRWYWx1ZTogKHJhd1ZhbHVlOiBudW1iZXIpID0+IG51bWJlcjtcclxuICAgICAgICBpZiAoYmxhY2tCYWNrZ3JvdW5kKSB7XHJcbiAgICAgICAgICAgIGNvbXB1dGVBZGp1c3RlZFZhbHVlID0gKHJhd1ZhbHVlOiBudW1iZXIpID0+ICgyNTUgLSByYXdWYWx1ZSkgLyAyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbXB1dGVBZGp1c3RlZFZhbHVlID0gKHJhd1ZhbHVlOiBudW1iZXIpID0+IHJhd1ZhbHVlIC8gMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG5iUGl4ZWxzID0gZGF0YS5sZW5ndGggLyA0O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmJQaXhlbHM7IGkrKykge1xyXG4gICAgICAgICAgICBjdW11bGF0ZWRSZWQgKz0gZGF0YVs0ICogaSArIDBdO1xyXG4gICAgICAgICAgICBjdW11bGF0ZWRHcmVlbiArPSBkYXRhWzQgKiBpICsgMV07XHJcbiAgICAgICAgICAgIGN1bXVsYXRlZEJsdWUgKz0gZGF0YVs0ICogaSArIDJdO1xyXG5cclxuICAgICAgICAgICAgZGF0YVs0ICogaSArIDBdID0gY29tcHV0ZUFkanVzdGVkVmFsdWUoZGF0YVs0ICogaSArIDBdKTtcclxuICAgICAgICAgICAgZGF0YVs0ICogaSArIDFdID0gY29tcHV0ZUFkanVzdGVkVmFsdWUoZGF0YVs0ICogaSArIDFdKTtcclxuICAgICAgICAgICAgZGF0YVs0ICogaSArIDJdID0gY29tcHV0ZUFkanVzdGVkVmFsdWUoZGF0YVs0ICogaSArIDJdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghYmxhY2tCYWNrZ3JvdW5kKSB7XHJcbiAgICAgICAgICAgIGN1bXVsYXRlZFJlZCA9IDI1NSAqIG5iUGl4ZWxzIC0gY3VtdWxhdGVkUmVkO1xyXG4gICAgICAgICAgICBjdW11bGF0ZWRHcmVlbiA9IDI1NSAqIG5iUGl4ZWxzIC0gY3VtdWxhdGVkR3JlZW47XHJcbiAgICAgICAgICAgIGN1bXVsYXRlZEJsdWUgPSAyNTUgKiBuYlBpeGVscyAtIGN1bXVsYXRlZEJsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0b3RhbENvbG9yID0gY3VtdWxhdGVkUmVkICsgY3VtdWxhdGVkR3JlZW4gKyBjdW11bGF0ZWRCbHVlO1xyXG4gICAgICAgIHRoaXMuZnJlcXVlbmN5UmVkID0gY3VtdWxhdGVkUmVkIC8gdG90YWxDb2xvcjtcclxuICAgICAgICB0aGlzLmZyZXF1ZW5jeUdyZWVuID0gY3VtdWxhdGVkR3JlZW4gLyB0b3RhbENvbG9yO1xyXG4gICAgICAgIHRoaXMuZnJlcXVlbmN5Qmx1ZSA9IGN1bXVsYXRlZEJsdWUgLyB0b3RhbENvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbmFibGVTYW1wbGluZ0Zvcihjb2xvcjogRUNvbG9yKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGNoYW5uZWw6IG51bWJlcjtcclxuICAgICAgICBpZiAoY29sb3IgPT09IEVDb2xvci5SRUQpIHtcclxuICAgICAgICAgICAgY2hhbm5lbCA9IDA7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjb2xvciA9PT0gRUNvbG9yLkdSRUVOKSB7XHJcbiAgICAgICAgICAgIGNoYW5uZWwgPSAxO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoYW5uZWwgPSAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zYW1wbGVDYW52YXMgPSAoZGF0YTogVWludDhDbGFtcGVkQXJyYXksIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFbaW5kZXggKyBjaGFubmVsXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb21wdXRlSWRlYWxTZWdtZW50c1JlcGFydGl0aW9uKHRvdGFsTmJTZWdtZW50czogbnVtYmVyKTogSVNlZ21lbnRzUmVwYXJ0aXRpb24ge1xyXG4gICAgICAgIGNvbnN0IGlkZWFsUmVkID0gdG90YWxOYlNlZ21lbnRzICogdGhpcy5mcmVxdWVuY3lSZWQ7XHJcbiAgICAgICAgY29uc3QgaWRlYWxHcmVlbiA9IHRvdGFsTmJTZWdtZW50cyAqIHRoaXMuZnJlcXVlbmN5R3JlZW47XHJcbiAgICAgICAgY29uc3QgaWRlYWxCbHVlID0gdG90YWxOYlNlZ21lbnRzICogdGhpcy5mcmVxdWVuY3lCbHVlO1xyXG5cclxuICAgICAgICBjb25zdCByZXBhcnRpdGlvbiA9IHtcclxuICAgICAgICAgICAgcmVkOiBNYXRoLmZsb29yKGlkZWFsUmVkKSxcclxuICAgICAgICAgICAgZ3JlZW46IE1hdGguZmxvb3IoaWRlYWxHcmVlbiksXHJcbiAgICAgICAgICAgIGJsdWU6IE1hdGguZmxvb3IoaWRlYWxCbHVlKSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB3aGlsZSAocmVwYXJ0aXRpb24ucmVkICsgcmVwYXJ0aXRpb24uZ3JlZW4gKyByZXBhcnRpdGlvbi5ibHVlIDwgdG90YWxOYlNlZ21lbnRzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGcmVxdWVuY3lSZWQgPSByZXBhcnRpdGlvbi5yZWQgLyBNYXRoLm1heCgxLCByZXBhcnRpdGlvbi5yZWQgKyByZXBhcnRpdGlvbi5ncmVlbiArIHJlcGFydGl0aW9uLmJsdWUpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RnJlcXVlbmN5R3JlZW4gPSByZXBhcnRpdGlvbi5ncmVlbiAvIE1hdGgubWF4KDEsIHJlcGFydGl0aW9uLnJlZCArIHJlcGFydGl0aW9uLmdyZWVuICsgcmVwYXJ0aXRpb24uYmx1ZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGcmVxdWVuY3lCbHVlID0gcmVwYXJ0aXRpb24uYmx1ZSAvIE1hdGgubWF4KDEsIHJlcGFydGl0aW9uLnJlZCArIHJlcGFydGl0aW9uLmdyZWVuICsgcmVwYXJ0aXRpb24uYmx1ZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBnYXBSZWQgPSBpZGVhbFJlZCAtIGN1cnJlbnRGcmVxdWVuY3lSZWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IGdhcEdyZWVuID0gaWRlYWxHcmVlbiAtIGN1cnJlbnRGcmVxdWVuY3lHcmVlbjtcclxuICAgICAgICAgICAgY29uc3QgZ2FwQmx1ZSA9IGlkZWFsQmx1ZSAtIGN1cnJlbnRGcmVxdWVuY3lCbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGdhcFJlZCA+IGdhcEdyZWVuICYmIGdhcFJlZCA+IGdhcEJsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJlcGFydGl0aW9uLnJlZCsrO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGdhcEdyZWVuID4gZ2FwUmVkICYmIGdhcEdyZWVuID4gZ2FwQmx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmVwYXJ0aXRpb24uZ3JlZW4rKztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlcGFydGl0aW9uLmJsdWUrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcGFydGl0aW9uO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgeyBUaHJlYWRSZWRCbHVlR3JlZW4gfTtcclxuIiwiaW1wb3J0IHsgSVBvaW50IH0gZnJvbSBcIi4uL2ludGVyZmFjZXMvaS1wb2ludFwiO1xyXG5pbXBvcnQgeyBJU2l6ZSB9IGZyb20gXCIuLi9pbnRlcmZhY2VzL2ktc2l6ZVwiO1xyXG5cclxuY2xhc3MgVHJhbnNmb3JtYXRpb24ge1xyXG4gICAgcHVibGljIHJlYWRvbmx5IHNjYWxpbmc6IG51bWJlcjtcclxuICAgIHB1YmxpYyByZWFkb25seSBvcmlnaW46IElQb2ludDtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoZnJhbWVTaXplOiBJU2l6ZSwgZWxlbWVudFNpemU6IElTaXplKSB7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVUb0ZpdFdpZHRoID0gZnJhbWVTaXplLndpZHRoIC8gZWxlbWVudFNpemUud2lkdGg7XHJcbiAgICAgICAgY29uc3Qgc2NhbGVUb0ZpdEhlaWdodCA9IGZyYW1lU2l6ZS5oZWlnaHQgLyBlbGVtZW50U2l6ZS5oZWlnaHQ7XHJcblxyXG4gICAgICAgIHRoaXMuc2NhbGluZyA9IE1hdGgubWluKHNjYWxlVG9GaXRXaWR0aCwgc2NhbGVUb0ZpdEhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5vcmlnaW4gPSB7XHJcbiAgICAgICAgICAgIHg6IDAuNSAqIChmcmFtZVNpemUud2lkdGggLSB0aGlzLnNjYWxpbmcgKiBlbGVtZW50U2l6ZS53aWR0aCksXHJcbiAgICAgICAgICAgIHk6IDAuNSAqIChmcmFtZVNpemUuaGVpZ2h0IC0gdGhpcy5zY2FsaW5nICogZWxlbWVudFNpemUuaGVpZ2h0KVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRyYW5zZm9ybShwb2ludDogSVBvaW50KTogSVBvaW50IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiB0aGlzLm9yaWdpbi54ICsgcG9pbnQueCAqIHRoaXMuc2NhbGluZyxcclxuICAgICAgICAgICAgeTogdGhpcy5vcmlnaW4ueSArIHBvaW50LnkgKiB0aGlzLnNjYWxpbmcsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHsgVHJhbnNmb3JtYXRpb24gfTtcclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MzMpO1xuIl0sIm5hbWVzIjpbImRvd25sb2FkVGV4dEZpbGUiLCJjb250ZW50IiwiZmlsZW5hbWUiLCJmaWxlVHlwZSIsImJsb2IiLCJCbG9iIiwidHlwZSIsIndpbmRvdyIsIm5hdmlnYXRvciIsIm1zU2F2ZUJsb2IiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJsaW5rRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImRvd25sb2FkIiwiaHJlZiIsImRhdGFzZXQiLCJkb3dubG9hZHVybCIsInN0eWxlIiwiZGlzcGxheSIsImJvZHkiLCJhcHBlbmRDaGlsZCIsImNsaWNrIiwicmVtb3ZlQ2hpbGQiLCJzZXRUaW1lb3V0IiwicmV2b2tlT2JqZWN0VVJMIiwiZ2V0UXVlcnlTdHJpbmdWYWx1ZSIsIm5hbWUiLCJ1cmwiLCJsb2NhdGlvbiIsInF1ZXJ5U3RyaW5nU3RhcnQiLCJpbmRleE9mIiwicXVlcnlTdHJpbmciLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJzcGxpdCIsImtleVZhbHVlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZGVjbGFyZVBvbHlmaWxscyIsIkFycmF5IiwicHJvdG90eXBlIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwibG9nIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsImVsZW1lbnQiLCJ0aGlzIiwiU3RyaW5nIiwicmVwZWF0IiwiY291bnQiLCJJbmZpbml0eSIsIlJhbmdlRXJyb3IiLCJyZXN1bHQiLCJpIiwiSGVscGVycyIsImNhbnZhc1Bsb3R0ZXIiLCJQbG90dGVyQ2FudmFzMkQiLCJ0aHJlYWRQbG90dGVyIiwidGhyZWFkQ29tcHV0ZXIiLCJuZWVkVG9SZXNldCIsIm1haW5Mb29wIiwicmVzZXQiLCJQYXJhbWV0ZXJzIiwibGluZXNPcGFjaXR5IiwibGluZXNUaGlja25lc3MiLCJjb21wdXRlTmV4dFNlZ21lbnRzIiwic2hvd0luZGljYXRvcnMiLCJ1cGRhdGVJbmRpY2F0b3JzIiwiUGFnZSIsIkNhbnZhcyIsInNldEluZGljYXRvclRleHQiLCJwbG90IiwiZGVidWciLCJkcmF3RGVidWdWaWV3IiwiY29udGV4dCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInVwZGF0ZUJsdXIiLCJibHVyIiwib25OZXdJbWFnZSIsImltYWdlIiwic2hvd0xvYWRlciIsIlRocmVhZENvbXB1dGVyIiwiVGhyZWFkUGxvdHRlciIsImFkZFJlZHJhd09ic2VydmVyIiwiYWRkUmVzZXRPYnNlcnZlciIsImFkZEJsdXJDaGFuZ2VPYnNlcnZlciIsImFkZEZpbGVVcGxvYWRPYnNlcnZlciIsImRlZmF1bHRJbWFnZSIsIkltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNyYyIsImFkZERvd25sb2FkT2JzZXJ2ZXIiLCJzdmdQbG90dGVyIiwiUGxvdHRlclNWRyIsInN2Z1N0cmluZyIsImV4cG9ydCIsImFkZERvd25sb2FkSW5zdHJ1Y3Rpb25zT2JzZXJ2ZXIiLCJnZXRTZWdtZW50IiwidGV4dCIsImluc3RydWN0aW9ucyIsIm1haW4iLCJFU2hhcGUiLCJFTW9kZSIsImNvbnRyb2xJZCIsInJlZHJhd09ic2VydmVycyIsInRyaWdnZXJSZWRyYXciLCJvYnNlcnZlciIsInJlc2V0T2JzZXJ2ZXJzIiwidHJpZ2dlclJlc2V0IiwiVGFicyIsImFkZE9ic2VydmVyIiwiUmFuZ2UiLCJhZGRMYXp5T2JzZXJ2ZXIiLCJDaGVja2JveCIsIk9ic2VydmVycyIsImNhbnZhc1Jlc2l6ZSIsInB1c2giLCJpc0luRGVidWciLCJ1cGRhdGVJbmRpY2F0b3JzVmlzaWJpbGl0eSIsInNob3VsZEJlVmlzaWJsZSIsImlzQ2hlY2tlZCIsInNldEluZGljYXRvcnNWaXNpYmlsaXR5Iiwic2V0SW5kaWNhdG9yVmlzaWJpbGl0eSIsImNhbGxiYWNrIiwiRmlsZUNvbnRyb2wiLCJhZGRVcGxvYWRPYnNlcnZlciIsImZpbGVzTGlzdCIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJyZWFkQXNEYXRhVVJMIiwiZ2V0VmFsdWVzIiwiZ2V0VmFsdWUiLCJyYXciLCJNYXRoIiwicG93IiwidXBkYXRlRG93bmxvYWRJbnN0cnVjdGlvbnNWaXNpYmlsaXR5IiwiRUNvbXBvc2l0aW5nT3BlcmF0aW9uIiwiRUNvbG9yIiwic3VwcG9ydHNBZHZhbmNlZENvbXBvc2l0aW5nIiwiY29tcHV0ZVJhd0NvbG9yIiwiY29sb3IiLCJNT05PQ0hST01FIiwiciIsImciLCJiIiwiUkVEIiwiR1JFRU4iLCJCTFVFIiwicmVzZXRDYW52YXNDb21wb3NpdGluZyIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsInVzZUFkdmFuY2VkQ29tcG9zaXRpbmciLCJhcHBseUNhbnZhc0NvbXBvc2l0aW5nIiwib3BhY2l0eSIsIm9wZXJhdGlvbiIsInJhd1JHQiIsInRhcmdldE9wZXJhdGlvbiIsIkxJR0hURU4iLCJjZWlsIiwic3Ryb2tlU3R5bGUiLCJEZW1vcGFnZSIsInNldEVycm9yTWVzc2FnZSIsIkRBUktFTiIsImRyYXdCcm9rZW5MaW5lIiwicG9pbnRzIiwidGhpY2tuZXNzIiwibGluZXMiLCJmcm9tIiwidG8iLCJkcmF3TGluZXMiLCJQbG90dGVyQmFzZSIsInNlZ21lbnRMaW5lcyIsInNlZ1BvaW50cyIsImNhbnZhcyIsImdldENhbnZhcyIsImdldENvbnRleHQiLCJhbHBoYSIsImNzc1BpeGVsIiwiZGV2aWNlUGl4ZWxSYXRpbyIsInJlc2l6ZSIsImFjdHVhbFdpZHRoIiwiZmxvb3IiLCJjbGllbnRXaWR0aCIsImFjdHVhbEhlaWdodCIsImNsaWVudEhlaWdodCIsIndpZHRoIiwiaGVpZ2h0IiwiaW5pdGlhbGl6ZSIsImluZm9zIiwiZmlsbFN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwibGluZUpvaW4iLCJmaWxsUmVjdCIsImZpbmFsaXplIiwiZmlsdGVyIiwibGluZVdpZHRoIiwibGluZSIsImNvbG9yTmFtZSIsImJlZ2luUGF0aCIsIm1vdmVUbyIsIngiLCJ5IiwibGluZVRvIiwic3Ryb2tlIiwiY2xvc2VQYXRoIiwiZHJhd1BvaW50cyIsImRpYW1ldGVyIiwicG9pbnQiLCJhcmMiLCJQSSIsImZpbGwiLCJzZWdtZW50RnJvbVBvaW50Iiwic2VnbWVudFRvUG9pbnQiLCJqIiwiQkxVUl9FRkZFQ1RfSUQiLCJ3cml0ZXIiLCJYTUxXcml0ZXIiLCJoYXNCbHVyIiwiYWRkTGluZSIsInN0YXJ0QmxvY2siLCJlbmRCbG9jayIsIldJRFRIIiwiSEVJR0hUIiwic3Ryb2tlQ29sb3IiLCJ0b0ZpeGVkIiwic3RhcnQiLCJEYXRlIiwibm93IiwiaW5kZW50YXRpb25MZXZlbCIsImpvaW4iLCJwcmVmaXgiLCJNSU5fU0FGRV9OVU1CRVIiLCJUV09fUEkiLCJjbGFtcCIsIm1pbiIsIm1heCIsIm1peCIsImEiLCJyYW5kb21JdGVtIiwibGlzdCIsInJhbmRvbSIsImhpZGRlbkNhbnZhc0RhdGEiLCJzb3VyY2VJbWFnZSIsImhpZGRlbkNhbnZhcyIsImhpZGRlbkNhbnZhc0NvbnRleHQiLCJwZWdzIiwiZHJhd1RocmVhZCIsInBsb3R0ZXIiLCJuYlNlZ21lbnRzVG9JZ25vcmUiLCJ0cmFuc2Zvcm1hdGlvbiIsImNvbXB1dGVUcmFuc2Zvcm1hdGlvbiIsInNpemUiLCJzY2FsaW5nIiwiaGlkZGVuQ2FudmFzU2NhbGUiLCJsaW5lVGhpY2tuZXNzIiwiY29tcG9zaXRpbmciLCJpbnZlcnRDb2xvcnMiLCJ0aHJlYWQiLCJpdGVyYXRlT25UaHJlYWRzIiwicGVnIiwidHJhbnNmb3JtIiwibGluZU9wYWNpdHkiLCJkcmF3UGVncyIsInBvaW50U2l6ZSIsInRhcmdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJtYXhNaWxsaXNlY29uZHNUYWtlbiIsInBlcmZvcm1hbmNlIiwidGFyZ2V0TmJTZWdtZW50cyIsIm5iTGluZXMiLCJuYlNlZ21lbnRzIiwibG93ZXJOYlNlZ21lbnRzIiwicmVzZXRIaWRkZW5DYW52YXMiLCJsaW5lT3BhY2l0eUludGVybmFsIiwiaVBlZyIsImRyYXdTZWdtZW50T25IaWRkZW5DYW52YXMiLCJjb21wdXRlRXJyb3IiLCJsYXN0Q29sb3IiLCJ0aHJlYWRUb0dyb3ciLCJnZXRUaHJlYWRUb0dyb3ciLCJlbmFibGVTYW1wbGluZ0ZvciIsImNvbXB1dGVTZWdtZW50IiwibGluZXRoaWNrbmVzcyIsInF1YWxpdHkiLCJtb2RlIiwiVGhyZWFkTW9ub2Nocm9tZSIsIlRocmVhZFJlZEJsdWVHcmVlbiIsImNvbXB1dGVQZWdzIiwidXBkYXRlRnVuY3Rpb24iLCJ0b1N0cmluZyIsImVycm9yIiwiYXZlcmFnZSIsIm1lYW5TcXVhcmUiLCJ2YXJpYW5jZSIsInRvdGFsTmJTZWdtZW50cyIsImRvbWFpbldpZHRoIiwiZG9tYWluSGVpZ2h0IiwidGhyZWFkVGhpY2tuZXNzIiwibmFtZWRQZWdzIiwiaVAiLCJuYW1lZFRocmVhZCIsImluaXRpYWxpemVIaWRkZW5DYW52YXNMaW5lUHJvcGVydGllcyIsInRoZW9yaWNhbFRoaWNrbmVzIiwibGFzdFBlZyIsIm5leHRQZWciLCJzdGFydGluZ1NlZ21lbnQiLCJjb21wdXRlQmVzdFN0YXJ0aW5nU2VnbWVudCIsInBlZzEiLCJwZWcyIiwiSElTVE9SWV9TSVpFIiwicHJldm91c1BlZ3MiLCJzbGljZSIsImNvbXB1dGVCZXN0TmV4dFBlZyIsIndhbnRlZFNpemUiLCJjb21wdXRlQmVzdFNpemUiLCJpbWFnZURhdGEiLCJnZXRJbWFnZURhdGEiLCJhZGp1c3RDYW52YXNEYXRhIiwiZGF0YSIsInB1dEltYWdlRGF0YSIsInVwbG9hZENhbnZhc0RhdGFUb0NQVSIsIm5iUGl4ZWxzIiwibmJTYW1wbGVzIiwiZXJyb3JSZWQiLCJlcnJvckdyZWVuIiwiZXJyb3JCbHVlIiwicm91bmQiLCJkaXN0YW5jZXRvRXJyb3IiLCJ0YXJnZXRTaXplIiwiVHJhbnNmb3JtYXRpb24iLCJjYW5kaWRhdGVzIiwiYmVzdFNjb3JlIiwic3RlcCIsImlQZWdJZDEiLCJpUGVnSWQyIiwiYXJlUGVnc1Rvb0Nsb3NlIiwiY2FuZGlkYXRlU2NvcmUiLCJjb21wdXRlU2VnbWVudFBvdGVudGlhbCIsImN1cnJlbnRQZWciLCJwZWdzVG9Bdm9pZCIsInAxIiwicDIiLCJkWCIsImRZIiwicG90ZW50aWFsIiwic2VnbWVudExlbmd0aCIsInNxcnQiLCJpU2FtcGxlIiwic2FtcGxlIiwic2FtcGxlQ2FudmFzRGF0YSIsImNvb3JkcyIsIm1pblgiLCJtYXhYIiwibWluWSIsIm1heFkiLCJ0b3BMZWZ0Iiwic2FtcGxlQ2FudmFzUGl4ZWwiLCJ0b3BSaWdodCIsImJvdHRvbUxlZnQiLCJib3R0b21SaWdodCIsImZyYWN0WCIsInRvcCIsImJvdHRvbSIsInBpeGVsWCIsInBpeGVsWSIsImluZGV4Iiwic2FtcGxlQ2FudmFzIiwic291cmNlSW1hZ2VTaXplIiwibWF4U2l6ZSIsInNpemluZ0ZhY3RvciIsImRvbWFpblNpemUiLCJERUZBVUxUX0NBTlZBU19TSVpFX0ZPUl9QRUdTIiwiYXNwZWN0UmF0aW8iLCJwZWdzU2hhcGUiLCJzaGFwZSIsInBlZ3NDb3VudCIsIlJFQ1RBTkdMRSIsIm5iUGVnc1BlcldpZHRoIiwibmJQZWdzUGVySGVpZ2h0IiwiaVciLCJpSCIsImFic0RlbHRhQW5nbGUiLCJhYnMiLCJhbmdsZSIsImhhbGZXaWR0aCIsImhhbGZIZWlnaHQiLCJkaXN0YW5jZUJldHdlZW5QZWdzIiwiY29zQW5nbGUiLCJjb3MiLCJzaW5BbmdsZSIsInNpbiIsIm5iU2VnbWVudHNEcmF3biIsInBsb3R0ZXJJbmZvcyIsImRpc3BsYXlQZWdzIiwibG93ZXJOYlNlZ21lbnRzRm9yVGhyZWFkIiwidGFyZ2V0TnVtYmVyIiwiY29tcHV0ZU5iU2VnbWVudHMiLCJpdGVyYXRlT25UaHJlYWQiLCJmcm9tU2VnbWVudE51bWJlciIsIlRocmVhZEJhc2UiLCJ0aHJlYWRQZWdzIiwiYmxhY2tCYWNrZ3JvdW5kIiwiY29tcHV0ZUFkanVzdGVkVmFsdWUiLCJyYXdWYWx1ZSIsImFkanVzdGVkVmFsdWUiLCJ0aHJlYWRQZWdzUmVkIiwidGhyZWFkUGVnc0dyZWVuIiwidGhyZWFkUGVnc0JsdWUiLCJyZXBhcnRpdGlvbiIsImNvbXB1dGVJZGVhbFNlZ21lbnRzUmVwYXJ0aXRpb24iLCJyZWQiLCJncmVlbiIsImJsdWUiLCJjdW11bGF0ZWRSZWQiLCJjdW11bGF0ZWRHcmVlbiIsImN1bXVsYXRlZEJsdWUiLCJ0b3RhbENvbG9yIiwiZnJlcXVlbmN5UmVkIiwiZnJlcXVlbmN5R3JlZW4iLCJmcmVxdWVuY3lCbHVlIiwiY2hhbm5lbCIsImlkZWFsUmVkIiwiaWRlYWxHcmVlbiIsImlkZWFsQmx1ZSIsImdhcFJlZCIsImdhcEdyZWVuIiwiZ2FwQmx1ZSIsImZyYW1lU2l6ZSIsImVsZW1lbnRTaXplIiwic2NhbGVUb0ZpdFdpZHRoIiwic2NhbGVUb0ZpdEhlaWdodCIsIm9yaWdpbiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=
    </script>
</body>

</html>